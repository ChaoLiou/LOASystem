webpackJsonp([1],{"/8Bb":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.v-chip[data-v-56b47a9d] {\n  width: 95%;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/components/src\\components/LeaveInfo.vue"],names:[],mappings:";AAqEA;EACA,WAAA;CACA",file:"LeaveInfo.vue",sourcesContent:['<template>\n  <v-chip\n    v-on="on"\n    :label="allDay"\n    :color="color ? color : lt.color"\n    :text-color="pass ? (textColor ? textColor : whiteTextColor) : (color ? color : lt.color)"\n    :outline="!pass"\n    :class="{flash:!pass}"\n  >\n    <v-avatar :tile="allDay" :color="lt.color" v-if="icon">\n      <v-icon :color="whiteTextColor">{{lt.icon}}</v-icon>\n    </v-avatar>\n    {{taker}}\n  </v-chip>\n</template>\n\n<script>\nimport utility from "@/utility";\n\nexport default {\n  name: "LeaveInfo",\n  props: {\n    on: {\n      type: Object,\n      default: () => ({})\n    },\n    employee: {\n      type: Object,\n      default: () => ({})\n    },\n    record: {\n      type: Object,\n      default: () => ({})\n    },\n    color: {\n      type: String,\n      default: ""\n    },\n    textColor: {\n      type: String,\n      default: ""\n    },\n    icon: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: () => ({\n    whiteTextColor: "white"\n  }),\n  computed: {\n    pass() {\n      return this.record.pass;\n    },\n    allDay() {\n      return this.record.totals.days > 0;\n    },\n    taker() {\n      return this.employee.username;\n    },\n    lt() {\n      return utility.lookUpLeaveType(this.record.leaveType);\n    }\n  },\n  methods: {}\n};\n<\/script>\n\n<style scoped>\n.v-chip {\n  width: 95%;\n}\n</style>\n'],sourceRoot:""}])},"/YEM":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"LeaveForm.vue",sourceRoot:""}])},"0Iyf":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.disabled[data-v-2ef9cc58] {\n  background-color: #eee;\n  color: lightgray;\n}\n.v-list[data-v-2ef9cc58] {\n  display: grid;\n  grid-template-columns: repeat(5, 1fr);\n  grid-row-gap: 10px;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/views/src\\views/CompensatoryList.vue"],names:[],mappings:";AA+MA;EACA,uBAAA;EACA,iBAAA;CACA;AACA;EACA,cAAA;EACA,sCAAA;EACA,mBAAA;CACA",file:"CompensatoryList.vue",sourcesContent:['<template>\n  <page-container\n    :title="loalocale.self.title"\n    icon="event_available"\n    @notified="(notification) => systemNotification = notification"\n  >\n    <v-card class="elevation-12">\n      <calendar-controller\n        annual\n        :calendarDate="calendarDate"\n        @prev="(date) => calendarDate = date"\n        @next="(date) => calendarDate = date"\n        @tolastest="(date) => calendarDate = date"\n      >\n        <v-switch :label="loalocale.self.showResigners" v-if="fullControl" v-model="showResigners"></v-switch>\n        <v-switch\n          :label="loalocale.self.showAllHavingCompensatoryLT"\n          v-if="fullControl"\n          v-model="showAllHavingCompensatoryLT"\n        ></v-switch>\n        <v-text-field\n          v-model="search"\n          append-icon="search"\n          :label="loalocale.self.search"\n          hide-details\n        ></v-text-field>\n        <v-spacer></v-spacer>\n        <v-btn @click="download">\n          <v-icon>get_app</v-icon>\n          {{loalocale.self.download}}\n        </v-btn>\n      </calendar-controller>\n      <v-data-table\n        must-sort\n        :search="search"\n        :headers="headers"\n        :items="filteredEmployees"\n        item-key="_id"\n        :rows-per-page-items="[{\'text\':\'$vuetify.dataIterator.rowsPerPageAll\',\'value\':-1}]"\n      >\n        <template slot="items" slot-scope="props">\n          <tr\n            @click="props.expanded = !props.expanded"\n            :class="props.item.enabled ? \'\' : \'disabled\'"\n          >\n            <td>{{ props.item.employeeID }}</td>\n            <td>{{ props.item.name }}</td>\n            <td>{{ props.item.username }}</td>\n            <td class="min-width-120">{{ props.item.dept }}</td>\n            <td class="min-width-120">{{ formatDate(props.item.arrivedDate) }}</td>\n            <td class="min-width-160">{{ generateleaveTypeSummary(props.item.totals) }}</td>\n            <td class="min-width-120">\n              <employee-action\n                :key="props.item._id"\n                :employee="props.item"\n                :query="compensatoryKeyword"\n              ></employee-action>\n            </td>\n          </tr>\n        </template>\n        <template slot="expand" slot-scope="props">\n          <v-card flat>\n            <v-list v-if="props.item.enabled">\n              <leave-type-block\n                v-for="leaveType in filterLeaveTypes(props.item.leaveTypes)"\n                :key="leaveType._id"\n                :employee="props.item"\n                :leaveType="leaveType"\n              ></leave-type-block>\n            </v-list>\n          </v-card>\n        </template>\n      </v-data-table>\n    </v-card>\n    <system-notification v-model="systemNotification" @close="systemNotification.visible = false">\n      <div>{{systemNotification.text}}</div>\n    </system-notification>\n  </page-container>\n</template>\n<script>\nimport LeaveTypeBlock from "@/components/LeaveTypeBlock";\nimport EmployeeAction from "@/components/EmployeeAction";\nimport PageContainer from "@/components/PageContainer";\nimport SystemNotification from "@/components/SystemNotification";\nimport CalendarController from "@/components/CalendarController";\nimport EmployeeService from "@/services/EmployeeService";\nimport reportUtility from "@/reportUtility";\nimport defaultConf from "@/default";\nimport utility from "@/utility";\nexport default {\n  name: "CompensatoryList",\n  data: () => ({\n    showAllHavingCompensatoryLT: false,\n    calendarDate: new Date(),\n    search: "",\n    headers: [],\n    employees: [],\n    fullControl: false,\n    showResigners: false,\n    compensatoryKeyword: "",\n    systemNotification: {\n      level: "warning",\n      text: "",\n      visible: false,\n      handler: () => {}\n    }\n  }),\n  components: {\n    "employee-action": EmployeeAction,\n    "system-notification": SystemNotification,\n    "leave-type-block": LeaveTypeBlock,\n    "page-container": PageContainer,\n    "calendar-controller": CalendarController\n  },\n  computed: {\n    filteredEmployees() {\n      return this.employees\n        .filter(e => this.showResigners || e.enabled)\n        .filter(\n          e =>\n            this.showAllHavingCompensatoryLT ||\n            e.leaveTypes.some(\n              lt => new Date(lt.date).getFullYear() === this.year\n            )\n        );\n    },\n    year() {\n      return this.calendarDate.getFullYear();\n    }\n  },\n  created() {\n    this.compensatoryKeyword = defaultConf.compensatory.keyword;\n    this.headers = [\n      {\n        text: this.loalocale.self.employeeID,\n        value: "employeeID",\n        sortable: false\n      },\n      {\n        text: this.loalocale.self.name,\n        value: "name",\n        sortable: false\n      },\n      {\n        text: this.loalocale.self.username,\n        value: "username",\n        sortable: false\n      },\n      {\n        text: this.loalocale.self.dept,\n        value: "dept",\n        sortable: false\n      },\n      {\n        text: this.loalocale.self.arrivedDate,\n        value: "arrivedDate",\n        sortable: false\n      },\n      {\n        text: this.loalocale.self.compensatory,\n        value: "compensatory",\n        sortable: false\n      },\n      {\n        text: this.loalocale.self.action,\n        value: "",\n        sortable: false\n      }\n    ];\n  },\n  mounted() {\n    this.getEmployees();\n  },\n  methods: {\n    filterLeaveTypes(leaveTypes) {\n      return leaveTypes.filter(\n        lt => new Date(lt.date).getFullYear() === this.year\n      );\n    },\n    download() {\n      const url = EmployeeService.downloadURL.exportCompensatory({\n        year: this.year,\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token\n      });\n      const iframe = document.createElement("iframe");\n      iframe.src = url;\n      iframe.style = "display:none";\n      document.body.appendChild(iframe);\n    },\n    async getEmployees() {\n      const {\n        data: { employees, fullControl }\n      } = await EmployeeService.compensatory({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n        year: this.year\n      });\n      this.employees = employees;\n      this.fullControl = fullControl;\n    },\n    generateleaveTypeSummary: reportUtility.generateleaveTypeSummary,\n    formatDate: utility.formatDate\n  }\n};\n<\/script>\n<style scoped>\n.disabled {\n  background-color: #eee;\n  color: lightgray;\n}\n.v-list {\n  display: grid;\n  grid-template-columns: repeat(5, 1fr);\n  grid-row-gap: 10px;\n}\n</style>\n'],sourceRoot:""}])},"1wG9":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.sign-btn {\n  -webkit-box-pack: center !important;\n      -ms-flex-pack: center !important;\n          justify-content: center !important;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/components/src\\components/SigningBlock.vue"],names:[],mappings:";AA8GA;EACA,oCAAA;MAAA,iCAAA;UAAA,mCAAA;CACA",file:"SigningBlock.vue",sourcesContent:['<template>\n  <v-list-tile>\n    <v-list-tile-avatar v-if="!small">\n      <v-icon riple :class="record.class">{{record.icon}}</v-icon>\n    </v-list-tile-avatar>\n    <v-list-tile-content v-if="!small">\n      <v-list-tile-title>{{loalocale.shared.leaveTypes[record.leaveType] ? loalocale.shared.leaveTypes[record.leaveType] : record.leaveType}}</v-list-tile-title>\n      <v-list-tile-sub-title>{{generateSummary(record.dates, record.startFrom, record.endTo)}}</v-list-tile-sub-title>\n    </v-list-tile-content>\n    <v-list-tile-action v-if="needToSign">\n      <small>{{loalocale.self.label.sign}}</small>\n    </v-list-tile-action>\n    <v-list-tile-action class="sign-btn" v-if="needToSign">\n      <v-tooltip top>\n        <v-btn icon ripple @click="signLeave(employee._id, record._id, true)" slot="activator">\n          <v-icon color="green">thumb_up</v-icon>\n        </v-btn>\n        <div>{{loalocale.self.tooltip.pass}}</div>\n      </v-tooltip>\n    </v-list-tile-action>\n    <v-list-tile-action class="sign-btn" v-if="needToSign">\n      <v-tooltip top>\n        <v-btn icon ripple @click="signLeave(employee._id, record._id, false)" slot="activator">\n          <v-icon color="red">pan_tool</v-icon>\n        </v-btn>\n        <div>{{loalocale.self.tooltip.reject}}</div>\n      </v-tooltip>\n    </v-list-tile-action>\n    <v-list-tile-action>\n      <small>{{loalocale.self.label.signed}}</small>\n    </v-list-tile-action>\n    <v-list-tile-action>\n      <v-tooltip bottom>\n        <v-rating\n          slot="activator"\n          readonly\n          :value="distinctSignings(record.signings).length"\n          :length="record.signers.length"\n          empty-icon="check_box_outline_blank"\n          full-icon="check_box"\n        ></v-rating>\n        <signing-tooltip\n          v-for="signer in record.signers"\n          :key="signer._id"\n          :signer="signer"\n          :signings="record.signings"\n        ></signing-tooltip>\n      </v-tooltip>\n    </v-list-tile-action>\n  </v-list-tile>\n</template>\n\n<script>\nimport utility from "@/utility.js";\nimport SigningTooltip from "@/components/SigningTooltip";\nexport default {\n  name: "SigningBlock",\n  components: {\n    "signing-tooltip": SigningTooltip\n  },\n  props: {\n    small: {\n      type: Boolean,\n      default: false\n    },\n    employee: {\n      type: Object\n    },\n    record: {\n      type: Object\n    }\n  },\n  data: () => ({}),\n  computed: {\n    needToSign() {\n      return (\n        !this.record.pass &&\n        !this.sameAsCurrentUser &&\n        this.record.signers.some(\n          signer => signer.username === this.loginuser.username\n        )\n      );\n    },\n    sameAsCurrentUser() {\n      return (\n        this.loginuser.username.toLocaleLowerCase() ===\n        this.employee.username.toLocaleLowerCase()\n      );\n    }\n  },\n  mounted() {},\n  methods: {\n    signLeave(eid, rid, pass) {\n      this.$emit("sign", eid, rid, pass);\n    },\n    distinctSignings(signings) {\n      const result = [];\n      signings.forEach(signing => {\n        if (!result.some(x => x.username === signing.username)) {\n          result.push(signing);\n        }\n      });\n      return result;\n    },\n    generateSummary: utility.generateSummary\n  }\n};\n<\/script>\n\n<style>\n.sign-btn {\n  justify-content: center !important;\n}\n</style>\n'],sourceRoot:""}])},"24rf":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.primary-shifter {\n  position: absolute;\n  right: 10px;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/views/src\\views/ShiftCalendar.vue"],names:[],mappings:";AAoWA;EACA,mBAAA;EACA,YAAA;CACA",file:"ShiftCalendar.vue",sourcesContent:['<template>\n  <page-container\n    :title="loalocale.self.title"\n    icon="schedule"\n    @notified="(notification) => systemNotification = notification"\n  >\n    <v-card class="elevation-12">\n      <calendar-controller\n        :calendarDate="new Date(calendarDate)"\n        @prev="$refs.calendar.prev()"\n        @next="$refs.calendar.next()"\n        @tolastest="(date) => calendarDate = formatDate(date)"\n      >\n        <v-chip v-if="access.message" label outline>{{access.message}}</v-chip>\n        <v-btn @click="download">\n          <v-icon>get_app</v-icon>\n          {{loalocale.self.download}}\n        </v-btn>\n        <v-btn-toggle v-model="selectedEmployee" v-if="!readonly">\n          <v-tooltip v-for="employee in employees" :key="employee.username" bottom>\n            <v-btn :value="employee" slot="activator">{{employee.username}}</v-btn>\n            <employee-info :profile="employee" icon email></employee-info>\n          </v-tooltip>\n        </v-btn-toggle>\n      </calendar-controller>\n      <v-card-text>\n        <v-sheet>\n          <v-calendar\n            class="calendar"\n            ref="calendar"\n            v-model="calendarDate"\n            type="month"\n            color="primary"\n          >\n            <template v-slot:day="{ date }">\n              <div style="font-size:10px">{{getHolidayTitle(date)}}</div>\n              <v-btn-toggle v-if="shiftGroups[date] && !readonly">\n                <v-chip :color="daypartConf[\'早\'].color" outline label @click="add(date, \'早\')">早</v-chip>\n                <v-chip :color="daypartConf[\'中\'].color" outline label @click="add(date, \'中\')">中</v-chip>\n                <v-chip :color="daypartConf[\'日\'].color" outline label @click="add(date, \'日\')">日</v-chip>\n              </v-btn-toggle>\n              <template v-for="(item, index) in shiftGroups[date]">\n                <div :key="`${date}_${index}`">\n                  <v-chip\n                    label\n                    style="width:95%;"\n                    @click="remove(item.employee._id, item.shift._id)"\n                    :color="item.color"\n                    text-color="white"\n                  >\n                    <v-avatar tile>{{item.shift.daypart}}</v-avatar>\n                    {{item.employee.username}}\n                    <v-icon class="primary-shifter" v-if="showPrimary(shiftGroups[date], item)">star_border</v-icon>\n                  </v-chip>\n                </div>\n              </template>\n            </template>\n          </v-calendar>\n        </v-sheet>\n      </v-card-text>\n      <v-divider></v-divider>\n      <v-card-title primary-title>\n        <h3 class="headline">時間段說明</h3>\n      </v-card-title>\n      <v-card-text>\n        <shift-config\n          :readonly="readonly"\n          @notified="(notification) => systemNotification = notification"\n        ></shift-config>\n      </v-card-text>\n    </v-card>\n    <system-notification v-model="systemNotification" @close="systemNotification.visible = false">\n      <div>{{systemNotification.text}}</div>\n    </system-notification>\n  </page-container>\n</template>\n<script>\nimport PageContainer from "@/components/PageContainer";\nimport SystemNotification from "@/components/SystemNotification";\nimport CalendarController from "@/components/CalendarController";\nimport EmployeeInfo from "@/components/EmployeeInfo";\nimport ShiftConfig from "@/components/ShiftConfig";\nimport EmployeeService from "@/services/EmployeeService";\nimport utility from "@/utility";\nimport defaultConf from "@/default";\nexport default {\n  name: "ShiftCalendar",\n  components: {\n    "page-container": PageContainer,\n    "system-notification": SystemNotification,\n    "calendar-controller": CalendarController,\n    "employee-info": EmployeeInfo,\n    "shift-config": ShiftConfig\n  },\n  data() {\n    return {\n      calendarDate: utility.formatDate("now"),\n      systemNotification: {\n        level: "warning",\n        text: "",\n        visible: false,\n        handler: () => {}\n      },\n      selectedEmployee: "",\n      employees: [],\n      daypartConf: defaultConf.shiftDaypart,\n      holidays: []\n    };\n  },\n  computed: {\n    readonly() {\n      return (\n        (this.loginuser.level !== "manager" &&\n          this.loginuser.level !== "admin") ||\n        this.access.expired\n      );\n    },\n    shiftGroups() {\n      const lastDate = new Date(\n        this.calendarDateYear,\n        this.calendarDateMonth,\n        0\n      );\n      const lastDateNumber = lastDate.getDate();\n      const map = {};\n      Array.apply(null, { length: lastDateNumber })\n        .map(\n          (value, index) =>\n            new Date(\n              this.calendarDateYear,\n              this.calendarDateMonth - 1,\n              index + 1\n            )\n        )\n        .filter(date => {\n          const weekday = date.getDay();\n          return weekday !== 0 && weekday !== 6;\n        })\n        .forEach(date => {\n          const dateStr = utility.formatDate(date);\n          map[dateStr] = [];\n        });\n      this.employees.forEach(employee => {\n        employee.shifts.forEach(shift => {\n          const dateStr = utility.formatDate(shift.date);\n          (map[dateStr] = map[dateStr] || []).push({\n            shift,\n            employee,\n            color: defaultConf.shiftEmployee[employee.username.toLowerCase()].color\n          });\n        });\n      });\n      Object.keys(map).forEach(\n        key =>\n          (map[key] = map[key].sort((a, b) => {\n            const aDaypart = a.shift.daypart;\n            const bDaypart = b.shift.daypart;\n            if (aDaypart === bDaypart) {\n              return 0;\n            } else if (\n              (aDaypart === "早" && (bDaypart === "中" || bDaypart === "日")) ||\n              (aDaypart === "中" && bDaypart === "日")\n            ) {\n              return -1;\n            } else if (\n              (aDaypart === "中" && bDaypart === "早") ||\n              (aDaypart === "日" && (bDaypart === "早" || bDaypart === "中"))\n            ) {\n              return 1;\n            }\n          }))\n      );\n      return map;\n    },\n    access() {\n      const currentDateObj = new Date();\n      const currentDate = currentDateObj.getDate();\n      const currentDateMonth = currentDateObj.getMonth() + 1;\n      const currentDateYear = currentDateObj.getFullYear();\n      if (\n        this.calendarDateYear < currentDateYear ||\n        (this.calendarDateYear === currentDateYear &&\n          this.calendarDateMonth < currentDateMonth)\n      ) {\n        return {\n          expired: true,\n          message: this.loalocale.self.expired\n        };\n      } else {\n        const workdaysBeforeCurrentMonthEnds = 2;\n        if (\n          this.calendarDateMonth === currentDateMonth &&\n          this.calendarDateYear === currentDateYear\n        ) {\n          const expiredDateCandidates = Array.apply(null, { length: 7 })\n            .map(\n              (value, index) =>\n                new Date(currentDateYear, currentDateMonth, 0 - index)\n            )\n            .filter(date => date.getDay() !== 6 && date.getDay() !== 0);\n          const expiredDate =\n            expiredDateCandidates[workdaysBeforeCurrentMonthEnds - 1];\n          return {\n            expired: currentDate >= expiredDate.getDate(),\n            message: `${this.loalocale.self.expiredAt}: ${utility.formatDate(\n              expiredDate\n            )}`\n          };\n        } else {\n          return {\n            expired: false,\n            message: `${\n              this.loalocale.self.expiredAt\n            }: ${this.loalocale.self.workdaysBeforeCurrentMonthEnds.replace(\n              "{0}",\n              workdaysBeforeCurrentMonthEnds\n            )}`\n          };\n        }\n      }\n    },\n    calendarDateObj() {\n      return new Date(this.calendarDate);\n    },\n    calendarDateYear() {\n      return this.calendarDateObj.getFullYear();\n    },\n    calendarDateMonth() {\n      return this.calendarDateObj.getMonth() + 1;\n    }\n  },\n  async mounted() {\n    this.getHoliday();\n    this.getShifts();\n  },\n  methods: {\n    showPrimary(items, item) {\n      const filteredItems = items.filter(\n        x => x.shift.daypart === item.shift.daypart\n      );\n      return filteredItems.length > 1 && item.shift.primary;\n    },\n    download() {\n      const url = EmployeeService.downloadURL.exportShift({\n        year: this.calendarDateYear,\n        month: this.calendarDateMonth,\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token\n      });\n      const iframe = document.createElement("iframe");\n      iframe.src = url;\n      iframe.style = "display:none";\n      document.body.appendChild(iframe);\n    },\n    async getHoliday() {\n      const { data: { holidays } } = await EmployeeService.getHoliday({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n        year: this.calendarDateYear,\n        month: this.calendarDateMonth\n      });\n      this.holidays = holidays;\n    },\n    async getShifts(initDefault = true) {\n      const {\n        data: { fullControl, employees }\n      } = await EmployeeService.getShifts({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n        year: this.calendarDateYear,\n        month: this.calendarDateMonth\n      });\n      this.fullControl = fullControl;\n      this.employees = this.filter(employees);\n      if (initDefault) {\n        this.selectedEmployee =\n          this.employees.length > 0 ? this.employees[0] : undefined;\n      }\n    },\n    filter(employees) {\n      return employees.filter(e => defaultConf.shiftDepts.includes(e.dept));\n    },\n    async add(date, daypart) {\n      if (!this.readonly) {\n        const primary = !this.alreadyHaveShifter(date, daypart);\n        const {\n          data: { success, message }\n        } = await EmployeeService.updateShift({\n          loginuser: this.loginuser.username,\n          token: this.loginuser.token,\n          id: this.selectedEmployee._id,\n          shift: {\n            date,\n            daypart,\n            primary\n          }\n        });\n        if (success) {\n          this.getShifts(false);\n        } else {\n          this.systemNotification.level = "warning";\n          this.systemNotification.text = utility.lookUpCustomMessage(message);\n          this.systemNotification.visible = true;\n        }\n      }\n    },\n    alreadyHaveShifter(date, daypart) {\n      return Object.keys(this.shiftGroups).some(\n        dateStr =>\n          dateStr === date &&\n          this.shiftGroups[dateStr] &&\n          this.shiftGroups[dateStr].length > 0 &&\n          this.shiftGroups[dateStr].some(item => item.shift.daypart === daypart)\n      );\n    },\n    async remove(employeeId, shiftId) {\n      if (!this.readonly) {\n        const {\n          data: { success, message }\n        } = await EmployeeService.updateShift({\n          loginuser: this.loginuser.username,\n          token: this.loginuser.token,\n          id: employeeId,\n          shiftId: shiftId\n        });\n        if (success) {\n          this.getShifts(false);\n        } else {\n          this.systemNotification.level = "warning";\n          this.systemNotification.text = utility.lookUpCustomMessage(message);\n          this.systemNotification.visible = true;\n        }\n      }\n    },\n    getHolidayTitle(date) {\n      if (this.holidays.length > 0) {\n        const dateObj = new Date(date);\n        const holiday = this.holidays.find(\n          h => new Date(h.date).toDateString() === dateObj.toDateString()\n        );\n        return holiday ? holiday.title : "";\n      } else {\n        return "";\n      }\n    },\n    formatDate: utility.formatDate\n  },\n  watch: {\n    calendarDate() {\n      this.getHoliday();\n      this.getShifts();\n    }\n  }\n};\n<\/script>\n<style>\n.primary-shifter {\n  position: absolute;\n  right: 10px;\n}\n</style>\n'],sourceRoot:""}])},"2UIF":function(e,n,t){var a=t("1wG9");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("2d4f8b9c",a,!1)},"74l2":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.active[data-v-96fc41e8] {\n  background: rgba(0, 0, 0, 0.04);\n}\n.nav-expander[data-v-96fc41e8],\n.nav-expander[data-v-96fc41e8]::before {\n  border-radius: 0;\n  width: 20px;\n  background: #faf05e91;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/components/src\\components/NavDrawer.vue"],names:[],mappings:";AA4NA;EACA,gCAAA;CACA;AACA;;EAEA,iBAAA;EACA,YAAA;EACA,sBAAA;CACA",file:"NavDrawer.vue",sourcesContent:['<template>\n  <div>\n    <v-navigation-drawer :mini-variant="mini" fixed app right>\n      <v-card>\n        <v-img\n          class="white--text"\n          height="200px"\n          :src="`/static/avatar/${loginuser.username}.png`"\n        >\n          <v-btn class="nav-expander" icon @click.stop="mini = !mini">\n            <v-icon>{{ mini ? "chevron_left" : "chevron_right" }}</v-icon>\n          </v-btn>\n        </v-img>\n        <v-card-title v-if="!mini">\n          <employee-info :profile="loginuser" small icon></employee-info>\n          <employee-account-settings\n            :account="account"\n            @reset:email="resetEmail"\n            @reset:password="resetPWD"\n          ></employee-account-settings>\n        </v-card-title>\n      </v-card>\n      <v-list dense>\n        <template v-for="(submenu, i) in menu">\n          <template v-for="(item, j) in submenu.list">\n            <v-subheader :key="`header_${i}_${j}`" v-if="item.header">{{\n              item.title\n            }}</v-subheader>\n            <v-list-tile\n              :key="`list-tile_${i}_${j}`"\n              v-else\n              @click="item.action"\n              :class="{ active: item.title === title }"\n            >\n              <v-tooltip left>\n                <v-list-tile-action slot="activator">\n                  <v-icon>{{ item.icon }}</v-icon>\n                </v-list-tile-action>\n                {{ item.title }}\n              </v-tooltip>\n              <v-list-tile-content>\n                <v-list-tile-title>{{ item.title }}</v-list-tile-title>\n              </v-list-tile-content>\n            </v-list-tile>\n          </template>\n        </template>\n      </v-list>\n    </v-navigation-drawer>\n    <v-toolbar color="theme" dark fixed app height="40">\n      <v-toolbar-title>\n        <v-tooltip bottom>\n          <v-toolbar-title slot="activator">\n            <v-icon color="white">{{ icon }}</v-icon>\n            {{ title }}\n          </v-toolbar-title>\n          <slot></slot>\n        </v-tooltip>\n      </v-toolbar-title>\n      <v-spacer></v-spacer>\n      <v-toolbar-title v-if="loginuser.level === \'admin\'">\n        <annualinfo-management @update="update"></annualinfo-management>\n      </v-toolbar-title>\n      <v-toolbar-title v-if="loginuser.level === \'admin\'">\n        <database-management\n          @dbbackup="dbbackup"\n          @dbrestore="dbrestore"\n        ></database-management>\n      </v-toolbar-title>\n      <v-toolbar-title>\n        <v-tooltip bottom>\n          <v-btn slot="activator" icon @click="logout($cookie, $router)">\n            <v-icon color="white">power_settings_new</v-icon>\n          </v-btn>\n          {{ loalocale.self.logout }}\n        </v-tooltip>\n      </v-toolbar-title>\n    </v-toolbar>\n  </div>\n</template>\n<script>\nimport EmployeeInfo from "@/components/EmployeeInfo";\nimport EmployeeAccountSettings from "@/components/EmployeeAccountSettings";\nimport DatabaseManagement from "@/components/DatabaseManagement";\nimport AnnualInfoManagement from "@/components/AnnualInfoManagement";\nimport config from "@/services/config";\nimport utility from "@/utility";\nexport default {\n  name: "NavDrawer",\n  components: {\n    "employee-info": EmployeeInfo,\n    "employee-account-settings": EmployeeAccountSettings,\n    "database-management": DatabaseManagement,\n    "annualinfo-management": AnnualInfoManagement\n  },\n  props: {\n    icon: {\n      type: String,\n      default: ""\n    },\n    title: {\n      type: String,\n      default: ""\n    }\n  },\n  data: () => ({\n    mini: true,\n    dialog: false,\n    config,\n    menu: [],\n    account: {\n      password: "",\n      email: "",\n      id: ""\n    }\n  }),\n  mounted() {\n    this.account.email = this.loginuser.email;\n    this.account.id = this.loginuser._id;\n    this.menu = [\n      {\n        list: [\n          {\n            title: this.loalocale.self.common,\n            header: true\n          },\n          {\n            title: this.loalocale.self.leaveCalendar,\n            icon: "event_note",\n            action: () => this.$router.push({ name: "LeaveCalendar" })\n          },\n          {\n            title: this.loalocale.self.employees,\n            icon: "view_list",\n            action: () => this.$router.push({ name: "List" })\n          },\n          {\n            title: this.loalocale.self.compensatory,\n            icon: "event_available",\n            action: () => this.$router.push({ name: "CompensatoryList" })\n          },\n          {\n            title: this.loalocale.self.report,\n            header: true\n          },\n          {\n            title: this.loalocale.self.annualReport,\n            icon: "view_quilt",\n            action: () => this.$router.push({ name: "AnnualReport" })\n          },\n          {\n            title: this.loalocale.self.monthlyReport,\n            icon: "view_quilt",\n            action: () => this.$router.push({ name: "MonthlyReport" })\n          },\n          {\n            title: this.loalocale.self.others,\n            header: true\n          },\n          {\n            title: this.loalocale.self.shiftCalendar,\n            icon: "schedule",\n            action: () => this.$router.push({ name: "ShiftCalendar" })\n          }\n        ]\n      }\n    ];\n  },\n  methods: {\n    logout: (cookie, router) => {\n      cookie.delete("loasystem.loginuser");\n      router.push({ name: "Login" });\n    },\n    resetPWD(success, message) {\n      this.$emit("notified", {\n        text: utility.lookUpCustomMessage(message, this.loalocale.self.message),\n        level: success ? "info" : "warning",\n        visible: true,\n        handler: ($router, $cookie) => {\n          if (success) {\n            this.logout($cookie, $router);\n          }\n        }\n      });\n    },\n    update(success, message) {\n      this.$emit("notified", {\n        text: utility.lookUpCustomMessage(message, this.loalocale.self.message),\n        level: success ? "info" : "warning",\n        visible: true,\n        handler: ($router, $cookie) => {\n          if (success) {\n            location.reload();\n          }\n        }\n      });\n    },\n    resetEmail(success, message) {\n      this.$emit("notified", {\n        text: utility.lookUpCustomMessage(message, this.loalocale.self.message),\n        level: success ? "info" : "warning",\n        visible: true\n      });\n    },\n    dbbackup(success, message) {},\n    dbrestore(success, message) {\n      this.$emit("notified", {\n        text: utility.lookUpCustomMessage(message, this.loalocale.self.message),\n        level: success ? "info" : "warning",\n        visible: true,\n        handler: ($router, $cookie) => {\n          if (success) {\n            this.logout($cookie, $router);\n          }\n        }\n      });\n    }\n  }\n};\n<\/script>\n<style scoped>\n.active {\n  background: rgba(0, 0, 0, 0.04);\n}\n.nav-expander,\n.nav-expander::before {\n  border-radius: 0;\n  width: 20px;\n  background: #faf05e91;\n}\n</style>\n'],sourceRoot:""}])},"7zck":function(e,n){},"81gh":function(e,n,t){var a=t("m62g");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("bd848518",a,!1)},"84Sa":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.v-tour .v-step {\n  z-index: 99;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/components/src\\components/Tour.vue"],names:[],mappings:";AAkDA;EACA,YAAA;CACA",file:"Tour.vue",sourcesContent:['<template>\n  <div>\n    <v-btn bottom right icon @click="tour">\n      <v-icon color="blue-grey">info</v-icon>\n    </v-btn>\n    <v-tour name="tour" :steps="steps" :options="options"></v-tour>\n  </div>\n</template>\n<script>\nexport default {\n  name: "Tour",\n  props: {\n    steps: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data: () => ({\n    options: {\n      useKeyboardNavigation: false,\n      labels: {\n        buttonSkip: "",\n        buttonPrevious: "",\n        buttonNext: "",\n        buttonStop: ""\n      }\n    }\n  }),\n  mounted() {\n    this.options.labels = {\n      buttonSkip: this.loalocale.self.skip,\n      buttonPrevious: this.loalocale.self.previous,\n      buttonNext: this.loalocale.self.next,\n      buttonStop: this.loalocale.self.finish\n    };\n  },\n  methods: {\n    tour() {\n      this.$tours["tour"].start();\n    }\n  }\n};\n<\/script>\n<style scoped>\n.v-btn--floating.v-btn--small {\n  height: 25px;\n  width: 25px;\n}\n</style>\n<style>\n.v-tour .v-step {\n  z-index: 99;\n}\n</style>\n'],sourceRoot:""}])},"8Siw":function(e,n,t){var a=t("ezOW");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("1893dbd4",a,!1)},"8U6D":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"LeaveContainer.vue",sourceRoot:""}])},"8YcU":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"SigningTooltip.vue",sourceRoot:""}])},"903W":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"ShiftConfig.vue",sourceRoot:""}])},"9g63":function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.sign-btn {\n  -webkit-box-pack: center !important;\n      -ms-flex-pack: center !important;\n          justify-content: center !important;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/components/src\\components/LeaveTypeBlock.vue"],names:[],mappings:";AA2BA;EACA,oCAAA;MAAA,iCAAA;UAAA,mCAAA;CACA",file:"LeaveTypeBlock.vue",sourcesContent:['<template>\n  <v-list-tile>\n    <v-list-tile-content>\n      <v-list-tile-title>{{loalocale.shared.leaveTypes[leaveType.leaveType] ? loalocale.shared.leaveTypes[leaveType.leaveType] : leaveType.leaveType}}</v-list-tile-title>\n      <v-list-tile-sub-title>{{generateleaveTypeSummary(leaveType.daysNHours)}}</v-list-tile-sub-title>\n    </v-list-tile-content>\n  </v-list-tile>\n</template>\n\n<script>\nimport reportUtility from "@/reportUtility.js";\nexport default {\n  name: "LeaveTypeBlock",\n  props: {\n    leaveType: {\n      type: Object\n    }\n  },\n  data() {\n    return {};\n  },\n  methods: {\n    generateleaveTypeSummary: reportUtility.generateleaveTypeSummary\n  }\n};\n<\/script>\n<style>\n.sign-btn {\n  justify-content: center !important;\n}\n</style>\n'],sourceRoot:""}])},BE7F:function(e,n,t){var a=t("74l2");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("736ea5d0",a,!1)},BpHh:function(e,n,t){var a=t("J6qP");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("7c222dc1",a,!1)},C0a4:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"PageContainer.vue",sourceRoot:""}])},CRLo:function(e,n,t){var a=t("ZilF");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("ca037124",a,!1)},E74X:function(e,n,t){var a=t("903W");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("1a6e9b1d",a,!1)},HHMC:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.circle-icon[data-v-40132906] {\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n}\n.circle-icon i[data-v-40132906] {\n  padding: 3px;\n}\n.float-left[data-v-40132906] {\n  float: left;\n}\n.remarks[data-v-40132906] {\n  color: #cddc39;\n}\n.highlight[data-v-40132906] {\n  color: #2196f3;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/views/src\\views/LeaveTypeInfo.vue"],names:[],mappings:";AA+FA;EACA,YAAA;EACA,aAAA;EACA,oBAAA;CACA;AACA;EACA,aAAA;CACA;AACA;EACA,YAAA;CACA;AACA;EACA,eAAA;CACA;AACA;EACA,eAAA;CACA",file:"LeaveTypeInfo.vue",sourcesContent:['<template>\n  <div>\n    <v-card v-for="(lt) in leaveTypeInfos" :key="lt.name">\n      <v-layout row wrap>\n        <v-flex xs3>\n          <v-card-title primary-title>\n            <div :class="[lt.class, \'circle-icon\', \'float-left\']">\n              <v-icon color="white">{{lt.icon}}</v-icon>\n            </div>\n            <h3 class="headline">{{lt.name}}</h3>\n          </v-card-title>\n        </v-flex>\n        <v-flex xs9>\n          <template v-if="typeof(lt.granted) === typeof(\'\')">\n            <template v-if="typeof(lt.detailInfo) === typeof(\'\')">\n              <v-card-title>\n                <span class="highlight">{{lt.granted}}</span>\n                |{{lt.detailInfo}}\n              </v-card-title>\n            </template>\n            <template v-else>\n              <v-card-title class="highlight">{{lt.granted}}</v-card-title>\n              <v-card-title\n                v-for="(subDetailInfo, index) in lt.detailInfo"\n                :key="index"\n              >{{subDetailInfo}}</v-card-title>\n            </template>\n          </template>\n          <template v-else>\n            <span v-for="(subGranted, index) in lt.granted" :key="index">\n              <template v-if="typeof(lt.detailInfo[index]) === typeof(\'\')">\n                <v-card-title>\n                  <span class="highlight">{{subGranted}}</span>\n                  |{{lt.detailInfo[index]}}\n                </v-card-title>\n              </template>\n              <template v-else>\n                <v-card-title class="highlight">{{subGranted}}</v-card-title>\n                <v-card-title\n                  v-for="(subDetailInfo, index) in lt.detailInfo[index]"\n                  :key="index"\n                >{{subDetailInfo}}</v-card-title>\n              </template>\n            </span>\n          </template>\n        </v-flex>\n        <v-flex xs12>\n          <v-card-actions>\n            <span class="highlight">{{lt.others.paidInfo}}</span>\n          </v-card-actions>\n          <v-card-actions>\n            <span>{{lt.others.reference}}</span>\n          </v-card-actions>\n        </v-flex>\n      </v-layout>\n      <v-divider></v-divider>\n    </v-card>\n    <v-card>\n      <v-layout>\n        <v-flex xs12>\n          <v-card-title class="remarks" v-for="info in loalocale.self.otherInfos" :key="info">{{info}}</v-card-title>\n        </v-flex>\n      </v-layout>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport utility from "@/utility";\nexport default {\n  name: "LeaveTypeInfo",\n  props: {},\n  data() {\n    return {\n      show: false\n    };\n  },\n  computed: {\n    leaveTypeInfos: function() {\n      const leaveTypes = this.loalocale.self.leaveTypes;\n      return Object.keys(leaveTypes).map(key => {\n        const lt = leaveTypes[key];\n        const res = utility.lookUpLeaveTypeIconNClass(key);\n        return Object.assign({}, lt, {\n          class: res.class,\n          icon: res.icon\n        });\n      });\n    }\n  },\n  methods: {}\n};\n<\/script>\n\n<style scoped>\n.circle-icon {\n  width: 30px;\n  height: 30px;\n  border-radius: 15px;\n}\n.circle-icon i {\n  padding: 3px;\n}\n.float-left {\n  float: left;\n}\n.remarks {\n  color: #cddc39;\n}\n.highlight {\n  color: #2196f3;\n}\n</style>\n'],sourceRoot:""}])},HxDL:function(e,n,t){var a=t("8YcU");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("49237990",a,!1)},Ilu4:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"EmployeeAction.vue",sourceRoot:""}])},J6qP:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.v-btn--floating.v-btn--small[data-v-16a47b20] {\n  height: 25px;\n  width: 25px;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/components/src\\components/Tour.vue"],names:[],mappings:";AA4CA;EACA,aAAA;EACA,YAAA;CACA",file:"Tour.vue",sourcesContent:['<template>\n  <div>\n    <v-btn bottom right icon @click="tour">\n      <v-icon color="blue-grey">info</v-icon>\n    </v-btn>\n    <v-tour name="tour" :steps="steps" :options="options"></v-tour>\n  </div>\n</template>\n<script>\nexport default {\n  name: "Tour",\n  props: {\n    steps: {\n      type: Array,\n      default: () => []\n    }\n  },\n  data: () => ({\n    options: {\n      useKeyboardNavigation: false,\n      labels: {\n        buttonSkip: "",\n        buttonPrevious: "",\n        buttonNext: "",\n        buttonStop: ""\n      }\n    }\n  }),\n  mounted() {\n    this.options.labels = {\n      buttonSkip: this.loalocale.self.skip,\n      buttonPrevious: this.loalocale.self.previous,\n      buttonNext: this.loalocale.self.next,\n      buttonStop: this.loalocale.self.finish\n    };\n  },\n  methods: {\n    tour() {\n      this.$tours["tour"].start();\n    }\n  }\n};\n<\/script>\n<style scoped>\n.v-btn--floating.v-btn--small {\n  height: 25px;\n  width: 25px;\n}\n</style>\n<style>\n.v-tour .v-step {\n  z-index: 99;\n}\n</style>\n'],sourceRoot:""}])},JnC2:function(e,n,t){var a=t("eqaX");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("5c4bacf0",a,!1)},"K0/r":function(e,n,t){var a=t("HHMC");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("2defb626",a,!1)},K62i:function(e,n,t){var a=t("oUNO");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("1e91c981",a,!1)},LuBF:function(e,n,t){var a=t("pqC3");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("fc5ce346",a,!1)},N9iN:function(e,n,t){var a=t("bsW2");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("0c9de418",a,!1)},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("d7EF"),o=t.n(a),s=t("7+uW"),l=function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)};l._withStripped=!0;var r={render:l,staticRenderFns:[]},i=r;var c=!1;var u=t("VU/8")({name:"App"},i,!1,function(e){c||t("rvaL")},null,null);u.options.__file="src\\App.vue",u.esModule&&Object.keys(u.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var d=u.exports,p=t("/ocq"),m=t("Xxa5"),v=t.n(m),f=t("woOf"),y=t.n(f),h=t("exGp"),g=t.n(h),_={name:"EmployeeAction",props:{employee:{type:Object},fullControl:{type:Boolean,default:!1},query:{type:String,default:void 0}},data:function(){return{sameAsCurrentUser:!1,dialog:!1}},mounted:function(){this.sameAsCurrentUser=this.loginuser.username.toLocaleLowerCase()===this.employee.username.toLocaleLowerCase()},methods:{deleteEmployee:function(e){this.$emit("delete",e)},toggleEnable:function(e){this.$emit("toggle",e)}}},b=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("span",[t("span",[t("router-link",{attrs:{to:{name:"RecordList",params:{id:e.employee._id,query:e.query}}}},[e._v(e._s(e.loalocale.self.records))])],1),e._v(" "),e.fullControl?t("span",[e._v("\n    |\n    "),t("router-link",{attrs:{to:{name:"Detail",params:{id:e.employee._id}}}},[e._v(e._s(e.loalocale.self.edit))])],1):t("span",[e._v("\n    |\n    "),t("router-link",{attrs:{to:{name:"Detail",params:{id:e.employee._id}}}},[e._v(e._s(e.loalocale.self.view))])],1),e._v(" "),e.fullControl&&!e.sameAsCurrentUser?t("span",[e._v("\n    |\n    "),t("a",{attrs:{href:"#"},on:{click:function(n){return n.stopPropagation(),e.toggleEnable(e.employee._id)}}},[e._v(e._s(e.employee.enabled?e.loalocale.self.disable:e.loalocale.self.enable))])]):e._e(),e._v(" "),e.fullControl&&!e.employee.enabled?t("span",[e._v("\n    |\n    "),t("v-dialog",{attrs:{"max-width":"320"},model:{value:e.dialog,callback:function(n){e.dialog=n},expression:"dialog"}},[t("span",{attrs:{slot:"activator"},slot:"activator"},[t("a",{attrs:{href:"#"},on:{click:function(n){n.stopPropagation(),e.dialog=!0}}},[e._v(e._s(e.loalocale.self.delete))])]),e._v(" "),t("v-card",[t("v-card-title",{staticClass:"theme"},[t("v-icon",{staticStyle:{"padding-right":"10px"},attrs:{color:"yellow",large:""}},[e._v("warning")]),e._v(" "),t("span",{staticClass:"headline"},[e._v(e._s(e.loalocale.self.deletionConfirm))])],1),e._v(" "),t("v-card-text",[t("span",{staticStyle:{margin:"auto"}},[e._v(e._s(e.employee.employeeID)+": "+e._s(e.employee.name)+" ("+e._s(e.employee.username)+")")])]),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{flat:"flat"},on:{click:function(n){e.dialog=!1}}},[e._v(e._s(e.loalocale.self.close))]),e._v(" "),t("v-btn",{staticClass:"error",attrs:{flat:"flat"},on:{click:function(n){return n.stopPropagation(),e.deleteEmployee(e.employee._id)}}},[e._v(e._s(e.loalocale.self.delete))])],1)],1)],1)],1):e._e()])};b._withStripped=!0;var x={render:b,staticRenderFns:[]},A=x;var w=!1;var k=t("VU/8")(_,A,!1,function(e){w||t("vzNe")},null,null);k.options.__file="src\\components\\EmployeeAction.vue",k.esModule&&Object.keys(k.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var C=k.exports,T={en:{th:{years:"Year",months:"Month",days:"Days",hours:"Hours",compensatory:"Compensatory",statutory:"Statutory",sick:"sick leave",familyCare:"family care leave",personal:"personal leave",annual:"annual leave",menstrual:"menstrual leave",preManternity:"pre-manternity leave",manternityMiscarriage:"manternity/miscarriage leave",accompanyingManternity:"accompanying manternity leave",marriage:"marriage leave",funeral:"funeral leave",derelictionOfDuty:"Dereliction Of Duty",late:"Late",others:"Others",annualRemainings:"Annual Leave Remainings",annualDeadline:"Annual Leave Deadline",businessTrip:"business-trip leave",annualPreRequest:"annual prerequest leave"},tooltip:{export:"Export",report:"Report"},dialog:{report:"Choose a Month"},input:{report:"Month"}},zh:{th:{years:"年",months:"月",days:"日",hours:"時",sick:"普通傷病假",familyCare:"家庭照顧假",personal:"事假",annual:"特別休假",menstrual:"生理假",preManternity:"產檢假",manternityMiscarriage:"產假(含流產假)",accompanyingManternity:"陪產假",marriage:"婚假",funeral:"喪假",compensatory:"補休",statutory:"公假",derelictionOfDuty:"曠職",late:"遲到/忘刷卡(次)",others:"其他",annualRemainings:"剩餘特休(總共)",annualDeadline:"特休到期日",businessTrip:"出差假",annualPreRequest:"預請特休"},tooltip:{export:"匯出",report:"報表"},dialog:{report:"選取報表月份"},input:{report:"月份"}}},D={en:{showResigners:"Show Resigners",search:"Search",employeeID:"ID",dept:"Dept.",name:"Name",username:"English Name",arrivedDate:"Arrived",action:"Action",title:"Employees",create:"Add Employee",annualInfo:"AnnualInfo",download:"Download All Records",year:"Year"},zh:{showResigners:"顯示離職人員",search:"檢索",employeeID:"ID",name:"員工姓名",username:"英文名",dept:"部門單位",arrivedDate:"到職日期",action:"操作",title:"員工列表",create:"新增員工",annualInfo:"特休資訊",download:"下載所有員工請假紀錄",year:"年份"}},E={en:{title:"LOA System",username:"English Name (case-insensitive)",password:"Password",login:"LOGIN",tooltip:"Leave of Absence System",noempty:"No Empty Allowed",notengname:"Not A English Name"},zh:{title:"請假系統",username:"英文名(不需分大小寫)",password:"密碼",login:"登入",tooltip:"Leave of Absence System",noempty:"不可空白",notengname:"這不是英文名"}},F={en:{records:"Records",edit:"Edit",view:"View",delete:"Delete",disable:"Disable",enable:"Enable",close:"Close",deletionConfirm:"Do You Really Want to Delete this one?"},zh:{records:"紀錄",edit:"編輯",view:"檢視",delete:"刪除",disable:"停用",enable:"啟用",close:"關閉",deletionConfirm:"真的要刪除這個人嗎?"}},L={en:{unavailableLTs:"Expired Leave Types",create:"create",update:"info update",textfieldUndone:"There are textfields still not finished."},zh:{unavailableLTs:"已過期的假別",create:"新增",update:"更新資訊",textfieldUndone:"尚有欄位未完成填寫"}},S={en:{search:"Search",showRejects:"Show Rejects",pass:"Pass",reject:"Reject",appliedDate:"Applied",dates:"Date(s)",leaveType:"Kind",remarks:"Remarks",signings:"Sign",totals:"Totals",action:"Action",hours:"Hours",days:"Days",download:"Download"},zh:{search:"檢索",showRejects:"顯示退回",pass:"通過",reject:"退回",appliedDate:"申請日期",dates:"休假日期與時間",leaveType:"假別",remarks:"備註",signings:"簽核",totals:"總計",action:"操作",hours:"時",days:"日",download:"下載"}},I={en:{common:"Commons",report:"Reports",employees:"Employee List",compensatory:"Compensatory List",logout:"Logout",annualReport:"Annual Report",monthlyReport:"Monthly Report",leaveCalendar:"Your Calendar",shiftCalendar:"Shift Calendar",others:"Others"},zh:{common:"常用",report:"報表",employees:"員工列表",compensatory:"補休",logout:"登出",annualReport:"年度報表",monthlyReport:"月度報表",leaveCalendar:"你的月曆",shiftCalendar:"班表月曆",others:"其他"}},R={en:{leaveTypes:{sick:"sick leave",familyCare:"family care leave",personal:"personal leave",annual:"annual leave",annualPreRequest:"pre-request annual leave",menstrual:"menstrual leave",preManternity:"pre-manternity leave",manternityMiscarriage:"manternity/miscarriage leave",accompanyingManternity:"accompanying manternity leave",marriage:"marriage leave",funeral:"funeral leave",businessTrip:"business-trip leave"},common:{dayUnit:" days",hourUnit:" hours"},message:{already_signed_the_record:"You have Signed it Already",wrong_password:"Incorrect Password",wrong_user_name:"Incorrect Name",restored_successfully:"Restored Successfully",token_validation_failed:"Token Validation Failed",password_updated_successfully:"Password Updated Successfully, Please Login with New Password",employee_updated_successfully:"Email Updated Successfully",login_user_is_not_found:"Login User is not Found",shift_updated_successfully:"Shift Updated Successfully",unable_to_update_expired_shift:"Unable to Update Expired Shift",shift_deleted_successfully:"Shift Deleted Successfully",shift_config_updated_successfully:"Shift Config Updated Successfully",all_employees_deleted_successfully:"All Employees Deleted Successfully",no_access_authority:"No Access Authority",employee_is_not_found:"Employee is not Found",employee_created_successfully:"Employee Created Successfully",the_user_name_exists:"The User Name Exists",employee_deleted_successfully:"Employee Deleted Successfully",records_updated_successfully:"Records Updated Successfully",record_signing_updated_successfully:"Record's Signing Updated Successfully",record_is_not_found:"Record is not Found",annual_refresh_successfully:"Annual Refresh Successfully"},title:{systemNotification:"System Info: "}},zh:{leaveTypes:{sick:"普通傷病假",familyCare:"家庭照顧假",personal:"事假",annual:"特別休假",annualPreRequest:"預請特別休假",menstrual:"生理假",preManternity:"產檢假",manternityMiscarriage:"產假(含流產假)",accompanyingManternity:"陪產假",marriage:"婚假",funeral:"喪假",businessTrip:"出差假"},common:{dayUnit:"天",hourUnit:"小時"},message:{already_signed_the_record:"您已經簽核過了",wrong_password:"密碼有錯",wrong_user_name:"名稱有錯",token_validation_failed:"權證驗證失敗",password_updated_successfully:"密碼更新成功, 請重新登入",employee_updated_successfully:"Email 更新成功",restored_successfully:"還原成功",login_user_is_not_found:"找不到此登入者",shift_updated_successfully:"班表更新成功",unable_to_update_expired_shift:"無法更新已過期的班表",shift_deleted_successfully:"班表刪除成功",shift_config_updated_successfully:"班表設定更新成功",all_employees_deleted_successfully:"所有員工刪除成功",no_access_authority:"沒有存取權限",employee_is_not_found:"找不到此員工",employee_created_successfully:"員工建立成功",the_user_name_exists:"名稱已存在",employee_deleted_successfully:"員工刪除成功",records_updated_successfully:"紀錄更新成功",record_signing_updated_successfully:"紀錄簽核更新成功",record_is_not_found:"找不到此紀錄",annual_refresh_successfully:"特別休假重計成功"},title:{systemNotification:"系統通知: "}}},N={en:{label:{sign:"Sign:",signed:"Status:"},tooltip:{pass:"Pass",reject:"Reject"}},zh:{label:{sign:"簽核:",signed:"狀態:"},tooltip:{pass:"通過",reject:"退回"}}},M={en:{tooltip:{pass:"Pass",reject:"Reject",notSignYet:"Not Sign Yet",signingTime:"Signed At: "}},zh:{tooltip:{pass:"通過",reject:"退回",notSignYet:"尚未簽核",signingTime:"簽核時間: "}}},O={en:{title:"Recalculate Leaves Amount:",stringTemplate:{totals:"${0} Days, ",deadline:"before ${0}"}},zh:{title:"假別更新通知:",stringTemplate:{totals:"共 ${0} 天, ",deadline:"於 ${0} 到期"}}},$={en:{pickLeaveType:"Pick a Leave Type, or Check Details:",others:"Others",import:"Import"},zh:{pickLeaveType:"點選假別, 欲檢視假別資訊請至",others:"其他",import:"加入"}},B={en:{stringTemplate:{totals:"${0} Days",consumes:"${0} Used",deadline:"Before ${0}"}},zh:{stringTemplate:{totals:"共計 ${0} 天 ${1} 小時",consumes:"已用 ${0} 天 ${1} 小時",deadline:"於 ${0} 到期"}}},U={en:{btn:{iGotIt:"I Got it"}},zh:{btn:{iGotIt:"我知道了"}}},H={en:{showResigners:"Show Resigners",search:"Search",employeeID:"ID",dept:"Dept.",name:"Name",username:"English Name",arrivedDate:"Arrived",level:"Level",action:"Action",compensatory:"Compensatory",title:"Compensatory",download:"Download",showAllHavingCompensatoryLT:"Show Having Compensatory LT"},zh:{showResigners:"顯示離職人員",employeeID:"ID",name:"員工姓名",username:"英文名",dept:"部門單位",arrivedDate:"到職日期",action:"操作",level:"帳號身分",compensatory:"補休假(已用/總共)",search:"檢索",title:"補休",download:"下載",showAllHavingCompensatoryLT:"顯示所有未/已休完"}},j={en:{showResigners:"Show Resigners",month:"Month",employeeInfo:"Employee Info",monthGroupStat:"Month Stat",leaveTypeGroupStat:"Leave Type Stat",annualStat:"Annual Stat",title:"Annual Report",download:"Download"},zh:{showResigners:"顯示離職人員",month:"月",employeeInfo:"員工資訊",monthGroupStat:"每月統計",leaveTypeGroupStat:"假別統計",annualStat:"特休統計",title:"年度報表",download:"下載"}},P={en:{employeeID:"ID",dept:"Dept.",name:"Name",username:"English Name",arrivedDate:"Arrived",level:"Level",signers:"Signers",email:"Email",noEmpty:"Not Allow Empty",notEmail:"Invalid Email"},zh:{employeeID:"ID",dept:"部門單位",name:"員工姓名",username:"英文名",arrivedDate:"到職日期",level:"帳號身分",signers:"簽核人員",email:"電子郵件",noEmpty:"不可空白",invalidEmail:"不合法的 Email"}},z={en:{reset:"Reset",password:"Password",email:"email",close:"Close",invalidEmail:"Invalid Email"},zh:{reset:"重設",password:"密碼",email:"Email",close:"關閉",invalidEmail:"Email 不合法"}},Y={en:{consumes:"Consumes",totals:"Totals",hoursLeave:"Hours Leave Available",days:"days",hours:"hours",deadline:"deadline",close:"CLOSE",remove:"REMOVE"},zh:{consumes:"已用",totals:"總共",hoursLeave:"接受時數假",days:"天數",hours:"時數",deadline:"到期日",close:"關閉",remove:"移除"}},G={en:{leaveDates:"Leave Dates",from:"From",to:"To",totals:"Totals",remarks:"Remarks",hour:"hours(please take leave with half hour unit)",take:"Take"},zh:{leaveDates:"請假日期",from:"從",to:"到",totals:"總共",remarks:"備註",hour:"小時(請以半小時為單位)",take:"請假"}},W={en:{remarks:"Remarks",remainings:"Remainings",deadline:"Deadline",days:"Days",hours:"Hours"},zh:{remarks:"備註",remainings:"剩餘",deadline:"到期日",days:"天",hours:"小時"}},Z={en:{leaveTypesDetail:"Leave Types Details",title:"",otherInfos:"",leaveTypes:{officialHoliday:{name:"Official Holiday",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},nationalHoliday:{name:"National Holiday",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},annual:{name:"Annual Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},personal:{name:"Personal Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},familyCare:{name:"family care leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},sick:{name:"Sickness Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},menstrual:{name:"Menstrual Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},marriage:{name:"Marriage Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},manternityMiscarriage:{name:"Manternity/Miscarriage Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},preManternity:{name:"pre-manternity leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},accompanyingManternity:{name:"Accompanying Manternity Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},funeral:{name:"Funeral Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},occpationalSick:{name:"Occpational Sickness Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},official:{name:"Official Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},parentalUnpaid:{name:"Parental Unpaid Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},jobSeeking:{name:"Job Seeking Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},businessTrip:{name:"Business-trip Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},annualPreRequest:{name:"Pre-request Annual Leave",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}}}},zh:{leaveTypesDetail:"所有假別詳細說明",title:"適用勞基法人員請假規則簡表(107.8月)",otherInfos:["1、本表係依勞動基準法、勞工請假規則、性別工作平等法及其施行細則編製。","2、婚假以1次給足為原則；喪假，如因禮俗原因，得於百日內申請分次給假。","3、事假、普通傷病假、婚假、喪假期間，除延長假期在1個月以上者外，如遇例假、休假（紀念日），應不計入請假期內。","4、事假(家庭照顧假) 、普通傷病假(生理假)以時為單位；婚假、喪假、陪產假及特別休假以日為單位。"],leaveTypes:{officialHoliday:{name:"例假",granted:"",detailInfo:"勞工每7日中應有2日之休息，其中1日為例假，1日為休息日。",others:{paidInfo:"",reference:"勞動基準法第36條"}},nationalHoliday:{name:"國定假日",granted:"",detailInfo:"內政部所定應放假之紀念日、節日、勞動節及其他中央主管機關指定應放假之日。",others:{paidInfo:"",reference:"勞動基準法第37條"}},annual:{name:"特別休假",granted:["公司(法規)","10天(3天)","11天(7天)","12天(10天)","14天(14天)","15-19天(15天)","20~30天(16~30天)"],detailInfo:["員工在同一事業單位繼續工作滿一定期間者，應給予特別休假","6個月至未滿1年","工作1年以上未滿2年","工作2年以上未滿3年","工作3年以上未滿5年","工作5年以上未滿10年","服務滿10年以上，每年加給1日，加至30日止。"],others:{paidInfo:"工資照給。(不扣全勤)",reference:"勞動基準法第38條"}},personal:{name:"事假",granted:"14日(全年)",detailInfo:["1、因有事故必須親自處理者。","2、須親自辦理請假程序，經核准後始得離開。","3、緊急事故得由同事或家屬親友代辦請假手續。"],others:{paidInfo:"不給工資。(扣全勤) 按日扣除薪資。",reference:"勞工請假規則第7條"}},familyCare:{name:"家庭照顧假",granted:"7日(全年)",detailInfo:"家庭成員預防接種、發生嚴重之疾病或其他重大事故須親自照顧時，得請家庭照顧假，其請假日數併入事假計算。受僱者之配偶未就業者，不適用規定。",others:{paidInfo:"不給工資。(不扣全勤) 按日扣除薪資。",reference:"性別工作平等法第二十條"}},sick:{name:"普通傷病假",granted:"30日(全年)",detailInfo:["因疾病必須治療或休養者。二日以上之病假，應檢具合法醫療機構或醫師證明書。經醫師診斷，罹患癌症（含原位癌）採門診方式治療或懷孕期間需安胎休養者，其治療或休養期間，併入住院傷病假計算。","1、未住院者，1年內合計不得超過30日。","2、住院者，2年內合計不得超過1年。","3、未住院傷病假與住院傷病假2年內合計不得超過1年。","超過上開規定之期限，經以事假或特別休假抵充後仍未痊癒者，得予留職停薪，但以1年為限。"],others:{paidInfo:"1年內未超過30日部分，工資折半發給；超過30日部分，應按日扣除薪資。領有勞工保險普通傷病給付未達工資半數者，由雇主補足之。(扣全勤)",reference:"勞工請假規則第4條"}},menstrual:{name:"生理假",granted:"每月1日",detailInfo:"女性員工因生理日致工作有困難者，每月得請生理假1日，其請假日數併入病假計算。",others:{paidInfo:"全年請假日數未逾3日，不併入病假計算，其餘日數併入病假計算。薪資減半發給。(不扣全勤)",reference:"性別工作平等法第十四條"}},marriage:{name:"婚假",granted:"8日",detailInfo:["1、 結婚事實。","2、 附有喜帖或結婚證書影本。","3、 自登記結婚之日前10日起3個月內請畢，但經雇主同意者，得於1年內請畢。"],others:{paidInfo:"工資照給。(不扣全勤)",reference:"勞工請假規則第2條"}},manternityMiscarriage:{name:"產假(含流產假)",granted:["8星期","4星期","1星期","5日"],detailInfo:[["1、因分娩者。","2、須呈合法醫療機構醫師證明書。","3、分娩假不扣除例假日，應一次請畢，不得保留。"],"妊娠3個月以上流產者，流產假不扣除例假日並應一次請畢。須   附合法醫療機構醫師證明書。","妊娠2個月以上未滿3個月流產者，不扣除例假日並應一次請畢。須   附合法醫療機構醫師證明書。","妊娠未滿2個月流產者，不扣除例假日並應一次請畢。須   附合法醫療機構醫師證明書。"],others:{paidInfo:"女性員工受僱工作在6個月以上者，停止工作期間工資照給，未滿6個月者減半發給。",reference:"性別工作平等法第十五條"}},preManternity:{name:"產檢假",granted:"5日",detailInfo:"妊娠期間產檢者，得以半日為請假為單位。須附合法醫療機構醫師證明書。",others:{paidInfo:"工資照給。(不扣全勤)",reference:"性別工作平等法第十五條"}},accompanyingManternity:{name:"陪產假",granted:"5日",detailInfo:["員工於其配偶分娩時，給予陪產假5日；受僱者應於配偶分娩之當日及其前後合計15日期間內，擇其中之5日請假。","上開解釋，舉例而言，某甲配偶於12月8日分娩，若於實際分娩當日（含）之後始首次請假，則得請假之期間應自分娩當日往後推算至第15日(即至12月22日)擇其中5日請陪產假。其於分娩當日往前推算7日之日(即12月1日)請首日陪產假者，其餘陪產假至遲應於12月15日前請畢。"],others:{paidInfo:"工資照給。(不扣全勤)",reference:"性別工作平等法第十五條"}},funeral:{name:"喪假",granted:["8日","6日","3日","","",""],detailInfo:["父母、養父母、繼父母、配偶喪亡者","祖父母（含外祖父母）、子女、配偶之父母、配偶之養父母或繼父母喪亡者","曾祖父母、兄弟姊妹、配偶之祖父母（含外祖父母）喪亡者","1、喪假得依習俗分次申請。","2、應於死亡之日起百日內請畢為限。","3、須檢附訃聞或死亡證明書及關係文件。"],others:{paidInfo:"工資照給。(不扣全勤)",reference:"勞工請假規則第3條"}},occpationalSick:{name:"公傷病假",granted:"依實際需要給予",detailInfo:"因職業災害而致殘廢、傷害或疾病者，其治療、休養期間，給予公傷病假。",others:{paidInfo:"按工資數額補償。但同一事故依勞工保險條例或其他法令規定，已由公司支付費用補償者，公司得予抵充之。",reference:"勞工請假規則第6條"}},official:{name:"公假",granted:"依實際需要給予",detailInfo:"員工奉派出差、考察、訓練、兵役召集及其他法令規定應給公假等，依實際需要天數給予公假。",others:{paidInfo:"工資照給。(不扣全勤)",reference:"勞工請假規則第8條"}},parentalUnpaid:{name:"育嬰留職停薪假",granted:"二年為限",detailInfo:["受僱者任職滿一年後，於每一子女滿三歲前，得申請育嬰留職停薪。 ","※檢附證明文件，可申請6個月60% 投保薪資。受僱者之配偶未就業者，不適用規定。"],others:{paidInfo:"不給工資。公司免繳勞健退費用，員工可遞延3年",reference:"性別工作平等法第十六條"}},jobSeeking:{name:"謀職假(非自願離職)",granted:"依法定預告期間給假",detailInfo:["1、任職三個月以上一年未滿者，於十日前預告之。","2、任職一年以上三年未滿者，於二十日前預告之。","3、任職三年以上者，於三十日前預告之。"],others:{paidInfo:"於接到預告後，於未逾法定預告日起算之給假總日數內，為另謀工作得於工作時間請假外出，請假時數，每星期不得超過2日，請假期間工資照給。",reference:"勞動基準法第16條"}},businessTrip:{name:"出差假",granted:"",detailInfo:"",others:{paidInfo:"",reference:""}},annualPreRequest:{name:"預請特別休假",granted:"同特別休假",detailInfo:"預請下一年度的特別休假",others:{paidInfo:"同特別休假",reference:"同特別休假"}}}}},q={en:{showResigners:"Show Resigners",employeeInfo:"Employee Info",dateGroupStat:"Date Stat",leaveTypeGroupStat:"Leave Type Stat",day:"Day",title:"Monthly Report",download:"Download"},zh:{showResigners:"顯示離職人員",employeeInfo:"員工資訊",dateGroupStat:"每日統計",leaveTypeGroupStat:"假別統計",day:"日",title:"月度報表",download:"下載"}},V={en:{employeeID:"ID",dept:"Dept",name:"Name",username:"English Name",arrivedDate:"Arrived",level:"Level",email:"Email"},zh:{employeeID:"ID",dept:"部門單位",name:"員工姓名",username:"英文名",arrivedDate:"到職日期",level:"帳號身分",email:"電子郵件"}},K={en:{title:"Your Calendar",showOnlyYours:"Show Only Yours",showOnlyUsername:"Show Only Username",descriptionOfShowOnlyYours:"",descriptionOfShowOnlyUsername:"",descriptionOfCalendarController:"",descriptionOfCalendar1:"",descriptionOfCalendar2:"",dept:"Dept.",allDept:"All Dept."},zh:{title:"你的月曆",showOnlyYours:"只顯示你的假",showOnlyUsername:"只顯示名稱",descriptionOfShowOnlyYours:"若你是主管, 或是需要為他人做簽核, 可以控制它, 月曆會一併把你所負責簽核的請假呈現出來.",descriptionOfShowOnlyUsername:"若你是主管, 或是需要為他人做簽核, 可以將它開啟, 月曆上會把相同員工的假別上相同顏色.",descriptionOfCalendarController:"控制月曆, 左至右分別是: 往前一個月, 顯示目前年/月, 往後一個月, 到目前的年/月",descriptionOfCalendar1:"包含請假, 簽核, 都可以在你的月曆上操作. ",descriptionOfCalendar2:"若要請假, 請點選日期數字, 並在開啟的視窗中填完所需資訊; 若要簽核, 請點選正在閃爍中的請假項目, 並在開啟的視窗對此假通過或拒絕.",dept:"部門",allDept:"所有部門"}},J={en:{unavailableLTs:"Expired Leave Types",save:"Save",cancel:"Cancel",runOutQotaOfLeave:"Run out the Quota in this Leave Type"},zh:{unavailableLTs:"已過期的假別",save:"確定",cancel:"取消",runOutQotaOfLeave:"此假別的請假數已超量"}},Q={en:{applied:"Applied",taken:"Taken",remarks:"Remarks",defaultAgent:"None"},zh:{applied:"申請時間",taken:"請假時間",remarks:"備註",defaultAgent:"無"}},X={en:{title:"Shift Calendar",showOnlyYours:"Show Only Yours",showOnlyUsername:"Show Only Username",dept:"Dept.",allDept:"All Dept.",download:"Download",expired:"Expired",expiredAt:"Expired At",workdaysBeforeCurrentMonthEnds:"{0}th Workdays Before Current Month Ends"},zh:{title:"班表月曆",showOnlyYours:"只顯示你的假",showOnlyUsername:"只顯示名稱",dept:"部門",allDept:"所有部門",download:"下載",expired:"已過期",expiredAt:"到期日",workdaysBeforeCurrentMonthEnds:"月底前第 {0} 個工作天"}},ee={en:{update:"Update Daypart Description"},zh:{update:"更新時間段說明"}},ne={en:{skip:"Skip tour",previous:"Previous",next:"Next",finish:"Finish"},zh:{skip:"略過",previous:"上一步",next:"下一步",finish:"完成"}},te={Report:T.zh,List:D.zh,EmployeeAction:F.zh,Login:E.zh,Detail:L.zh,RecordList:S.zh,NavDrawer:I.zh,shared:R.zh,SigningBlock:N.zh,SigningTooltip:M.zh,LeaveTypeRefreshedNotification:O.zh,SystemNotification:U.zh,CompensatoryList:H.zh,LeaveTypeContainer:$.zh,LeaveTypeTooltip:B.zh,AnnualReport:j.zh,EmployeeProfile:P.zh,EmployeeAccountSettings:z.zh,LeaveTypeEditorDialog:Y.zh,LeaveForm:G.zh,LeaveContainer:W.zh,LeaveTypeInfo:Z.zh,MonthlyReport:q.zh,EmployeeInfo:V.zh,LeaveCalendar:K.zh,LeaveTakingBlock:J.zh,LeaveDetailInfo:Q.zh,Tour:ne.zh,ShiftCalendar:X.zh,ShiftConfig:ee.zh},ae={compensatory:{keyword:"補休"},cookie:{expiredPeriod:{oneYear:"1Y",oneMonth:"1M",oneDay:"1D",oneWeek:7,oneHour:"1h"}},shiftDaypart:{"早":{color:"amber lighten-3"},"中":{color:"blue-grey lighten-1"},"日":{color:"teal lighten-3"}},shiftEmployee:{rock:{color:"cyan lighten-3"},olivia:{color:"blue lighten-3"},vivian:{color:"purple lighten-3"}},deptOptions:["行政部(A)","管理部(A)","客服部(C)","資訊部(I)","技術支援(S)","業務部(B)"],deptsThatSameDeptEmployeeHavingSameReadAccess:["客服部(C)"],shiftDepts:["客服部(C)"],levelOptions:["admin","manager","normal"],customLeaveType:{index:0,enabled:!1,default:!1,icon:"event",class:["teal","lighten-3","white--text"],color:"#80CBC4",name:"",title:"",consumes:{days:0,hours:0},totals:{days:1,hours:0},deadline:(new Date).toISOString().substr(0,10),dialog:!1,datepicker:!1,countdown:!0,halfHoursEnabled:!0},leaveTypes:[{index:0,enabled:!0,icon:"hotel",class:["amber","lighten-3","white--text"],color:"#FFE082",name:"sick",title:te.shared.leaveTypes.sick,consumes:{days:0,hours:0},totals:{days:30,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!1,halfHoursEnabled:!0,default:!0},{index:1,enabled:!1,icon:"local_hospital",class:["deep-orange","lighten-3","white--text"],color:"#FFAB91",name:"familyCare",title:te.shared.leaveTypes.familyCare+"("+te.shared.leaveTypes.personal+")",consumes:{days:0,hours:0},totals:{days:7,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!1,halfHoursEnabled:!1,default:!0},{index:2,enabled:!0,icon:"announcement",class:["deep-orange","lighten-3","white--text"],color:"#FFAB91",name:"personal",title:te.shared.leaveTypes.personal,consumes:{days:0,hours:0},totals:{days:14,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!1,halfHoursEnabled:!0,default:!0},{index:3,enabled:!0,icon:"local_airport",class:["light-blue","lighten-2","white--text"],color:"#4FC3F7",name:"annual",title:te.shared.leaveTypes.annual,consumes:{days:0,hours:0},totals:{days:0,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!0,halfHoursEnabled:!1,default:!0},{index:4,enabled:!1,icon:"favorite",class:["pink","lighten-3","white--text"],color:"#F48FB1",name:"menstrual",title:te.shared.leaveTypes.menstrual,consumes:{days:0,hours:0},totals:{days:1,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!1,halfHoursEnabled:!1,default:!0},{index:5,enabled:!1,icon:"pregnant_woman",class:["pink","lighten-3","white--text"],color:"#F48FB1",name:"preManternity",title:te.shared.leaveTypes.preManternity,consumes:{days:0,hours:0},totals:{days:5,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!0,halfHoursEnabled:!0,default:!0},{index:6,enabled:!1,icon:"airline_seat_flat_angled",class:["pink","lighten-3","white--text"],color:"#F48FB1",name:"manternityMiscarriage",title:te.shared.leaveTypes.manternityMiscarriage,consumes:{days:0,hours:0},totals:{days:5,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!0,halfHoursEnabled:!1,default:!0},{index:7,enabled:!1,icon:"people_outline",class:["pink","lighten-3","white--text"],color:"#F48FB1",name:"accompanyingManternity",title:te.shared.leaveTypes.accompanyingManternity,consumes:{days:0,hours:0},totals:{days:5,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!0,halfHoursEnabled:!1,default:!0},{index:8,enabled:!1,icon:"wc",class:["red","lighten-2","white--text"],color:"#E57373",name:"marriage",title:te.shared.leaveTypes.marriage,consumes:{days:0,hours:0},totals:{days:8,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!0,halfHoursEnabled:!1,default:!0},{index:9,enabled:!1,icon:"hourglass_empty",class:["blue-grey","lighten-3","white--text"],color:"#B0BEC5",name:"funeral",title:te.shared.leaveTypes.funeral,consumes:{days:0,hours:0},totals:{days:3,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!0,halfHoursEnabled:!1,default:!0},{index:10,enabled:!1,icon:"directions_run",class:["purple","lighten-3","white--text"],color:"#CE93D8",name:"businessTrip",title:te.shared.leaveTypes.businessTrip,consumes:{days:0,hours:0},totals:{days:20,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!1,halfHoursEnabled:!0,default:!0},{index:11,enabled:!0,icon:"local_airport",class:["light-blue","lighten-4","white--text"],color:"#B3E5FC",name:"annualPreRequest",title:te.shared.leaveTypes.annualPreRequest,consumes:{days:0,hours:0},totals:{days:10,hours:0},deadline:"",dialog:!1,datepicker:!1,countdown:!0,halfHoursEnabled:!1,default:!0}]},oe={logout:function(e,n){e.delete("loginuser"),e.delete("token"),n.push({name:"Login"})},formatDate:function(e){if(e){var n="now"===e?new Date:new Date(e),t=n.getFullYear().toString(),a=(n.getMonth()+1).toString(),o=n.getDate().toString();return a.length<2&&(a="0"+a),o.length<2&&(o="0"+o),[t,a,o].join("-")}return""},exportExcel:function(e){window.open("data:application/vnd.ms-excel,"+encodeURIComponent('<meta http-equiv="content-type" content="application/vnd.ms-excel; charset=UTF-8" /><title>Excel</title>'+e))},checkIsHalfHourUnit:function(e,n){if(e&&n){var t=60*parseInt(e.substr(0,2))+parseInt(e.substr(3,2)),a=60*parseInt(n.substr(0,2))+parseInt(n.substr(3,2));return a>t&&(a-t)%30==0}return!(!e&&!n)},calculateTotalHours:function(e,n){if(e&&n){var t=60*parseInt(e.substr(0,2))+parseInt(e.substr(3,2)),a=60*parseInt(n.substr(0,2))+parseInt(n.substr(3,2));if(a>t){var o=(a-t)/60,s=10*o%10;return s>5?Math.ceil(o):0===s?Math.floor(o):Math.floor(o)+.5}return-1}return 0},generateSummary:function(e,n,t){return(e=e.map(function(e){return oe.formatDate(e)})).length>1?e.join(", "):n&&t?e[0]+" - "+n+" ~ "+t:e[0]},generateConsumeSummary:function(e,n,t){return e=e.map(function(e){return oe.formatDate(e)}),n&&t?oe.calculateTotalHours(n,t)+" "+te.RecordList.hours:e.length+" "+te.RecordList.days},lookUpCustomMessage:function(e){var n=e.replace?te.shared.message[e.replace(/\s+/g,"_")]:"";return n||e},lookUpLeaveTypeIconNClass:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var n=ae.leaveTypes.find(function(n){return n.name===e});return{icon:n?n.icon:ae.customLeaveType.icon,class:n?n.class:ae.customLeaveType.class}},lookUpLeaveType:function(e){var n=ae.leaveTypes.find(function(n){return n.name===e});return n||ae.customLeaveType},stringFormat:function(e){for(var n=arguments.length,t=Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];return t.forEach(function(n,t){var a=new RegExp("\\$\\{"+t+"\\}");e=e.replace(a,n)}),e},isLeaveTypeInfoGeneral:function(e){return ae.leaveTypes.filter(function(e){return e.countdown}).some(function(n){return n.name===e})},getLocaleleaveTypeNames:function(e){return te.shared.leaveTypes[e]?te.shared.leaveTypes[e]:e},getCompensatoryLeaveTypes:function(e){return e.filter(function(e){return e.enabled&&e.name.startsWith(ae.compensatory.keyword)})},getCompensatoryRecords:function(e){return e.filter(function(e){return e.signings.every(function(e){return!!e.pass})&&e.leaveType.startsWith(ae.compensatory.keyword)})},sumUpTotals:function(e){var n={days:0,hours:0};return e.forEach(function(e){var t=e.days,a=e.halfHours;a>0?(n.hours+=a/2,n.hours>=8&&(n.days+=Math.floor(n.hours/8),n.hours=n.hours%8)):n.days+=t}),n},getUnusedOutLeaveTypes:function(e,n){return e.filter(function(e){return(e.totals.days!==e.consumes.days||e.totals.halfHours!==e.consumes.halfHours)&&(e.totals.days>0||e.totals.halfHours>0)}).map(function(e){return{leaveType:e.name,daysNHours:{days:e.consumes.days,hours:e.consumes.halfHours/2,totalDays:e.totals.days,totalHours:e.totals.halfHours/2}}})}},se={name:"SigningTooltip",props:{signer:{type:Object},signings:{type:Array,default:function(){return[]}}},mounted:function(){},data:function(){return{}},computed:{signingOfTheSigner:function(){var e=this,n=this.signings.filter(function(n){return n.username===e.signer.username}).sort(function(e){return e.pass?1:-1});return n.length>0?n[0]:void 0}},methods:{signLeave:function(e,n,t){this.$emit("sign",e,n,t)}}},le=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("span",[e._v(e._s(e.signer.name)+"("+e._s(e.signer.username)+")")]),e._v(" "),e.signingOfTheSigner&&void 0!==e.signingOfTheSigner.pass?e.signingOfTheSigner.pass?t("span",[e._v("\n    "+e._s(e.loalocale.self.tooltip.pass)+"\n    "),t("v-icon",{attrs:{color:"green"}},[e._v("thumb_up")])],1):t("span",[e._v("\n    "+e._s(e.loalocale.self.tooltip.reject)+"\n    "),t("v-icon",{attrs:{color:"red"}},[e._v("pan_tool")])],1):t("span",[e._v("\n    "+e._s(e.loalocale.self.tooltip.notSignYet)+"\n    "),t("v-icon",{attrs:{color:"blue"}},[e._v("help")])],1),e._v(" "),t("div",[e._v("\n    "+e._s(e.loalocale.self.tooltip.signingTime)+"\n    "),e.signingOfTheSigner?t("span",[e._v(e._s(new Date(e.signingOfTheSigner.signedDate).toLocaleString()))]):t("span",[e._v("-")])])])};le._withStripped=!0;var re={render:le,staticRenderFns:[]},ie=re;var ce=!1;var ue=t("VU/8")(se,ie,!1,function(e){ce||t("HxDL")},null,null);ue.options.__file="src\\components\\SigningTooltip.vue",ue.esModule&&Object.keys(ue.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var de=ue.exports,pe={name:"SigningBlock",components:{"signing-tooltip":de},props:{small:{type:Boolean,default:!1},employee:{type:Object},record:{type:Object}},data:function(){return{}},computed:{needToSign:function(){var e=this;return!this.record.pass&&!this.sameAsCurrentUser&&this.record.signers.some(function(n){return n.username===e.loginuser.username})},sameAsCurrentUser:function(){return this.loginuser.username.toLocaleLowerCase()===this.employee.username.toLocaleLowerCase()}},mounted:function(){},methods:{signLeave:function(e,n,t){this.$emit("sign",e,n,t)},distinctSignings:function(e){var n=[];return e.forEach(function(e){n.some(function(n){return n.username===e.username})||n.push(e)}),n},generateSummary:oe.generateSummary}},me=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-list-tile",[e.small?e._e():t("v-list-tile-avatar",[t("v-icon",{class:e.record.class,attrs:{riple:""}},[e._v(e._s(e.record.icon))])],1),e._v(" "),e.small?e._e():t("v-list-tile-content",[t("v-list-tile-title",[e._v(e._s(e.loalocale.shared.leaveTypes[e.record.leaveType]?e.loalocale.shared.leaveTypes[e.record.leaveType]:e.record.leaveType))]),e._v(" "),t("v-list-tile-sub-title",[e._v(e._s(e.generateSummary(e.record.dates,e.record.startFrom,e.record.endTo)))])],1),e._v(" "),e.needToSign?t("v-list-tile-action",[t("small",[e._v(e._s(e.loalocale.self.label.sign))])]):e._e(),e._v(" "),e.needToSign?t("v-list-tile-action",{staticClass:"sign-btn"},[t("v-tooltip",{attrs:{top:""}},[t("v-btn",{attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(n){return e.signLeave(e.employee._id,e.record._id,!0)}},slot:"activator"},[t("v-icon",{attrs:{color:"green"}},[e._v("thumb_up")])],1),e._v(" "),t("div",[e._v(e._s(e.loalocale.self.tooltip.pass))])],1)],1):e._e(),e._v(" "),e.needToSign?t("v-list-tile-action",{staticClass:"sign-btn"},[t("v-tooltip",{attrs:{top:""}},[t("v-btn",{attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(n){return e.signLeave(e.employee._id,e.record._id,!1)}},slot:"activator"},[t("v-icon",{attrs:{color:"red"}},[e._v("pan_tool")])],1),e._v(" "),t("div",[e._v(e._s(e.loalocale.self.tooltip.reject))])],1)],1):e._e(),e._v(" "),t("v-list-tile-action",[t("small",[e._v(e._s(e.loalocale.self.label.signed))])]),e._v(" "),t("v-list-tile-action",[t("v-tooltip",{attrs:{bottom:""}},[t("v-rating",{attrs:{slot:"activator",readonly:"",value:e.distinctSignings(e.record.signings).length,length:e.record.signers.length,"empty-icon":"check_box_outline_blank","full-icon":"check_box"},slot:"activator"}),e._v(" "),e._l(e.record.signers,function(n){return t("signing-tooltip",{key:n._id,attrs:{signer:n,signings:e.record.signings}})})],2)],1)],1)};me._withStripped=!0;var ve={render:me,staticRenderFns:[]},fe=ve;var ye=!1;var he=t("VU/8")(pe,fe,!1,function(e){ye||t("2UIF")},null,null);he.options.__file="src\\components\\SigningBlock.vue",he.esModule&&Object.keys(he.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var ge=he.exports,_e={name:"SystemNotification",props:{value:{type:Object}},created:function(){},computed:{iconType:function(){return{info:"info",success:"verified_user",warning:"warning",error:"error_outline"}[this.level]}},data:function(){return{snackbar:!1}},methods:{close:function(e){this.value.handler&&this.value.handler(this.$router,this.$cookie),this.$emit("close",e)}}},be=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-snackbar",{attrs:{color:e.value.level,"multi-line":"",vertical:"",right:"",top:"",timeout:0,"auto-height":""},model:{value:e.value.visible,callback:function(n){e.$set(e.value,"visible",n)},expression:"value.visible"}},[t("div",[t("h1",{staticStyle:{"font-size":"25px"}},[t("v-icon",{attrs:{large:""}},[e._v(e._s(e.iconType))]),e._v("\n      "+e._s(e.value.title?e.value.title:e.loalocale.shared.title.systemNotification)+"\n    ")],1),e._v(" "),e._t("default")],2),e._v(" "),t("v-btn",{attrs:{flat:""},on:{click:function(n){return e.close(e.value.keyword)}}},[e._v(e._s(e.loalocale.self.btn.iGotIt))])],1)};be._withStripped=!0;var xe={render:be,staticRenderFns:[]},Ae=xe;var we=!1;var ke=t("VU/8")(_e,Ae,!1,function(e){we||t("gj+S")},"data-v-23da37d2",null);ke.options.__file="src\\components\\SystemNotification.vue",ke.esModule&&Object.keys(ke.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Ce=ke.exports,Te={name:"LeaveTypeRefreshedNotification",components:{"system-notification":Ce},props:{leaveTypes:{type:Array,default:function(){return[]}},fullControl:{type:Boolean,default:!1},value:{type:Boolean,default:!1}},created:function(){},computed:{infos:function(){var e=this;return this.leaveTypes.map(function(n,t){return{index:t,name:n.name,localeName:e.loalocale.shared.leaveTypes[n.name],deadline:oe.formatDate(n.deadline),totals:n.totals.days,iconNClass:oe.lookUpLeaveTypeIconNClass(n.name)}})},systemNotification:function(){return{level:"info",title:this.loalocale.self.title,visible:this.value}}},data:function(){return{}},methods:{close:function(){this.$emit("close")},stringFormat:oe.stringFormat,isLeaveTypeInfoGeneral:oe.isLeaveTypeInfoGeneral}},De=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("system-notification",{on:{close:e.close},model:{value:e.systemNotification,callback:function(n){e.systemNotification=n},expression:"systemNotification"}},[t("tbody",e._l(e.infos,function(n){return t("tr",{key:n.name},[t("td",[t("v-icon",{class:[n.iconNClass.class,"circle-icon"]},[e._v(e._s(n.iconNClass.icon))])],1),e._v(" "),t("td",{staticClass:"min-width-100"},[e._v(e._s(n.localeName))]),e._v(" "),t("td",[e.fullControl||e.isLeaveTypeInfoGeneral(n.name)?t("span",[e._v(e._s(e.stringFormat(e.loalocale.self.stringTemplate.totals,n.totals)))]):e._e()]),e._v(" "),t("td",[e._v(e._s(e.stringFormat(e.loalocale.self.stringTemplate.deadline,n.deadline)))])])}),0)])};De._withStripped=!0;var Ee={render:De,staticRenderFns:[]},Fe=Ee;var Le=!1;var Se=t("VU/8")(Te,Fe,!1,function(e){Le||t("SwzS")},"data-v-4e577acc",null);Se.options.__file="src\\components\\LeaveTypeRefreshedNotification.vue",Se.esModule&&Object.keys(Se.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Ie=Se.exports,Re={name:"EmployeeInfo",props:{small:{type:Boolean,default:!1},icon:{type:Boolean,default:!1},email:{type:Boolean,default:!1},profile:{type:Object,default:function(){return{dept:"Dept",level:"Level",employeeID:"ID000",name:"My Name",username:"My Username",arrivedDate:"now",email:"sample@email.com"}}}},data:function(){return{}},methods:{formatDate:oe.formatDate}},Ne=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-tooltip",{attrs:{bottom:""}},[t("div",{attrs:{slot:"activator"},slot:"activator"},[t("div",[e.icon?t("v-icon",[e._v("group")]):e._e(),e._v("\n      "+e._s(e.profile.dept)+"\n      "),e.icon?t("v-icon",[e._v("security")]):e._e(),e._v("\n      "+e._s(e.profile.level)+"\n    ")],1),e._v(" "),e.small?e._e():t("div",[e.icon?t("v-icon",[e._v("star")]):e._e(),e._v("\n      "+e._s(e.profile.employeeID)+"\n    ")],1),e._v(" "),t("div",[e.icon?t("v-icon",[e._v("person")]):e._e(),e._v("\n      "+e._s(e.profile.name)+" ("+e._s(e.profile.username)+")\n    ")],1),e._v(" "),t("div",[e.icon?t("v-icon",[e._v("event")]):e._e(),e._v("\n      "+e._s(e.formatDate(e.profile.arrivedDate))+"\n    ")],1),e._v(" "),!e.small&&e.email?t("div",[e.icon?t("v-icon",[e._v("email")]):e._e(),e._v("\n      "+e._s(e.profile.email)+"\n    ")],1):e._e()]),e._v(" "),t("div",[t("div",[e._v("\n      "+e._s(e.loalocale.self.dept)+":\n      "+e._s(e.profile.dept)+"\n      "+e._s(e.loalocale.self.level)+":\n      "+e._s(e.profile.level)+"\n    ")]),e._v(" "),e.small?e._e():t("div",[e._v("\n      "+e._s(e.loalocale.self.employeeID)+":\n      "+e._s(e.profile.employeeID)+"\n    ")]),e._v(" "),t("div",[e._v("\n      "+e._s(e.loalocale.self.name)+" ("+e._s(e.loalocale.self.username)+"):\n      "+e._s(e.profile.name)+" ("+e._s(e.profile.username)+")\n    ")]),e._v(" "),t("div",[e._v("\n      "+e._s(e.loalocale.self.arrivedDate)+":\n      "+e._s(e.formatDate(e.profile.arrivedDate))+"\n    ")]),e._v(" "),!e.small&&e.email?t("div",[e._v("\n      "+e._s(e.loalocale.self.email)+":\n      "+e._s(e.profile.email)+"\n    ")]):e._e()])])};Ne._withStripped=!0;var Me={render:Ne,staticRenderFns:[]},Oe=Me;var $e=!1;var Be=t("VU/8")(Re,Oe,!1,function(e){$e||t("81gh")},null,null);Be.options.__file="src\\components\\EmployeeInfo.vue",Be.esModule&&Object.keys(Be.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Ue,He=Be.exports,je=t("Dd8w"),Pe=t.n(je),ze={API_URL:"/static/api/",dev:!0},Ye=(Ue=g()(v.a.mark(function e(n){var t,a,o;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new URL(ze.API_URL+n,location.origin)).pathname.endsWith(".json")||(t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,t.pathname.length-1)),t.pathname+=".json"),e.next=4,fetch(t.href);case 4:return a=e.sent,e.next=7,a.json();case 7:return o=e.sent,e.abrupt("return",{data:Pe()({success:!0},o,{message:"",logs:""})});case 9:case"end":return e.stop()}},e,this)})),function(e){return Ue.apply(this,arguments)}),Ge=function(){return{get:function(e){return Ye(e)},post:function(e){return Ye(e)},patch:function(e){return Ye(e)},put:function(e){return Ye(e)},delete:function(e){return Ye(e)}}},We=function(e){var n="annual/report/"+e.year+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},Ze=function(e){var n="monthly/report/"+e.year+"/"+e.month+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},qe=function(e){var n="monthly/"+(e.sdehsra?"sdehsra/":"")+e.year+"/"+e.month+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},Ve=function(e){return Ge().post("auth",e)},Ke=function(e){var n="employees/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},Je=function(e){var n="employees/lightweight/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},Qe=function(e){var n="employee/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().post(n,e)},Xe=function(e){var n="employee/"+e.id+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().put(n,e)},en=function(e){var n="employee/loa/"+e.id+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().put(n,e)},nn=function(e){var n="employee/pwd/"+e.id+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().put(n,e)},tn=function(e){var n="employee/email/"+e.id+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().put(n,e)},an=function(e){var n="employee/sign/"+e.id+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().put(n,e)},on=function(e){var n="employee/"+e.id+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},sn=function(e){var n="employee/"+e.id+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().delete(n)},ln=function(e){var n="toggle/"+e.id+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().put(n)},rn=function(e){var n="employees/compensatory/"+e.year+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},cn=function(e){var n="db/restore/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},un=function(e){var n="db/check/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},dn=function(e){var n="shift/"+e.year+"/"+e.month+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},pn=function(e){var n="shift/"+(e.shiftId?"delete":"new")+"/"+e.id+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().post(n,e)},mn=function(e){var n="shift/config/"+e.type+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},vn=function(e){var n="holiday/"+e.year+"/"+e.month+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().get(n)},fn=function(e){var n="shift/config/"+e.type+"/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().put(n,e)},yn=function(e){var n="annualinfo/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(ze.API_URL+"/"+n),Ge().patch(n,e)},hn={exportReport:function(e){var n=void 0;return"annual"===e.period?n=ze.API_URL+"/"+e.period+"/export/report/"+e.year+"/"+e.loginuser+"/"+encodeURIComponent(e.token):"monthly"===e.period&&(n=ze.API_URL+"/"+e.period+"/export/report/"+e.year+"/"+e.month+"/"+e.loginuser+"/"+encodeURIComponent(e.token)),gn(n),n},exportShift:function(e){var n;return gn(n=ze.API_URL+"/shift/export/"+e.year+"/"+e.month+"/"+e.loginuser+"/"+encodeURIComponent(e.token)),n},exportEmployee:function(e){var n;return gn(n=ze.API_URL+"/employee/export/"+e.year+"/"+e.username+"/"+e.loginuser+"/"+encodeURIComponent(e.token)),n},exportCompensatory:function(e){var n;return gn(n=ze.API_URL+"/compensatory/export/"+e.year+"/"+e.loginuser+"/"+encodeURIComponent(e.token)),n},dbbackup:function(e){var n=ze.API_URL+"/db/backup/"+e.loginuser+"/"+encodeURIComponent(e.token);return gn(n),n}};function gn(e){ze.dev&&console.log(e)}var _n={name:"EmployeeAccountSettings",props:{account:{type:Object,default:function(){return{email:"",password:"",id:""}}},addingNew:{type:Boolean,default:!1}},data:function(){return{dialog:{password:!1,email:!1},showPWD:!1}},methods:{resetEmail:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,tn({loginuser:e.loginuser.username,token:e.loginuser.token,id:e.account.id,email:e.account.email});case 2:t=n.sent,a=t.data,o=a.success,s=a.message,e.$emit("reset:email",o,s);case 7:case"end":return n.stop()}},n,e)}))()},resetPWD:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,nn({loginuser:e.loginuser.username,token:e.loginuser.token,id:e.account.id,password:e.account.password});case 2:t=n.sent,a=t.data,o=a.success,s=a.message,e.$emit("reset:password",o,s);case 7:case"end":return n.stop()}},n,e)}))()}}},bn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs2:""}},[t("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.dialog.password,callback:function(n){e.$set(e.dialog,"password",n)},expression:"dialog.password"}},[t("v-tooltip",{attrs:{slot:"activator",bottom:""},slot:"activator"},[t("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},slot:"activator"},[t("v-icon",[e._v("lock")])],1),e._v("\n        "+e._s(e.loalocale.self.reset)+" "+e._s(e.loalocale.self.password)+"\n      ")],1),e._v(" "),t("v-card",[t("v-card-title",{staticClass:"theme"},[t("span",{staticClass:"headline"},[e._v(e._s(e.loalocale.self.reset)+" "+e._s(e.loalocale.self.password))])]),e._v(" "),t("v-card-text",[t("v-text-field",{attrs:{"append-icon":e.showPWD?"visibility_off":"visibility","prepend-icon":"lock",name:"password",label:e.loalocale.self.password,type:e.showPWD?"text":"password"},on:{"click:append":function(n){e.showPWD=!e.showPWD}},model:{value:e.account.password,callback:function(n){e.$set(e.account,"password",n)},expression:"account.password"}})],1),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{flat:""},on:{click:function(n){e.dialog.password=!1}}},[e._v(e._s(e.loalocale.self.close))]),e._v(" "),t("v-btn",{staticClass:"theme",attrs:{flat:""},on:{click:e.resetPWD}},[e._v(e._s(e.loalocale.self.reset))])],1)],1)],1)],1),e._v(" "),t("v-flex",{attrs:{xs2:""}},[t("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.dialog.email,callback:function(n){e.$set(e.dialog,"email",n)},expression:"dialog.email"}},[t("v-tooltip",{attrs:{slot:"activator",bottom:""},slot:"activator"},[t("v-btn",{attrs:{slot:"activator",icon:"",color:"primary"},slot:"activator"},[t("v-icon",[e._v("email")])],1),e._v("\n        "+e._s(e.loalocale.self.reset)+" "+e._s(e.loalocale.self.email)+"\n      ")],1),e._v(" "),t("v-card",[t("v-card-title",{staticClass:"theme"},[t("span",{staticClass:"headline"},[e._v(e._s(e.loalocale.self.reset)+" "+e._s(e.loalocale.self.email))])]),e._v(" "),t("v-card-text",[t("v-text-field",{attrs:{"prepend-icon":"email",type:"email",label:"Email",rules:[function(n){return!n||/.+@.+/.test(n)||e.loalocale.self.invalidEmail}]},model:{value:e.account.email,callback:function(n){e.$set(e.account,"email",n)},expression:"account.email"}})],1),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{flat:""},on:{click:function(n){e.dialog.email=!1}}},[e._v(e._s(e.loalocale.self.close))]),e._v(" "),t("v-btn",{staticClass:"theme",attrs:{flat:""},on:{click:e.resetEmail}},[e._v(e._s(e.loalocale.self.reset))])],1)],1)],1)],1)],1)};bn._withStripped=!0;var xn={render:bn,staticRenderFns:[]},An=xn;var wn=!1;var kn=t("VU/8")(_n,An,!1,function(e){wn||t("mYdd")},null,null);kn.options.__file="src\\components\\EmployeeAccountSettings.vue",kn.esModule&&Object.keys(kn.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Cn=kn.exports,Tn={name:"DatabaseManagement",props:{},data:function(){return{dialog:!1,content:""}},mounted:function(){this.check()},methods:{backup:function(){var e=hn.dbbackup({loginuser:this.loginuser.username,token:this.loginuser.token}),n=document.createElement("iframe");n.style="display:none",document.body.appendChild(n),n.src=e},restore:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,cn({loginuser:e.loginuser.username,token:e.loginuser.token});case 2:t=n.sent,a=t.data,o=a.success,s=a.message,e.$emit("dbrestore",o,s);case 7:case"end":return n.stop()}},n,e)}))()},check:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s,l;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,un({loginuser:e.loginuser.username,token:e.loginuser.token});case 2:t=n.sent,a=t.data,o=a.success,s=a.message,l=a.content,e.content=l,e.$emit("dbcheck",o,s,l);case 9:case"end":return n.stop()}},n,e)}))()}},watch:{dialog:function(e){e&&this.check()}}},Dn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-dialog",{attrs:{"max-width":"350",persistent:""},model:{value:e.dialog,callback:function(n){e.dialog=n},expression:"dialog"}},[t("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[t("v-icon",{attrs:{color:"warning"}},[e._v("storage")])],1),e._v(" "),t("v-card",[t("v-card-title",{staticClass:"theme"},[t("span",{staticClass:"headline"},[e._v("資料庫管理")])]),e._v(" "),t("v-card-text",[e._v("上次備份: "+e._s(e.content))]),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{flat:""},on:{click:function(n){e.dialog=!1}}},[e._v("關閉")]),e._v(" "),t("v-btn",{staticClass:"theme",attrs:{flat:""},on:{click:e.backup}},[e._v("備份")]),e._v(" "),t("v-btn",{staticClass:"theme",attrs:{flat:""},on:{click:e.restore}},[e._v("還原")])],1)],1)],1)};Dn._withStripped=!0;var En={render:Dn,staticRenderFns:[]},Fn=En;var Ln=!1;var Sn=t("VU/8")(Tn,Fn,!1,function(e){Ln||t("fvQ2")},null,null);Sn.options.__file="src\\components\\DatabaseManagement.vue",Sn.esModule&&Object.keys(Sn.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var In=Sn.exports,Rn={basicHeaders:[{text:te.List.employeeID,value:"employeeID",sortable:!1},{text:te.List.name,value:"name",sortable:!1},{text:te.List.username,value:"username",sortable:!1}],leaveTypeHeaders:[{text:te.Report.th.annual,value:"annual",sortable:!1},{text:te.Report.th.compensatory,value:"compensatory",sortable:!1},{text:te.Report.th.statutory,value:"statutory",sortable:!1},{text:te.Report.th.marriage,value:"marriage",sortable:!1},{text:te.Report.th.funeral,value:"funeral",sortable:!1},{text:te.Report.th.menstrual,value:"menstrual",sortable:!1},{text:te.Report.th.sick,value:"sick",sortable:!1},{text:te.Report.th.personal,value:"personal",sortable:!1},{text:te.Report.th.derelictionOfDuty,value:"derelictionOfDuty",sortable:!1},{text:te.Report.th.late,value:"late",sortable:!1},{text:te.Report.th.familyCare,value:"familyCare",sortable:!1},{text:te.Report.th.preManternity,value:"preManternity",sortable:!1},{text:te.Report.th.manternityMiscarriage,value:"manternityMiscarriage",sortable:!1},{text:te.Report.th.accompanyingManternity,value:"accompanyingManternity",sortable:!1},{text:te.Report.th.businessTrip,value:"businessTrip",sortable:!1},{text:te.Report.th.others,value:"others",sortable:!1}],annualInfoHeaders:[{text:te.Report.th.annualRemainings,value:"annualInfo",sortable:!1},{text:te.Report.th.annualDeadline,value:"annualInfo",sortable:!1}],generateColumns:function(e,n){if("day"===e){var t=n,a=new Date((new Date).getFullYear(),t,0).getDate();return Array.apply(null,{length:a}).map(function(e,n){return n+1}).map(function(e){return{text:t+" "+te.Report.th.months+" "+e+" "+te.Report.th.days,value:"day"+e,sortable:!1}})}if("month"===e){var o=n;return[1,2,3,4,5,6,7,8,9,10,11,12].map(function(e){return{text:o+" "+te.Report.th.years+" "+e+" "+te.Report.th.months,value:"month"+e,sortable:!1}})}return[]},parseDateString:function(e){return e?{year:parseInt(e.substr(0,4)),month:parseInt(e.substr(5,2)),day:parseInt(e.substr(8,2)),date:new Date(e)}:void 0},leaveTypes:["annual","compensatory","marriage","funeral","menstrual","sick","personal","familyCare","preManternity","manternityMiscarriage","accompanyingManternity","businessTrip","others"],createObjectByKeys:function(e,n){var t={};return e.forEach(function(e){t[e]=n}),t},sumUpDaysNHours:function(e,n,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o={days:e,hours:n};return t>0?(o.hours+=t/2,o.hours>=8&&(o.days=Math.floor(o.hours/8),o.hours=o.hours%8)):o.days+=a,o},sumTotalDaysNHours:function(e,n,t,a){var o={days:e,hours:n};return o.days+=t,o.hours+=a,o.hours>=8&&(o.days=Math.floor(o.hours/8),o.hours=o.hours%8),o},checkingSigned:function(e){var n=e.signers.every(function(n){return e.signings.some(function(e){return e.id===n.id})});return e.signings.length>0?e.signings.every(function(e){return e.pass})&&n:n},generateleaveTypeSummary:function(e){var n=e.days,t=e.hours,a=e.totalDays,o=e.totalHours;return a||o?n+te.shared.common.dayUnit+(t&&t>0?" "+t+te.shared.common.hourUnit:"")+"/"+a+te.shared.common.dayUnit+(o?" "+o+te.shared.common.hourUnit:""):(n?n+te.shared.common.days:"")+(t&&t>0?t+te.shared.common.hourUnit:"")},generateSummary:function(e){var n=e.leaveType,t=e.days,a=e.hours;return(te.Report.th[n]?te.Report.th[n]:n)+" "+(t>0?t+" "+te.Report.th.days:"")+(a>0?a+" "+te.Report.th.hours:"")},generateleaveTypeClass:function(e){var n=ae.leaveTypes.find(function(n){return n.name===e});return n?n.class:ae.customLeaveType.class},getRecordsWithinThisYear:function(e,n){var t=[];return e.forEach(function(e){e.dates.map(Rn.parseDateString).some(function(e){return e&&e.year===n})&&t.push(e)}),t},groupRecordsByMonth:function(e){var n=Array.apply(null,{length:12}).map(function(e,n){return[]});return e.forEach(function(e){e.dates.map(Rn.parseDateString).forEach(function(t){n[t.month-1].find(function(n){return n._id===e._id})||n[t.month-1].push(e)})}),n},groupRecordsByLeaveType:function(e){var n=[];return e.forEach(function(e){var t=n.find(function(n){return n.key===e.leaveType});t?t.list.push(e):n.push({key:e.leaveType,list:[e]})}),n},calculateTotals:function(e){return Rn.sumUpTotals(e.map(function(e){return e.totals}))},sumUpTotals:function(e){var n={days:0,hours:0};return e.forEach(function(e){var t=e.days,a=e.halfHours;a>0?(n.hours+=a/2,n.hours>=8&&(n.days+=Math.floor(n.hours/8),n.hours=n.hours%8)):n.days+=t}),n}},Nn={name:"AnnualInfoManagement",props:{},data:function(){return{dialog:!1,employees:[]}},computed:{allSelected:function(){return this.employees.every(function(e){return e.selected})}},mounted:function(){this.getEmployees()},methods:{toggleSelectAll:function(){var e=!this.allSelected;this.employees.forEach(function(n){n.selected=e})},update:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,yn({loginuser:e.loginuser.username,token:e.loginuser.token,usernames:e.employees.filter(function(e){return e.selected}).map(function(e){return e.username})});case 2:t=n.sent,a=t.data,o=a.success,s=a.message,o&&e.getEmployees(),e.$emit("update",o,s);case 8:case"end":return n.stop()}},n,e)}))()},getEmployees:function(){var e=this;return g()(v.a.mark(function n(){var t,a;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Je({loginuser:e.loginuser.username,token:e.loginuser.token});case 2:t=n.sent,(a=t.data.employees)&&(e.employees=a.filter(function(e){return e.enabled}).map(function(n){return Pe()({},n,{annualInfo:Pe()({},n.annualInfo,{deadline:e.formatDate(n.annualInfo.deadline)}),nextAnnualInfo:Pe()({},n.nextAnnualInfo,{deadline:e.formatDate(n.nextAnnualInfo.deadline)}),selected:!1})}).map(function(e){return Pe()({},e,{backup:y()({},e)})}));case 5:case"end":return n.stop()}},n,e)}))()},formatDate:oe.formatDate,generateleaveTypeSummary:function(e){return Rn.generateleaveTypeSummary({days:e.consumes.days,hours:e.consumes.halfHours/2,totalDays:e.totals.days,totalHours:e.totals.halfHours/2})}},watch:{dialog:function(e){e&&this.getEmployees()}}},Mn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-dialog",{attrs:{"max-width":"600",scrollable:"",persistent:""},model:{value:e.dialog,callback:function(n){e.dialog=n},expression:"dialog"}},[t("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[t("v-icon",{attrs:{color:"warning"}},[e._v("local_airport")])],1),e._v(" "),t("v-card",{staticClass:"annualinfo-management"},[t("v-card-title",{staticClass:"theme"},[t("div",{staticClass:"headline"},[e._v("員工特別休假管理")])]),e._v(" "),t("v-card-title",{staticClass:"header"},[t("div",{staticClass:"action",on:{click:e.toggleSelectAll}},[t("div",{staticClass:"select-action-label"},[e._v("全選")]),e._v(" "),t("v-checkbox",{staticClass:"select-action",attrs:{value:e.allSelected}})],1),e._v(" "),t("div",{staticClass:"user-info"},[t("div",[e._v("員工姓名")]),e._v(" "),t("div",{staticClass:"sub-title"},[e._v("英文名")])]),e._v(" "),t("div",{staticClass:"status-info"},[t("div",{staticClass:"sub-title"},[e._v("到期日")]),e._v(" "),t("div",[e._v("已用天數/總天數")])])]),e._v(" "),t("v-card-text",[t("v-list",{attrs:{"two-line":""}},[e._l(e.employees,function(n,a){return[t("v-list-tile",{key:n._id},[t("v-list-tile-action",[t("v-checkbox",{model:{value:n.selected,callback:function(t){e.$set(n,"selected",t)},expression:"employee.selected"}})],1),e._v(" "),t("v-list-tile-content",[t("v-list-tile-title",[e._v(e._s(n.name))]),e._v(" "),t("v-list-tile-sub-title",[e._v(e._s(n.username))])],1),e._v(" "),t("v-list-tile-action",{staticClass:"status"},[t("v-list-tile-action-text",[e._v(e._s(n.annualInfo.deadline))]),e._v("\n              "+e._s(e.generateleaveTypeSummary(n.annualInfo))+"\n            ")],1),e._v(" "),n.isAnnualLTRefreshable?t("v-list-tile-action",[t("v-icon",[e._v("arrow_forward")])],1):e._e(),e._v(" "),n.isAnnualLTRefreshable?t("v-list-tile-action",{staticClass:"status"},[t("v-list-tile-action-text",[e._v(e._s(n.nextAnnualInfo.deadline))]),e._v("\n              "+e._s(e.generateleaveTypeSummary(n.nextAnnualInfo))+"\n            ")],1):e._e()],1),e._v(" "),t("v-divider",{key:a+"-divider"})]})],2)],1),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{flat:""},on:{click:function(n){e.dialog=!1}}},[e._v("關閉")]),e._v(" "),t("v-btn",{class:{theme:e.employees.some(function(e){return e.selected})},attrs:{disabled:!e.employees.some(function(e){return e.selected})},on:{click:e.update}},[e._v("更新")])],1)],1)],1)};Mn._withStripped=!0;var On={render:Mn,staticRenderFns:[]},$n=On;var Bn=!1;var Un=t("VU/8")(Nn,$n,!1,function(e){Bn||t("rDBR")},null,null);Un.options.__file="src\\components\\AnnualInfoManagement.vue",Un.esModule&&Object.keys(Un.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Hn={name:"NavDrawer",components:{"employee-info":He,"employee-account-settings":Cn,"database-management":In,"annualinfo-management":Un.exports},props:{icon:{type:String,default:""},title:{type:String,default:""}},data:function(){return{mini:!0,dialog:!1,config:ze,menu:[],account:{password:"",email:"",id:""}}},mounted:function(){var e=this;this.account.email=this.loginuser.email,this.account.id=this.loginuser._id,this.menu=[{list:[{title:this.loalocale.self.common,header:!0},{title:this.loalocale.self.leaveCalendar,icon:"event_note",action:function(){return e.$router.push({name:"LeaveCalendar"})}},{title:this.loalocale.self.employees,icon:"view_list",action:function(){return e.$router.push({name:"List"})}},{title:this.loalocale.self.compensatory,icon:"event_available",action:function(){return e.$router.push({name:"CompensatoryList"})}},{title:this.loalocale.self.report,header:!0},{title:this.loalocale.self.annualReport,icon:"view_quilt",action:function(){return e.$router.push({name:"AnnualReport"})}},{title:this.loalocale.self.monthlyReport,icon:"view_quilt",action:function(){return e.$router.push({name:"MonthlyReport"})}},{title:this.loalocale.self.others,header:!0},{title:this.loalocale.self.shiftCalendar,icon:"schedule",action:function(){return e.$router.push({name:"ShiftCalendar"})}}]}]},methods:{logout:function(e,n){e.delete("loasystem.loginuser"),n.push({name:"Login"})},resetPWD:function(e,n){var t=this;this.$emit("notified",{text:oe.lookUpCustomMessage(n,this.loalocale.self.message),level:e?"info":"warning",visible:!0,handler:function(n,a){e&&t.logout(a,n)}})},update:function(e,n){this.$emit("notified",{text:oe.lookUpCustomMessage(n,this.loalocale.self.message),level:e?"info":"warning",visible:!0,handler:function(n,t){e&&location.reload()}})},resetEmail:function(e,n){this.$emit("notified",{text:oe.lookUpCustomMessage(n,this.loalocale.self.message),level:e?"info":"warning",visible:!0})},dbbackup:function(e,n){},dbrestore:function(e,n){var t=this;this.$emit("notified",{text:oe.lookUpCustomMessage(n,this.loalocale.self.message),level:e?"info":"warning",visible:!0,handler:function(n,a){e&&t.logout(a,n)}})}}},jn=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("v-navigation-drawer",{attrs:{"mini-variant":e.mini,fixed:"",app:"",right:""}},[t("v-card",[t("v-img",{staticClass:"white--text",attrs:{height:"200px",src:"/static/avatar/"+e.loginuser.username+".png"}},[t("v-btn",{staticClass:"nav-expander",attrs:{icon:""},on:{click:function(n){n.stopPropagation(),e.mini=!e.mini}}},[t("v-icon",[e._v(e._s(e.mini?"chevron_left":"chevron_right"))])],1)],1),e._v(" "),e.mini?e._e():t("v-card-title",[t("employee-info",{attrs:{profile:e.loginuser,small:"",icon:""}}),e._v(" "),t("employee-account-settings",{attrs:{account:e.account},on:{"reset:email":e.resetEmail,"reset:password":e.resetPWD}})],1)],1),e._v(" "),t("v-list",{attrs:{dense:""}},[e._l(e.menu,function(n,a){return[e._l(n.list,function(n,o){return[n.header?t("v-subheader",{key:"header_"+a+"_"+o},[e._v(e._s(n.title))]):t("v-list-tile",{key:"list-tile_"+a+"_"+o,class:{active:n.title===e.title},on:{click:n.action}},[t("v-tooltip",{attrs:{left:""}},[t("v-list-tile-action",{attrs:{slot:"activator"},slot:"activator"},[t("v-icon",[e._v(e._s(n.icon))])],1),e._v("\n              "+e._s(n.title)+"\n            ")],1),e._v(" "),t("v-list-tile-content",[t("v-list-tile-title",[e._v(e._s(n.title))])],1)],1)]})]})],2)],1),e._v(" "),t("v-toolbar",{attrs:{color:"theme",dark:"",fixed:"",app:"",height:"40"}},[t("v-toolbar-title",[t("v-tooltip",{attrs:{bottom:""}},[t("v-toolbar-title",{attrs:{slot:"activator"},slot:"activator"},[t("v-icon",{attrs:{color:"white"}},[e._v(e._s(e.icon))]),e._v("\n          "+e._s(e.title)+"\n        ")],1),e._v(" "),e._t("default")],2)],1),e._v(" "),t("v-spacer"),e._v(" "),"admin"===e.loginuser.level?t("v-toolbar-title",[t("annualinfo-management",{on:{update:e.update}})],1):e._e(),e._v(" "),"admin"===e.loginuser.level?t("v-toolbar-title",[t("database-management",{on:{dbbackup:e.dbbackup,dbrestore:e.dbrestore}})],1):e._e(),e._v(" "),t("v-toolbar-title",[t("v-tooltip",{attrs:{bottom:""}},[t("v-btn",{attrs:{slot:"activator",icon:""},on:{click:function(n){return e.logout(e.$cookie,e.$router)}},slot:"activator"},[t("v-icon",{attrs:{color:"white"}},[e._v("power_settings_new")])],1),e._v("\n        "+e._s(e.loalocale.self.logout)+"\n      ")],1)],1)],1)],1)};jn._withStripped=!0;var Pn={render:jn,staticRenderFns:[]},zn=Pn;var Yn=!1;var Gn=t("VU/8")(Hn,zn,!1,function(e){Yn||t("BE7F")},"data-v-96fc41e8",null);Gn.options.__file="src\\components\\NavDrawer.vue",Gn.esModule&&Object.keys(Gn.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Wn={name:"PageContainer",components:{"nav-drawer":Gn.exports},props:{icon:{type:String,default:""},title:{type:String,default:""}},data:function(){return{}},methods:{notified:function(e){this.$emit("notified",e)}}},Zn=function(){var e=this.$createElement,n=this._self._c||e;return n("v-app",{attrs:{id:"inspire"}},[n("nav-drawer",{attrs:{title:this.title,icon:this.icon},on:{notified:this.notified}},[this._t("tooltip")],2),this._v(" "),n("v-content",[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-layout",[n("v-flex",{attrs:{xs12:""}},[this._t("default")],2)],1)],1)],1)],1)};Zn._withStripped=!0;var qn={render:Zn,staticRenderFns:[]},Vn=qn;var Kn=!1;var Jn=t("VU/8")(Wn,Vn,!1,function(e){Kn||t("wsbR")},null,null);Jn.options.__file="src\\components\\PageContainer.vue",Jn.esModule&&Object.keys(Jn.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Qn=Jn.exports,Xn={name:"List",components:{"employee-action":C,"signing-block":ge,"system-notification":Ce,"leave-type-refreshed-notification":Ie,"page-container":Qn},data:function(){return{news:!1,systemNotification:{level:"warning",text:"",visible:!1,handler:function(){}},search:"",headers:[],employees:[],fullControl:!1,showResigners:!1,year:(new Date).getFullYear()}},computed:{filteredEmployees:function(){var e=this;return this.employees.filter(function(n){return e.showResigners||n.enabled})}},created:function(){this.headers=[{text:this.loalocale.self.employeeID,value:"employeeID"},{text:this.loalocale.self.name,value:"name"},{text:this.loalocale.self.username,value:"username"},{text:this.loalocale.self.dept,value:"dept"},{text:this.loalocale.self.arrivedDate,value:"arrivedDate"},{text:this.loalocale.self.annualInfo,value:"annualInfo"},{text:this.loalocale.self.action,value:""}]},mounted:function(){this.getEmployees(),this.news=this.$route.params.logs&&this.$route.params.logs.length>0},methods:{download:function(){var e=this;this.filteredEmployees.forEach(function(n){var t=hn.exportEmployee({year:(new Date).getFullYear(),loginuser:e.loginuser.username,token:e.loginuser.token,username:n.username}),a=document.createElement("iframe");a.src=t,a.style="display:none",document.body.appendChild(a)})},getEmployees:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s,l;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Ke({loginuser:e.loginuser.username,token:e.loginuser.token});case 2:t=n.sent,a=t.data,o=a.message,s=a.employees,l=a.fullControl,s?e.employees=s.map(function(e){return y()({},e,{unSigningRecords:e.unSigningRecords.map(function(e){return y()({},e,oe.lookUpLeaveTypeIconNClass(e.leaveType))})})}):(e.systemNotification.text=oe.lookUpCustomMessage(o),e.systemNotification.visible=!0),e.fullControl=l;case 9:case"end":return n.stop()}},n,e)}))()},toggleEnable:function(e){var n=this;return g()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ln({loginuser:n.loginuser.username,token:n.loginuser.token,id:e});case 2:n.getEmployees();case 3:case"end":return t.stop()}},t,n)}))()},deleteEmployee:function(e){var n=this;return g()(v.a.mark(function t(){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,sn({loginuser:n.loginuser.username,token:n.loginuser.token,id:e});case 2:n.getEmployees();case 3:case"end":return t.stop()}},t,n)}))()},createEmployee:function(){this.$router.push({name:"Detail",params:{id:"new"}})},sign:function(e,n,t){var a=this;return g()(v.a.mark(function o(){var s,l,r,i;return v.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,an({loginuser:a.loginuser.username,token:a.loginuser.token,id:e,recordID:n,pass:t});case 2:s=o.sent,l=s.data,r=l.success,i=l.message,r?a.getEmployees():(a.systemNotification.text=oe.lookUpCustomMessage(i),a.systemNotification.visible=!0);case 7:case"end":return o.stop()}},o,a)}))()},formatDate:oe.formatDate,generateleaveTypeSummary:function(e){return Rn.generateleaveTypeSummary({days:e.consumes.days,hours:e.consumes.halfHours/2,totalDays:e.totals.days,totalHours:e.totals.halfHours/2})}}},et=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("page-container",{attrs:{title:e.loalocale.self.title,icon:"view_list"},on:{notified:function(n){return e.systemNotification=n}}},[t("v-card",{staticClass:"elevation-12"},[t("v-card-title",[e.fullControl?t("v-switch",{attrs:{label:e.loalocale.self.showResigners},model:{value:e.showResigners,callback:function(n){e.showResigners=n},expression:"showResigners"}}):e._e(),e._v(" "),t("v-spacer"),e._v(" "),t("v-text-field",{attrs:{"append-icon":"search",label:e.loalocale.self.search,"hide-details":""},model:{value:e.search,callback:function(n){e.search=n},expression:"search"}}),e._v(" "),t("div",{staticStyle:{border:"1px solid black","margin-left":"10px","border-radius":"4px","padding-right":"10px"}},[t("v-btn",{on:{click:e.download}},[t("v-icon",[e._v("get_app")]),e._v("\n          "+e._s(e.loalocale.self.download)+"\n        ")],1),e._v(" "),t("label",[e._v(e._s(e.loalocale.self.year)+":")]),e._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.year,expression:"year"}],staticStyle:{width:"60px",border:"1px solid black","border-radius":"4px",padding:"4px 6px"},domProps:{value:e.year},on:{input:function(n){n.target.composing||(e.year=n.target.value)}}})],1),e._v(" "),e.fullControl?t("v-btn",{staticClass:"theme add-btn",attrs:{dark:""},on:{click:e.createEmployee}},[t("v-icon",[e._v("add")]),e._v("\n        "+e._s(e.loalocale.self.create)+"\n      ")],1):e._e()],1),e._v(" "),t("v-data-table",{attrs:{"must-sort":"",search:e.search,headers:e.headers,items:e.filteredEmployees,"item-key":"_id","rows-per-page-items":[{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}]},scopedSlots:e._u([{key:"items",fn:function(n){return[t("tr",{class:n.item.enabled?"":"disabled",on:{click:function(e){n.expanded=!n.expanded}}},[t("td",[e._v(e._s(n.item.employeeID))]),e._v(" "),t("td",{staticClass:"min-width-160"},[e._v("\n            "+e._s(n.item.name)+"\n            "),n.item.unSigningRecords.length>0?t("v-badge",{attrs:{left:""}},[t("v-icon",{attrs:{color:"blue"}},[e._v("textsms")])],1):e._e()],1),e._v(" "),t("td",[e._v(e._s(n.item.username))]),e._v(" "),t("td",{staticClass:"min-width-120"},[e._v(e._s(n.item.dept))]),e._v(" "),t("td",{staticClass:"min-width-160"},[e._v("\n            "+e._s(e.formatDate(n.item.arrivedDate))+"\n          ")]),e._v(" "),t("td",{staticClass:"min-width-160"},[e._v("\n            "+e._s(e.generateleaveTypeSummary(n.item.annualInfo))+"\n          ")]),e._v(" "),t("td",{staticClass:"min-width-380"},[t("employee-action",{key:n.item._id,attrs:{employee:n.item,"full-control":e.fullControl},on:{delete:e.deleteEmployee,toggle:e.toggleEnable}})],1)])]}},{key:"expand",fn:function(n){return[t("v-card",{attrs:{flat:""}},[n.item.enabled?t("v-list",e._l(n.item.unSigningRecords,function(a){return t("signing-block",{key:a._id,attrs:{employee:n.item,record:a},on:{sign:e.sign}})}),1):e._e()],1)]}}])}),e._v(" "),t("v-card-text",{staticStyle:{height:"100px",position:"relative"}})],1),e._v(" "),t("leave-type-refreshed-notification",{attrs:{"leave-types":e.$route.params.logs,"full-control":e.fullControl},on:{close:function(n){e.news=!1}},model:{value:e.news,callback:function(n){e.news=n},expression:"news"}}),e._v(" "),t("system-notification",{on:{close:function(n){e.systemNotification.visible=!1}},model:{value:e.systemNotification,callback:function(n){e.systemNotification=n},expression:"systemNotification"}},[t("div",[e._v(e._s(e.systemNotification.text))])])],1)};et._withStripped=!0;var nt={render:et,staticRenderFns:[]},tt=nt;var at=!1;var ot=t("VU/8")(Xn,tt,!1,function(e){at||t("vOND")},"data-v-5ebc0820",null);ot.options.__file="src\\views\\List.vue",ot.esModule&&Object.keys(ot.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var st=ot.exports,lt=t("mvHQ"),rt=t.n(lt),it={name:"EmployeeProfile",props:{profile:{type:Object,default:function(){return{employeeID:"",dept:"",name:"",username:"",arrivedDate:"",level:"",signers:[],email:""}}},signerOptions:{type:Array,default:function(){return{id:"",dept:"",name:"",username:"",level:""}}},deptOptions:{type:Array,default:function(){return[]}},levelOptions:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!0},addingNew:{type:Boolean,default:!0}},computed:{signerInfos:function(){var e=this;return this.signerOptions.filter(function(n){return n.username!==e.username}).map(function(e){return"["+e.dept+"]"+e.name+"("+e.username+")"})},formattedSelectedSigners:{set:function(e){var n=this,t=e.map(function(e){var t=/\[(.*?)\](.*?)\((.*?)\)/.exec(e),a=o()(t,4),s=a[1],l=a[2],r=a[3];if(s&&l&&r){var i=n.signerOptions.find(function(e){return e.username===r});if(i)return i}}).filter(function(e){return e});this.$emit("update:profile",Pe()({},this.profile,{signers:t}))},get:function(){return this.profile.signers.map(function(e){return"["+e.dept+"]"+e.name+"("+e.username+")"})}}},data:function(){return{datepickerMenu:!1,dateInput:""}},watch:{profile:function(){this.dateInput=this.profile.arrivedDate}}},ct=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs5:""}},[t("v-text-field",{attrs:{"prepend-icon":"star_border",rules:[function(n){return!!n||e.loalocale.self.noEmpty}],label:e.loalocale.self.employeeID,required:"",readonly:!e.addingNew&&e.readonly},model:{value:e.profile.employeeID,callback:function(n){e.$set(e.profile,"employeeID",n)},expression:"profile.employeeID"}})],1),e._v(" "),t("v-flex",{attrs:{xs1:""}}),e._v(" "),t("v-flex",{attrs:{xs6:""}},[t("v-select",{attrs:{"prepend-icon":"group",items:e.deptOptions,label:e.loalocale.self.dept,required:"",readonly:!e.addingNew&&e.readonly,rules:[function(n){return!!n||e.loalocale.self.noEmpty}]},model:{value:e.profile.dept,callback:function(n){e.$set(e.profile,"dept",n)},expression:"profile.dept"}})],1),e._v(" "),t("v-flex",{attrs:{xs6:""}},[t("v-text-field",{attrs:{"prepend-icon":"person",rules:[function(n){return!!n||e.loalocale.self.noEmpty}],label:e.loalocale.self.name,required:"",readonly:!e.addingNew&&e.readonly},model:{value:e.profile.name,callback:function(n){e.$set(e.profile,"name",n)},expression:"profile.name"}})],1),e._v(" "),t("v-flex",{attrs:{xs6:""}},[t("v-text-field",{attrs:{rules:[function(n){return!!n||e.loalocale.self.noEmpty}],label:e.loalocale.self.username,required:"",readonly:!e.addingNew&&!e.addingNew},model:{value:e.profile.username,callback:function(n){e.$set(e.profile,"username",n)},expression:"profile.username"}})],1),e._v(" "),t("v-flex",{attrs:{xs6:""}},[t("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","max-width":"290px","min-width":"290px",disabled:!e.addingNew&&e.readonly},model:{value:e.datepickerMenu,callback:function(n){e.datepickerMenu=n},expression:"datepickerMenu"}},[t("v-text-field",{attrs:{slot:"activator",mask:"####-##-##",label:e.loalocale.self.arrivedDate,"persistent-hint":"","prepend-icon":"event","return-masked-value":"",rules:[function(n){return!!n||e.loalocale.self.noEmpty}]},on:{blur:function(n){e.profile.arrivedDate=e.dateInput}},slot:"activator",model:{value:e.dateInput,callback:function(n){e.dateInput=n},expression:"dateInput"}}),e._v(" "),t("v-date-picker",{attrs:{"no-title":"",scrollable:""},on:{input:function(n){e.datepickerMenu=!1,e.dateInput=e.profile.arrivedDate}},model:{value:e.profile.arrivedDate,callback:function(n){e.$set(e.profile,"arrivedDate",n)},expression:"profile.arrivedDate"}})],1)],1),e._v(" "),t("v-flex",{attrs:{xs6:""}},[t("v-select",{attrs:{"prepend-icon":"security",items:e.levelOptions,label:e.loalocale.self.level,required:"",readonly:!e.addingNew&&e.readonly,rules:[function(n){return!!n||e.loalocale.self.noEmpty}]},model:{value:e.profile.level,callback:function(n){e.$set(e.profile,"level",n)},expression:"profile.level"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:""}},[t("v-text-field",{attrs:{"prepend-icon":"email",type:"email",label:e.loalocale.self.email,readonly:!e.addingNew&&e.readonly,rules:[function(n){return!n||/.+@.+/.test(n)||e.loalocale.self.invalidEmail}]},model:{value:e.profile.email,callback:function(n){e.$set(e.profile,"email",n)},expression:"profile.email"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:""}},[t("v-combobox",{attrs:{items:e.signerInfos,label:e.loalocale.self.signers,multiple:"",chips:"",readonly:!e.addingNew&&e.readonly},model:{value:e.formattedSelectedSigners,callback:function(n){e.formattedSelectedSigners=n},expression:"formattedSelectedSigners"}})],1)],1)};ct._withStripped=!0;var ut={render:ct,staticRenderFns:[]},dt=ut;var pt=!1;var mt=t("VU/8")(it,dt,!1,function(e){pt||t("buKF")},null,null);mt.options.__file="src\\components\\EmployeeProfile.vue",mt.esModule&&Object.keys(mt.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var vt=mt.exports,ft={name:"LeaveTypeTooltip",props:{complete:{type:Boolean,default:!1},info:{type:Object,default:function(){return{consumes:{days:0,halfHours:0},totals:{days:0,halfHours:0},deadline:""}}}},computed:{formattedInfo:function(){return{consumes:oe.stringFormat(this.loalocale.self.stringTemplate.consumes,this.info.consumes.days,this.info.consumes.halfHours?this.info.consumes.halfHours/2:this.info.consumes.hours?this.info.consumes.hours:0),totals:oe.stringFormat(this.loalocale.self.stringTemplate.totals,this.info.totals.days,this.info.totals.halfHours?this.info.totals.halfHours/2:this.info.totals.hours?this.info.totals.hours:0),deadline:oe.stringFormat(this.loalocale.self.stringTemplate.deadline,this.info.deadline)}}}},yt=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",[e._v(e._s(e.formattedInfo.consumes))]),e._v(" "),e.complete?t("div",[e._v(e._s(e.formattedInfo.totals))]):e._e(),e._v(" "),t("div",[e._v(e._s(e.formattedInfo.deadline))])])};yt._withStripped=!0;var ht={render:yt,staticRenderFns:[]},gt=ht;var _t=!1;var bt=t("VU/8")(ft,gt,!1,function(e){_t||t("LuBF")},null,null);bt.options.__file="src\\components\\LeaveTypeTooltip.vue",bt.esModule&&Object.keys(bt.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var xt=bt.exports,At={name:"AnimatedCircular",props:{value:{type:Number,default:0},color:{type:String,default:""}},mounted:function(){var e=this;setInterval(function(){e.initial=e.value},0)},data:function(){return{initial:0}}},wt=function(){var e=this.$createElement;return(this._self._c||e)("v-progress-circular",{attrs:{rotate:-90,size:50,width:3,value:this.initial,color:this.color}},[this._t("default")],2)};wt._withStripped=!0;var kt={render:wt,staticRenderFns:[]},Ct=kt;var Tt=!1;var Dt=t("VU/8")(At,Ct,!1,function(e){Tt||t("hplZ")},null,null);Dt.options.__file="src\\components\\AnimatedCircular.vue",Dt.esModule&&Object.keys(Dt.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Et=Dt.exports,Ft={name:"LeaveTypeEditorDialog",props:{info:{type:Object,default:function(){return{consumes:{days:0,hours:0},totals:{days:0,hours:0},deadline:"",default:!1,index:0,halfHoursEnabled:!1}}}},data:function(){return{dialog:!1,datepicker:!1,dateInput:""}},mounted:function(){this.dateInput=this.info.deadline},methods:{removeOne:function(e){this.$emit("removeOne",e)}}},Lt=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(n){e.dialog=!0}}},[t("v-icon",[e._v("edit")])],1),e._v(" "),t("v-dialog",{attrs:{"max-width":"400px"},model:{value:e.dialog,callback:function(n){e.dialog=n},expression:"dialog"}},[t("v-card",[t("v-card-title",[t("h2",[e._v(e._s(e.info.title))])]),e._v(" "),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:""}},[e.info.default?e._e():t("v-checkbox",{attrs:{label:e.loalocale.self.hoursLeave},model:{value:e.info.halfHoursEnabled,callback:function(n){e.$set(e.info,"halfHoursEnabled",n)},expression:"info.halfHoursEnabled"}})],1),e._v(" "),t("v-flex",{attrs:{xs6:""}},[t("v-text-field",{attrs:{type:"number",min:"0",label:e.loalocale.self.consumes+e.loalocale.self.days},model:{value:e.info.consumes.days,callback:function(n){e.$set(e.info.consumes,"days",e._n(n))},expression:"info.consumes.days"}})],1),e._v(" "),t("v-flex",{attrs:{xs6:""}},[t("v-text-field",{attrs:{disabled:!e.info.halfHoursEnabled,type:"number",min:"0",max:"15",label:e.loalocale.self.hours},model:{value:e.info.consumes.hours,callback:function(n){e.$set(e.info.consumes,"hours",e._n(n))},expression:"info.consumes.hours"}})],1),e._v(" "),t("v-flex",{attrs:{xs6:""}},[t("v-text-field",{attrs:{type:"number",min:"0",label:e.loalocale.self.totals+e.loalocale.self.days},model:{value:e.info.totals.days,callback:function(n){e.$set(e.info.totals,"days",e._n(n))},expression:"info.totals.days"}})],1),e._v(" "),t("v-flex",{attrs:{xs6:""}},[t("v-text-field",{attrs:{disabled:!e.info.halfHoursEnabled,type:"number",min:"0",max:"15",label:e.loalocale.self.hours},model:{value:e.info.totals.hours,callback:function(n){e.$set(e.info.totals,"hours",e._n(n))},expression:"info.totals.hours"}})],1),e._v(" "),t("v-flex",{attrs:{xs6:""}},[t("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":0,lazy:"",transition:"scale-transition","offset-x":"","full-width":"","max-width":"290px","min-width":"290px"},model:{value:e.datepicker,callback:function(n){e.datepicker=n},expression:"datepicker"}},[t("v-text-field",{attrs:{slot:"activator",label:e.loalocale.self.deadline,"persistent-hint":"","prepend-icon":"event",mask:"####-##-##","return-masked-value":""},on:{blur:function(n){e.info.deadline=e.dateInput}},slot:"activator",model:{value:e.dateInput,callback:function(n){e.dateInput=n},expression:"dateInput"}}),e._v(" "),t("v-date-picker",{attrs:{"no-title":""},on:{input:function(n){e.datepicker=!1,e.dateInput=e.info.deadline}},model:{value:e.info.deadline,callback:function(n){e.$set(e.info,"deadline",n)},expression:"info.deadline"}})],1)],1)],1)],1),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"theme",on:{click:function(n){e.dialog=!1}}},[e._v(e._s(e.loalocale.self.close))]),e._v(" "),e.info.default?e._e():t("v-btn",{staticClass:"theme",on:{click:function(n){return e.removeOne(e.info.index)}}},[e._v(e._s(e.loalocale.self.remove))])],1)],1)],1)],1)};Lt._withStripped=!0;var St={render:Lt,staticRenderFns:[]},It=St;var Rt=!1;var Nt=t("VU/8")(Ft,It,!1,function(e){Rt||t("TZAM")},null,null);Nt.options.__file="src\\components\\LeaveTypeEditorDialog.vue",Nt.esModule&&Object.keys(Nt.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Mt={name:"LeaveTypeRow",components:{"leave-type-tooltip":xt,"animated-circular":Et,"leave-type-editor-dialog":Nt.exports},props:{leaveType:{type:Object},readonly:{type:Boolean,default:!1}},computed:{},data:function(){return{customTypeName:""}},methods:{calculatePercentage:function(e,n){var t=8*e.days*2+(e.halfHours?e.halfHours:e.hours?2*e.hours:0);return 100*(t-(8*n.days*2+(n.halfHours?n.halfHours:n.hours?2*n.hours:0)))/t},pickOne:function(e){this.$emit("pickOne",e)},removeOne:function(e){this.$emit("removeOne",e)}}},Ot=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-tooltip",{attrs:{bottom:""}},[t("v-list-tile",{staticClass:"row",attrs:{slot:"activator",avatar:""},slot:"activator"},[t("v-list-tile-avatar",{staticClass:"clickable",on:{click:function(n){return e.pickOne(e.leaveType)}}},[t("v-icon",{class:e.leaveType.class},[e._v(e._s(e.leaveType.icon))])],1),e._v(" "),t("v-list-tile-content",{staticClass:"clickable",attrs:{title:e.leaveType.title},on:{click:function(n){return e.pickOne(e.leaveType)}}},[t("v-list-tile-title",[e._v(e._s(e.leaveType.title))])],1),e._v(" "),!e.readonly||e.leaveType.countdown?t("v-list-tile-avatar",[t("v-tooltip",{attrs:{bottom:""}},[t("animated-circular",{attrs:{slot:"activator",value:e.leaveType.countdown?e.calculatePercentage(e.leaveType.totals,e.leaveType.consumes):100,color:e.leaveType.color},slot:"activator"},[e.leaveType.countdown?[t("span",[e._v("剩")]),e._v(e._s(e.leaveType.totals.days>e.leaveType.consumes.days?e.leaveType.totals.days-e.leaveType.consumes.days:e.leaveType.totals.hours-e.leaveType.consumes.hours)),t("span",[e._v(e._s(e.leaveType.totals.days>e.leaveType.consumes.days?"天":"時"))])]:[e._v("\n            "+e._s(e.leaveType.consumes.days)),t("span",[e._v("天")])]],2),e._v(" "),t("leave-type-tooltip",{attrs:{complete:e.leaveType.countdown,info:e.leaveType}})],1)],1):e._e(),e._v(" "),e.readonly?e._e():t("v-list-tile-action",[t("leave-type-editor-dialog",{key:e.leaveType.title,attrs:{info:e.leaveType},on:{removeOne:e.removeOne}})],1),e._v(" "),e.readonly?e._e():t("v-list-tile-action",[t("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(n){e.leaveType.enabled=!e.leaveType.enabled}}},[t("v-icon",{class:e.leaveType.enabled?"green--text":""},[e._v(e._s(e.leaveType.enabled?"check_box":"check_box_outline_blank"))])],1)],1),e._v(" "),e.readonly||e.leaveType.default?e._e():t("v-list-tile-action",[t("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(n){e.leaveType.stashed=!e.leaveType.stashed}}},[t("v-icon",[e._v(e._s(e.leaveType.stashed?"inbox":"move_to_inbox"))])],1)],1)],1),e._v("\n  "+e._s(e.leaveType.title)+"\n")],1)};Ot._withStripped=!0;var $t={render:Ot,staticRenderFns:[]},Bt=$t;var Ut=!1;var Ht=t("VU/8")(Mt,Bt,!1,function(e){Ut||t("8Siw")},"data-v-0c4fb5be",null);Ht.options.__file="src\\components\\LeaveTypeRow.vue",Ht.esModule&&Object.keys(Ht.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var jt={name:"LeaveTypeContainer",components:{"leave-type-row":Ht.exports},props:{leaveTypes:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1},helper:{type:Boolean,default:!1}},computed:{},data:function(){return{customTypeName:"",interval:{}}},methods:{pickOne:function(e){this.$emit("pickOne",e)},importOne:function(){this.$emit("importOne",this.customTypeName),this.customTypeName=""},removeOne:function(e){this.$emit("removeOne",e)}}},Pt=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-layout",{attrs:{row:"",wrap:""}},[e.helper?t("v-flex",{attrs:{xs12:""}},[t("small",[e._v(e._s(e.loalocale.self.pickLeaveType))]),e._v(" "),t("router-link",{attrs:{to:{name:"LeaveTypeInfo"},target:"_blank"}},[t("v-icon",[e._v("open_in_new")])],1)],1):e._e(),e._v(" "),t("v-flex",{attrs:{xs12:""}},[t("v-list",[e._l(e.leaveTypes,function(n){return t("leave-type-row",{key:n.title,attrs:{leaveType:n,readonly:e.readonly},on:{pickOne:e.pickOne,removeOne:e.removeOne}})}),e._v(" "),!e.readonly&&e.helper?t("v-list-tile",{attrs:{avatar:""}},[t("v-list-tile-avatar",[t("v-icon",{class:["teal","lighten-3","white--text"]},[e._v("event")])],1),e._v(" "),t("v-list-tile-content",[t("v-text-field",{attrs:{label:this.loalocale.self.others},model:{value:e.customTypeName,callback:function(n){e.customTypeName=n},expression:"customTypeName"}})],1),e._v(" "),t("v-list-tile-action",[t("v-tooltip",{attrs:{bottom:""}},[t("v-btn",{class:e.customTypeName?"theme":"disabled",attrs:{slot:"activator",icon:"",ripple:"",disabled:!e.customTypeName},on:{click:e.importOne},slot:"activator"},[t("v-icon",[e._v("add")])],1),e._v(" "),t("div",[e._v(e._s(e.loalocale.self.import))])],1)],1)],1):e._e()],2)],1)],1)};Pt._withStripped=!0;var zt={render:Pt,staticRenderFns:[]},Yt=zt;var Gt=!1;var Wt=t("VU/8")(jt,Yt,!1,function(e){Gt||t("CRLo")},"data-v-6d16cd08",null);Wt.options.__file="src\\components\\LeaveTypeContainer.vue",Wt.esModule&&Object.keys(Wt.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Zt=Wt.exports,qt={name:"Detail",components:{"system-notification":Ce,"employee-profile":vt,"employee-account-settings":Cn,"leave-type-container":Zt},data:function(){return{systemNotification:{level:"warning",text:"",visible:!1},valid:!0,profile:{employeeID:"",dept:"",name:"",username:"",arrivedDate:"",level:"",signers:[],email:""},account:{password:"",email:"",id:""},leaveTypes:[],isEditMode:!1,fullControl:!1,signerOptions:[{id:"",dept:"",name:"",username:"",level:""}],deptOptions:ae.deptOptions,levelOptions:ae.levelOptions}},computed:{availableLTs:function(){var e=this;return this.leaveTypes.filter(function(n){return!e.isEditMode||!e.isAvailableLT(n)&&!n.stashed})},unavailableLTs:function(){var e=this;return this.leaveTypes.filter(function(n){return e.isAvailableLT(n)||n.stashed})},unavailableLTsGroups:function(){var e=[];return this.unavailableLTs.forEach(function(n){var t=new Date(n.deadline).getFullYear(),a=e.find(function(e){return e.year===t});a?a.list.push(n):e.push({list:[n],year:t})}),e}},mounted:function(){this.account.id=this.$route.params.id,this.isEditMode=this.$route.params.id&&"new"!==this.$route.params.id,this.isEditMode?this.getEmployee():(this.fullControl=!0,this.leaveTypes=JSON.parse(rt()(ae.leaveTypes))),this.getEmployees()},methods:{isAvailableLT:function(e){return e.name.startsWith(ae.compensatory.keyword)&&e.consumes.days===e.totals.days&&e.consumes.hours===e.totals.hours&&oe.formatDate(e.deadline)<=oe.formatDate("now")},getEmployees:function(){var e=this;return g()(v.a.mark(function n(){var t,a;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Je({loginuser:e.loginuser.username,token:e.loginuser.token});case 2:t=n.sent,a=t.data.employees,e.signerOptions=a.map(function(e){return{id:e._id,dept:e.dept,name:e.name,username:e.username,level:e.level}});case 5:case"end":return n.stop()}},n,e)}))()},getEmployee:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s,l,r,i,c,u,d,p,m;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,on({loginuser:e.loginuser.username,token:e.loginuser.token,id:e.$route.params.id});case 2:t=n.sent,a=t.data,o=a.employeeID,s=a.dept,l=a.name,r=a.username,i=a.arrivedDate,c=a.level,u=a.signers,d=a.activatedLeaveTypes,p=a.fullControl,m=a.email,e.profile={employeeID:o,dept:s,name:l,username:r,arrivedDate:oe.formatDate(i),level:c,signers:u,email:m},e.fullControl=p,e.leaveTypes=e.accumulateLTsCosumes(e.formatLT(d));case 17:case"end":return n.stop()}},n,e)}))()},submit:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s,l;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.$refs.form.validate()){n.next=18;break}if(t={employeeID:e.profile.employeeID,dept:e.profile.dept,name:e.profile.name,username:e.profile.username,arrivedDate:e.profile.arrivedDate,level:e.profile.level,email:e.profile.email,activatedLeaveTypes:e.leaveTypes.map(function(e){return Pe()({},e,{consumes:{days:e.consumes.days,halfHours:2*e.consumes.hours},totals:{days:e.totals.days,halfHours:2*e.totals.hours}})}),loginuser:e.loginuser.username,token:e.loginuser.token,id:e.$route.params.id,signers:e.profile.signers},!e.isEditMode){n.next=8;break}return n.next=5,Xe(t);case 5:n.t0=n.sent,n.next=11;break;case 8:return n.next=10,Qe(t);case 10:n.t0=n.sent;case 11:a=n.t0,o=a.data,s=o.success,l=o.message,s?e.$router.push({name:"List"}):(e.systemNotification.text=oe.lookUpCustomMessage(l),e.systemNotification.visible=!0),n.next=19;break;case 18:e.systemNotification={text:e.loalocale.self.textfieldUndone,level:"warning",visible:!0};case 19:case"end":return n.stop()}},n,e)}))()},formatLT:function(e){var n=this,t=JSON.parse(rt()(ae.leaveTypes));return e.forEach(function(e){var n=t.find(function(n){return n.name===e.name});if(n)n.enabled=e.enabled,n.consumes={days:e.consumes.days,hours:e.consumes.halfHours?e.consumes.halfHours/2:0},n.totals={days:e.totals.days,hours:e.totals.halfHours?e.totals.halfHours/2:0},n.deadline=oe.formatDate(e.deadline);else{var a=ae.customLeaveType;t.push(Pe()({},a,{index:t.length,enabled:e.enabled,stashed:e.stashed,title:e.name,name:e.name,consumes:{days:e.consumes.days,hours:e.consumes.halfHours?e.consumes.halfHours/2:0},totals:{days:e.totals.days,hours:e.totals.halfHours?e.totals.halfHours/2:0},deadline:oe.formatDate(e.deadline),halfHoursEnabled:e.halfHoursEnabled}))}}),t.filter(function(e){return n.fullControl||e.enabled})},remove1LT:function(e){this.leaveTypes=this.leaveTypes.filter(function(n){return n.index!==e})},import1LT:function(e){if(e){var n=this.leaveTypes.filter(function(n){return n.name.startsWith(e)});n.length>0&&(e+="_"+n.length),this.leaveTypes.push(Pe()({},JSON.parse(rt()(ae.customLeaveType)),{index:this.leaveTypes.length,title:e,name:e}))}},accumulateLTsCosumes:function(e){var n=e.find(function(e){return"familyCare"===e.name});n&&(e.find(function(e){return"personal"===e.name}).consumes.days+=n.consumes.days);return e},resetEmail:function(e,n){var t=this;return g()(v.a.mark(function a(){return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.systemNotification={text:oe.lookUpCustomMessage(n),level:e?"info":"warning",visible:!0,handler:function(n,t){e&&n.push({name:"List"})}};case 1:case"end":return a.stop()}},a,t)}))()},resetPWD:function(e,n){var t=this;return g()(v.a.mark(function a(){return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.systemNotification={text:oe.lookUpCustomMessage(n),level:e?"info":"warning",visible:!0,handler:function(n,t){e&&(t.delete("loginuser"),t.delete("token"),n.push({name:"Login"}))}};case 1:case"end":return a.stop()}},a,t)}))()}}},Vt=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-app",{attrs:{id:"detail"}},[t("v-container",{attrs:{fluid:"","fill-height":""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs12:"",sm8:"",md8:""}},[t("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(n){e.valid=n},expression:"valid"}},[t("employee-profile",{attrs:{"signer-options":e.signerOptions,"dept-options":e.deptOptions,"level-options":e.levelOptions,readonly:!e.fullControl,addingNew:!e.isEditMode,profile:e.profile},on:{"update:profile":function(n){e.profile=n}}}),e._v(" "),t("employee-account-settings",{attrs:{account:e.account,addingNew:!e.isEditMode},on:{resetPWD:e.resetPWD,resetEmail:e.resetEmail}}),e._v(" "),t("v-divider"),e._v(" "),t("leave-type-container",{attrs:{leaveTypes:e.availableLTs,readonly:!e.fullControl,helper:""},on:{importOne:e.import1LT,removeOne:e.remove1LT}}),e._v(" "),t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",[t("v-expansion-panel",{attrs:{dark:""}},[t("v-expansion-panel-content",[t("div",{attrs:{slot:"header"},slot:"header"},[e._v(e._s(e.loalocale.self.unavailableLTs))]),e._v(" "),e._l(e.unavailableLTsGroups,function(n){return t("v-expansion-panel",{key:n.year,staticClass:"insider",attrs:{dark:""}},[t("v-expansion-panel-content",[t("div",{attrs:{slot:"header"},slot:"header"},[e._v("\n                        - "+e._s(n.year)+" ("+e._s(n.list.length)+")\n                      ")]),e._v(" "),t("leave-type-container",{attrs:{leaveTypes:n.list,readonly:!e.fullControl},on:{removeOne:e.remove1LT}})],1)],1)})],2)],1)],1)],1),e._v(" "),t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:""}},[e.fullControl?t("v-btn",{class:["theme","float-right"],on:{click:e.submit}},[e._v(e._s(e.isEditMode?e.loalocale.self.update:e.loalocale.self.create))]):e._e()],1)],1)],1)],1)],1)],1),e._v(" "),t("system-notification",{on:{close:function(n){e.systemNotification.visible=!1}},model:{value:e.systemNotification,callback:function(n){e.systemNotification=n},expression:"systemNotification"}},[t("div",[e._v(e._s(e.systemNotification.text))])])],1)};Vt._withStripped=!0;var Kt={render:Vt,staticRenderFns:[]},Jt=Kt;var Qt=!1;var Xt=t("VU/8")(qt,Jt,!1,function(e){Qt||(t("U0sX"),t("XyBD"))},"data-v-1b814ba3",null);Xt.options.__file="src\\views\\Detail.vue",Xt.esModule&&Object.keys(Xt.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var ea=Xt.exports,na={name:"CalendarController",props:{calendarDate:{type:Date,default:function(){return new Date}},annual:{type:Boolean,default:!1}},data:function(){return{}},computed:{year:function(){return this.calendarDate.getFullYear()},month:function(){return this.calendarDate.getMonth()+1},date:function(){return this.calendarDate.getDate()}},methods:{toPrev:function(){var e=this.annual?new Date(this.year-1,this.month,1):new Date(this.year,this.month-1-1,1);this.$emit("prev",e)},toNext:function(){var e=this.annual?new Date(this.year+1,this.month,1):new Date(this.year,this.month+1-1,1);this.$emit("next",e)},toLastest:function(){var e=new Date;this.$emit("tolastest",e)}}},ta=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-card-title",[e._t("default"),e._v(" "),t("v-spacer"),e._v(" "),t("div",{staticClass:"controller"},[t("v-btn",{attrs:{icon:"",flat:""},on:{click:e.toPrev}},[t("v-icon",[e._v("keyboard_arrow_left")])],1),e._v("\n    "+e._s(e.year)+e._s(e.annual?"":"/"+e.month)+"\n    "),t("v-btn",{attrs:{icon:"",flat:""},on:{click:e.toNext}},[t("v-icon",[e._v("keyboard_arrow_right")])],1),e._v(" "),t("v-btn",{attrs:{icon:"",flat:""},on:{click:e.toLastest}},[t("v-icon",[e._v("last_page")])],1)],1)],2)};ta._withStripped=!0;var aa={render:ta,staticRenderFns:[]},oa=aa;var sa=!1;var la=t("VU/8")(na,oa,!1,function(e){sa||t("ojAK")},"data-v-79adc6dc",null);la.options.__file="src\\components\\CalendarController.vue",la.esModule&&Object.keys(la.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var ra=la.exports,ia={name:"RecordList",components:{"signing-tooltip":de,"leave-type-tooltip":xt,"system-notification":Ce,"page-container":Qn,"employee-info":He,"calendar-controller":ra},data:function(){return{calendarDate:new Date,showRejects:!1,systemNotification:{level:"warning",text:"",visible:!1,handler:function(){}},search:"",headers:[],records:[],fullControl:!1,profile:{id:"",employeeID:"",dept:"",name:"",username:"",arrivedDate:"",level:"",email:""},pagination:{sortBy:"appliedDate",descending:!0}}},computed:{filteredRecords:function(){var e=this;return this.records.filter(function(n){return e.showRejects||n.signings.every(function(e){return e.pass})}).filter(function(n){return n.dates.some(function(n){return new Date(n).getFullYear()===e.year})})},year:function(){return this.calendarDate.getFullYear()}},created:function(){this.headers=[{text:this.loalocale.self.appliedDate,value:"appliedDate",width:120,sortable:!1},{text:this.loalocale.self.dates,value:"",sortable:!1},{text:this.loalocale.self.totals,value:"",sortable:!1},{text:this.loalocale.self.leaveType,value:"leaveType",width:160,sortable:!1},{text:this.loalocale.self.remarks,value:"remarks",sortable:!1},{text:this.loalocale.self.signings,value:"signings",sortable:!1},{text:this.loalocale.self.action,value:"",sortable:!1}]},mounted:function(){this.search=this.$route.params.query,this.getRecords()},methods:{download:function(){var e=hn.exportEmployee({year:this.year,loginuser:this.loginuser.username,token:this.loginuser.token,username:this.profile.username}),n=document.createElement("iframe");n.src=e,n.style="display:none",document.body.appendChild(n)},getRecords:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s,l,r,i,c,u,d,p,m,f;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,on({id:e.$route.params.id,loginuser:e.loginuser.username,token:e.loginuser.token});case 2:t=n.sent,a=t.data,o=a._id,s=a.employeeID,l=a.dept,r=a.name,i=a.username,c=a.arrivedDate,u=a.level,d=a.activatedLeaveTypes,p=a.email,m=a.records,f=a.fullControl,e.profile={employeeID:s,dept:l,name:r,username:i,arrivedDate:c,level:u,email:p,id:o},e.fullControl=f,e.records=m.map(function(n){var t=d.find(function(e){return e.name===n.leaveType});return e.combineRecord(n,t)});case 18:case"end":return n.stop()}},n,e)}))()},combineRecord:function(e,n){var t=y()({},n,{deadline:oe.formatDate(n.deadline),countdown:oe.isLeaveTypeInfoGeneral(n.name),localeName:this.loalocale.shared.leaveTypes[n.name]});return y()({},e,{appliedDate:oe.formatDate(e.appliedDate),activatedLeaveTypes:t,leaveType:oe.getLocaleleaveTypeNames(e.leaveType)})},sign:function(e,n,t){var a=this;return g()(v.a.mark(function o(){var s,l,r,i;return v.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,an({loginuser:a.loginuser.username,token:a.loginuser.token,id:e,recordID:n,pass:t,forced:!0});case 2:s=o.sent,l=s.data,r=l.success,i=l.message,r?a.getRecords():(a.systemNotification.text=oe.lookUpCustomMessage(i),a.systemNotification.visible=!0);case 7:case"end":return o.stop()}},o,a)}))()},generateConsumeSummary:oe.generateConsumeSummary,formatDate:oe.formatDate,generateSummary:oe.generateSummary}},ca=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("page-container",{attrs:{icon:"person",title:e.profile.name+" ("+e.profile.username+")"},on:{notified:function(n){return e.systemNotification=n}},scopedSlots:e._u([{key:"tooltip",fn:function(n){return[t("employee-info",{attrs:{profile:e.profile,icon:"",email:""}})]}}])},[e._v(" "),t("v-card",{staticClass:"elevation-12"},[t("calendar-controller",{attrs:{annual:"",calendarDate:e.calendarDate},on:{prev:function(n){return e.calendarDate=n},next:function(n){return e.calendarDate=n},tolastest:function(n){return e.calendarDate=n}}},[t("v-switch",{attrs:{label:e.loalocale.self.showRejects},model:{value:e.showRejects,callback:function(n){e.showRejects=n},expression:"showRejects"}}),e._v(" "),t("v-text-field",{attrs:{"append-icon":"search",label:e.loalocale.self.search,"single-line":""},model:{value:e.search,callback:function(n){e.search=n},expression:"search"}}),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{on:{click:e.download}},[t("v-icon",[e._v("get_app")]),e._v("\n        "+e._s(e.loalocale.self.download)+"\n      ")],1)],1),e._v(" "),t("v-data-table",{staticClass:"elevation-1",attrs:{pagination:e.pagination,search:e.search,headers:e.headers,items:e.filteredRecords,"rows-per-page-items":[{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}]},on:{"update:pagination":function(n){e.pagination=n}},scopedSlots:e._u([{key:"items",fn:function(n){return[t("tr",[t("td",{staticClass:"min-width-160"},[t("v-tooltip",{attrs:{bottom:""}},[t("div",{attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(n.item.appliedDate))])])],1),e._v(" "),t("td",{staticClass:"min-width-160"},[e._v("\n            "+e._s(e.generateSummary(n.item.dates,n.item.startFrom,n.item.endTo))+"\n          ")]),e._v(" "),t("td",{staticClass:"min-width-160"},[e._v("\n            "+e._s(e.generateConsumeSummary(n.item.dates,n.item.startFrom,n.item.endTo))+"\n          ")]),e._v(" "),t("td",{staticClass:"min-width-120"},[t("v-tooltip",{attrs:{bottom:""}},[t("div",{attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(n.item.leaveType))]),e._v(" "),t("leave-type-tooltip",{attrs:{info:n.item.activatedLeaveTypes}})],1)],1),e._v(" "),t("td",{staticClass:"min-width-100"},[e._v(e._s(n.item.remarks))]),e._v(" "),t("td",e._l(n.item.signings,function(a){return t("div",{key:a._id},[t("v-tooltip",{attrs:{bottom:""}},[t("v-chip",{attrs:{slot:"activator",color:a.pass?"green":"red","text-color":"white"},slot:"activator"},[e._v(e._s(a.name)+" ["+e._s(a.pass?e.loalocale.self.pass:e.loalocale.self.reject)+"]")]),e._v(" "),e._l(n.item.signers,function(e){return t("signing-tooltip",{key:e._id,attrs:{signer:e,signings:n.item.signings}})})],2)],1)}),0),e._v(" "),t("td",[t("v-tooltip",{attrs:{bottom:""}},[e.fullControl&&n.item.signings.every(function(e){return e.pass})?t("v-btn",{attrs:{slot:"activator",icon:"",ripple:""},on:{click:function(t){return e.sign(e.profile.id,n.item._id,!1)}},slot:"activator"},[t("v-icon",{attrs:{color:"red"}},[e._v("pan_tool")])],1):e._e(),e._v(" "),t("div",[e._v(e._s(e.loalocale.self.reject))])],1)],1)])]}}])})],1),e._v(" "),t("system-notification",{on:{close:function(n){e.systemNotification.visible=!1}},model:{value:e.systemNotification,callback:function(n){e.systemNotification=n},expression:"systemNotification"}},[t("div",[e._v(e._s(e.systemNotification.text))])])],1)};ca._withStripped=!0;var ua={render:ca,staticRenderFns:[]},da=ua;var pa=!1;var ma=t("VU/8")(ia,da,!1,function(e){pa||t("K62i")},"data-v-0757b7e1",null);ma.options.__file="src\\views\\RecordList.vue",ma.esModule&&Object.keys(ma.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var va=ma.exports,fa={name:"MonthlyReport",components:{"page-container":Qn,"calendar-controller":ra,"employee-info":He},data:function(){return{calendarDate:new Date,headers:[],employees:[],fullControl:!1,showResigners:!1,loading:!1}},computed:{filteredEmployees:function(){var e=this;return this.employees.filter(function(n){return e.showResigners||n.enabled})},year:function(){return this.calendarDate.getFullYear()},month:function(){return this.calendarDate.getMonth()+1}},created:function(){var e=this;[{text:this.loalocale.self.employeeInfo,sortable:!1,width:"200"},{text:this.loalocale.self.dateGroupStat,sortable:!1},{text:this.loalocale.self.leaveTypeGroupStat,sortable:!1}].forEach(function(n){return e.headers.push(n)})},mounted:function(){this.getRecords()},methods:{download:function(){var e=hn.exportReport({year:this.year,month:this.month,loginuser:this.loginuser.username,token:this.loginuser.token,period:"monthly"}),n=document.createElement("iframe");n.src=e,n.style="display:none",document.body.appendChild(n)},getRecords:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.next=3,Ze({year:e.year,month:e.month,loginuser:e.loginuser.username,token:e.loginuser.token});case 3:t=n.sent,a=t.data,o=a.report,s=a.fullControl,e.loading=!1,e.employees=o,e.fullControl=s;case 10:case"end":return n.stop()}},n,e)}))()},generateSummary:Rn.generateSummary,generateleaveTypeClass:Rn.generateleaveTypeClass},watch:{calendarDate:function(){this.getRecords()}}},ya=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-app",{attrs:{id:"inspire"}},[t("page-container",{attrs:{title:e.loalocale.self.title,icon:"view_list"}},[t("v-card",{staticClass:"elevation-12"},[t("calendar-controller",{attrs:{calendarDate:e.calendarDate},on:{prev:function(n){return e.calendarDate=n},next:function(n){return e.calendarDate=n},tolastest:function(n){return e.calendarDate=n}}},[e.fullControl?t("v-switch",{attrs:{label:e.loalocale.self.showResigners},model:{value:e.showResigners,callback:function(n){e.showResigners=n},expression:"showResigners"}}):e._e(),e._v(" "),e.loading?e._e():t("v-btn",{on:{click:e.download}},[t("v-icon",[e._v("get_app")]),e._v("\n          "+e._s(e.loalocale.self.download)+"\n        ")],1)],1),e._v(" "),e.loading?t("v-progress-linear",{attrs:{indeterminate:!0}}):t("v-data-table",{attrs:{headers:e.headers,items:e.filteredEmployees,"item-key":"_id","rows-per-page-items":[{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}]},scopedSlots:e._u([{key:"items",fn:function(n){return[t("tr",[t("td",{staticClass:"min-width-160"},[t("employee-info",{attrs:{profile:n.item}})],1),e._v(" "),t("td",{staticClass:"min-width-380"},[t("v-data-iterator",{attrs:{items:n.item.recordGroups.filter(function(e){return e.list.length>0}),"rows-per-page-items":[31],"content-tag":"v-layout",row:"",wrap:"","hide-actions":""},scopedSlots:e._u([{key:"item",fn:function(n){return t("v-flex",{attrs:{xs6:""}},[t("v-card",[t("v-card-title",[t("h4",[e._v("\n                        "+e._s(n.item.day+1)+e._s(e.loalocale.self.day)+"\n                      ")])]),e._v(" "),t("v-divider"),e._v(" "),t("v-list",{attrs:{dense:""}},e._l(n.item.list,function(n,a){return t("v-list-tile",{key:a,class:e.generateleaveTypeClass(n.key)},[t("v-list-tile-content",[e._v(e._s(e.generateSummary({leaveType:n.key,days:n.totals.days>0?1:0,hours:n.totals.hours})))])],1)}),1)],1)],1)}}])})],1),e._v(" "),t("td",{staticClass:"min-width-380"},[t("v-data-iterator",{attrs:{items:n.item.leaveTypeGroups,"rows-per-page-items":[n.item.leaveTypeGroups.length],"content-tag":"v-layout",row:"",wrap:"","hide-actions":""},scopedSlots:e._u([{key:"item",fn:function(n){return t("v-flex",{attrs:{xs6:""}},[t("v-card",[t("v-list",{attrs:{dense:""}},[t("v-list-tile",{class:e.generateleaveTypeClass(n.item.key)},[t("v-list-tile-content",[e._v(e._s(e.generateSummary({leaveType:n.item.key,days:n.item.totals.days,hours:n.item.totals.hours})))])],1)],1)],1)],1)}}])})],1)])]}}])})],1)],1)],1)};ya._withStripped=!0;var ha={render:ya,staticRenderFns:[]},ga=ha;var _a=!1;var ba=t("VU/8")(fa,ga,!1,function(e){_a||t("WQVQ")},"data-v-5442e538",null);ba.options.__file="src\\views\\Report\\MonthlyReport.vue",ba.esModule&&Object.keys(ba.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var xa=ba.exports,Aa={name:"AnnualReport",components:{"page-container":Qn,"calendar-controller":ra,"employee-info":He},data:function(){return{calendarDate:new Date,headers:[],employees:[],fullControl:!1,showResigners:!1,loading:!1}},computed:{filteredEmployees:function(){var e=this;return this.employees.filter(function(n){return e.showResigners||n.enabled})},year:function(){return this.calendarDate.getFullYear()}},created:function(){var e=this;[{text:this.loalocale.self.employeeInfo,sortable:!1,width:"200"},{text:this.loalocale.self.monthGroupStat,sortable:!1},{text:this.loalocale.self.leaveTypeGroupStat,sortable:!1},{text:this.loalocale.self.annualStat,sortable:!1}].forEach(function(n){return e.headers.push(n)})},mounted:function(){this.getRecords()},methods:{download:function(){var e=hn.exportReport({year:this.year,loginuser:this.loginuser.username,token:this.loginuser.token,period:"annual"}),n=document.createElement("iframe");n.src=e,n.style="display:none",document.body.appendChild(n)},getRecords:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.next=3,We({year:e.year,loginuser:e.loginuser.username,token:e.loginuser.token});case 3:t=n.sent,a=t.data,o=a.report,s=a.fullControl,e.loading=!1,e.employees=o,e.fullControl=s;case 10:case"end":return n.stop()}},n,e)}))()},generateSummary:Rn.generateSummary,generateleaveTypeClass:Rn.generateleaveTypeClass},watch:{calendarDate:function(){this.getRecords()}}},wa=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-app",{staticClass:"annual-report",attrs:{id:"inspire"}},[t("page-container",{attrs:{title:e.loalocale.self.title,icon:"view_list"}},[t("v-card",{staticClass:"elevation-12"},[t("calendar-controller",{attrs:{annual:"",calendarDate:e.calendarDate},on:{prev:function(n){return e.calendarDate=n},next:function(n){return e.calendarDate=n},tolastest:function(n){return e.calendarDate=n}}},[e.fullControl&&!e.loading?t("v-switch",{attrs:{label:e.loalocale.self.showResigners},model:{value:e.showResigners,callback:function(n){e.showResigners=n},expression:"showResigners"}}):e._e(),e._v(" "),e.loading?e._e():t("v-btn",{on:{click:e.download}},[t("v-icon",[e._v("get_app")]),e._v("\n          "+e._s(e.loalocale.self.download)+"\n        ")],1)],1),e._v(" "),e.loading?t("v-progress-linear",{attrs:{indeterminate:!0}}):t("v-data-table",{attrs:{headers:e.headers,items:e.filteredEmployees,"item-key":"_id","rows-per-page-items":[{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}]},scopedSlots:e._u([{key:"items",fn:function(n){return[t("tr",[t("td",{staticClass:"min-width-160"},[t("employee-info",{attrs:{profile:n.item}})],1),e._v(" "),t("td",{staticClass:"min-width-380"},[t("v-data-iterator",{attrs:{items:n.item.recordGroups.filter(function(e){return e.list.length>0}),"rows-per-page-items":[12],"content-tag":"v-layout",row:"",wrap:"","hide-actions":""},scopedSlots:e._u([{key:"item",fn:function(n){return t("v-flex",{attrs:{xs6:""}},[t("v-card",[t("v-card-title",[t("h4",[e._v("\n                        "+e._s(n.item.month+1)+e._s(e.loalocale.self.month)+"\n                      ")])]),e._v(" "),t("v-divider"),e._v(" "),t("v-list",{attrs:{dense:""}},e._l(n.item.list,function(n,a){return t("v-list-tile",{key:a,class:e.generateleaveTypeClass(n.key)},[t("v-list-tile-content",[e._v(e._s(e.generateSummary({leaveType:n.key,days:n.totals.days,hours:n.totals.hours})))])],1)}),1)],1)],1)}}])})],1),e._v(" "),t("td",{staticClass:"min-width-380"},[t("v-data-iterator",{attrs:{items:n.item.leaveTypeGroups,"rows-per-page-items":[n.item.leaveTypeGroups.length],"content-tag":"v-layout",row:"",wrap:"","hide-actions":""},scopedSlots:e._u([{key:"item",fn:function(n){return t("v-flex",{attrs:{xs6:""}},[t("v-card",[t("v-list",{attrs:{dense:""}},[t("v-list-tile",{class:e.generateleaveTypeClass(n.item.key)},[t("v-list-tile-content",[e._v(e._s(e.generateSummary({leaveType:n.item.key,days:n.item.totals.days,hours:n.item.totals.hours})))])],1)],1)],1)],1)}}])})],1),e._v(" "),t("td",[t("v-data-iterator",{attrs:{items:n.item.annualInfo,"rows-per-page-items":[n.item.annualInfo.length],"content-tag":"v-layout",row:"",wrap:"","hide-actions":""},scopedSlots:e._u([{key:"item",fn:function(n){return t("v-flex",{},[t("v-card",[t("v-card-title",[t("h4",[e._v(e._s(n.item.deadline))])]),e._v(" "),t("v-divider"),e._v(" "),t("v-list",{attrs:{dense:""}},[t("v-list-tile",[t("v-list-tile-content",[e._v(e._s(n.item.totals.days)+"/"+e._s(n.item.totalDays))])],1)],1)],1)],1)}}])}),e._v(" "),t("v-data-iterator",{attrs:{items:[n.item.actualTotalDays],"rows-per-page-items":1,"content-tag":"v-layout",row:"",wrap:"","hide-actions":""},scopedSlots:e._u([{key:"item",fn:function(n){return t("v-flex",{},[t("v-card",[t("v-card-title",[t("h4",[e._v("實際天數")])]),e._v(" "),t("v-divider"),e._v(" "),t("v-list",{attrs:{dense:""}},[t("v-list-tile",[t("v-list-tile-content",[e._v(e._s(n.item))])],1)],1)],1)],1)}}])})],1)])]}}])})],1)],1)],1)};wa._withStripped=!0;var ka={render:wa,staticRenderFns:[]},Ca=ka;var Ta=!1;var Da=t("VU/8")(Aa,Ca,!1,function(e){Ta||t("lRzh")},null,null);Da.options.__file="src\\views\\Report\\AnnualReport.vue",Da.esModule&&Object.keys(Da.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Ea=Da.exports,Fa={name:"LeaveTypeBlock",props:{leaveType:{type:Object}},data:function(){return{}},methods:{generateleaveTypeSummary:Rn.generateleaveTypeSummary}},La=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-list-tile",[t("v-list-tile-content",[t("v-list-tile-title",[e._v(e._s(e.loalocale.shared.leaveTypes[e.leaveType.leaveType]?e.loalocale.shared.leaveTypes[e.leaveType.leaveType]:e.leaveType.leaveType))]),e._v(" "),t("v-list-tile-sub-title",[e._v(e._s(e.generateleaveTypeSummary(e.leaveType.daysNHours)))])],1)],1)};La._withStripped=!0;var Sa={render:La,staticRenderFns:[]},Ia=Sa;var Ra=!1;var Na=t("VU/8")(Fa,Ia,!1,function(e){Ra||t("VZfy")},null,null);Na.options.__file="src\\components\\LeaveTypeBlock.vue",Na.esModule&&Object.keys(Na.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Ma={name:"CompensatoryList",data:function(){return{showAllHavingCompensatoryLT:!1,calendarDate:new Date,search:"",headers:[],employees:[],fullControl:!1,showResigners:!1,compensatoryKeyword:"",systemNotification:{level:"warning",text:"",visible:!1,handler:function(){}}}},components:{"employee-action":C,"system-notification":Ce,"leave-type-block":Na.exports,"page-container":Qn,"calendar-controller":ra},computed:{filteredEmployees:function(){var e=this;return this.employees.filter(function(n){return e.showResigners||n.enabled}).filter(function(n){return e.showAllHavingCompensatoryLT||n.leaveTypes.some(function(n){return new Date(n.date).getFullYear()===e.year})})},year:function(){return this.calendarDate.getFullYear()}},created:function(){this.compensatoryKeyword=ae.compensatory.keyword,this.headers=[{text:this.loalocale.self.employeeID,value:"employeeID",sortable:!1},{text:this.loalocale.self.name,value:"name",sortable:!1},{text:this.loalocale.self.username,value:"username",sortable:!1},{text:this.loalocale.self.dept,value:"dept",sortable:!1},{text:this.loalocale.self.arrivedDate,value:"arrivedDate",sortable:!1},{text:this.loalocale.self.compensatory,value:"compensatory",sortable:!1},{text:this.loalocale.self.action,value:"",sortable:!1}]},mounted:function(){this.getEmployees()},methods:{filterLeaveTypes:function(e){var n=this;return e.filter(function(e){return new Date(e.date).getFullYear()===n.year})},download:function(){var e=hn.exportCompensatory({year:this.year,loginuser:this.loginuser.username,token:this.loginuser.token}),n=document.createElement("iframe");n.src=e,n.style="display:none",document.body.appendChild(n)},getEmployees:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,rn({loginuser:e.loginuser.username,token:e.loginuser.token,year:e.year});case 2:t=n.sent,a=t.data,o=a.employees,s=a.fullControl,e.employees=o,e.fullControl=s;case 8:case"end":return n.stop()}},n,e)}))()},generateleaveTypeSummary:Rn.generateleaveTypeSummary,formatDate:oe.formatDate}},Oa=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("page-container",{attrs:{title:e.loalocale.self.title,icon:"event_available"},on:{notified:function(n){return e.systemNotification=n}}},[t("v-card",{staticClass:"elevation-12"},[t("calendar-controller",{attrs:{annual:"",calendarDate:e.calendarDate},on:{prev:function(n){return e.calendarDate=n},next:function(n){return e.calendarDate=n},tolastest:function(n){return e.calendarDate=n}}},[e.fullControl?t("v-switch",{attrs:{label:e.loalocale.self.showResigners},model:{value:e.showResigners,callback:function(n){e.showResigners=n},expression:"showResigners"}}):e._e(),e._v(" "),e.fullControl?t("v-switch",{attrs:{label:e.loalocale.self.showAllHavingCompensatoryLT},model:{value:e.showAllHavingCompensatoryLT,callback:function(n){e.showAllHavingCompensatoryLT=n},expression:"showAllHavingCompensatoryLT"}}):e._e(),e._v(" "),t("v-text-field",{attrs:{"append-icon":"search",label:e.loalocale.self.search,"hide-details":""},model:{value:e.search,callback:function(n){e.search=n},expression:"search"}}),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{on:{click:e.download}},[t("v-icon",[e._v("get_app")]),e._v("\n        "+e._s(e.loalocale.self.download)+"\n      ")],1)],1),e._v(" "),t("v-data-table",{attrs:{"must-sort":"",search:e.search,headers:e.headers,items:e.filteredEmployees,"item-key":"_id","rows-per-page-items":[{text:"$vuetify.dataIterator.rowsPerPageAll",value:-1}]},scopedSlots:e._u([{key:"items",fn:function(n){return[t("tr",{class:n.item.enabled?"":"disabled",on:{click:function(e){n.expanded=!n.expanded}}},[t("td",[e._v(e._s(n.item.employeeID))]),e._v(" "),t("td",[e._v(e._s(n.item.name))]),e._v(" "),t("td",[e._v(e._s(n.item.username))]),e._v(" "),t("td",{staticClass:"min-width-120"},[e._v(e._s(n.item.dept))]),e._v(" "),t("td",{staticClass:"min-width-120"},[e._v(e._s(e.formatDate(n.item.arrivedDate)))]),e._v(" "),t("td",{staticClass:"min-width-160"},[e._v(e._s(e.generateleaveTypeSummary(n.item.totals)))]),e._v(" "),t("td",{staticClass:"min-width-120"},[t("employee-action",{key:n.item._id,attrs:{employee:n.item,query:e.compensatoryKeyword}})],1)])]}},{key:"expand",fn:function(n){return[t("v-card",{attrs:{flat:""}},[n.item.enabled?t("v-list",e._l(e.filterLeaveTypes(n.item.leaveTypes),function(e){return t("leave-type-block",{key:e._id,attrs:{employee:n.item,leaveType:e}})}),1):e._e()],1)]}}])})],1),e._v(" "),t("system-notification",{on:{close:function(n){e.systemNotification.visible=!1}},model:{value:e.systemNotification,callback:function(n){e.systemNotification=n},expression:"systemNotification"}},[t("div",[e._v(e._s(e.systemNotification.text))])])],1)};Oa._withStripped=!0;var $a={render:Oa,staticRenderFns:[]},Ba=$a;var Ua=!1;var Ha=t("VU/8")(Ma,Ba,!1,function(e){Ua||t("eYjM")},"data-v-2ef9cc58",null);Ha.options.__file="src\\views\\CompensatoryList.vue",Ha.esModule&&Object.keys(Ha.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var ja=Ha.exports,Pa={name:"Login",data:function(){return{showingPWD:!1,valid:!1,username:"",rules:{username:[],password:[]},password:"",status:{failed:!1,message:""},config:ze}},created:function(){var e=this;this.rules.username=[function(n){return!!n||e.loalocale.self.noempty},function(n){return/^[a-zA-Z0-9/.]+$/.test(n)||e.loalocale.self.notengname}],this.rules.password=[function(n){return!!n||e.loalocale.self.noempty}]},mounted:function(){this.valid=!1},methods:{login:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s,l,r;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.$refs.form.validate()){n.next=10;break}return n.next=3,Ve({username:e.username,password:e.password});case 3:t=n.sent,a=t.data,o=a.success,s=a.loginuser,l=a.message,r=a.logs,o?(e.$cookie.set("loasystem.loginuser",rt()(s),{expires:ae.cookie.expiredPeriod.oneHour}),e.$router.push({name:"List",params:{logs:r}})):e.status={failed:!0,message:oe.lookUpCustomMessage(l)};case 10:case"end":return n.stop()}},n,e)}))()}}},za=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-app",[t("v-content",[t("v-container",{attrs:{fluid:"","fill-height":""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[t("v-card",{staticClass:"elevation-12"},[t("v-toolbar",{staticClass:"theme"},[t("v-tooltip",{attrs:{bottom:""}},[t("v-toolbar-title",{attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(e.loalocale.self.title))]),e._v(" "),t("span",[e._v(e._s(e.loalocale.self.tooltip))])],1),e._v(" "),t("v-img",{attrs:{position:"right",src:"./static/logo.svg","aspect-ratio":"6",contain:""}})],1),e._v(" "),t("v-card-text",[t("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(n){e.valid=n},expression:"valid"}},[t("v-text-field",{attrs:{"prepend-icon":"person",name:"username",label:e.loalocale.self.username,type:"text",rules:e.rules.username,required:"",autocomplete:"username"},model:{value:e.username,callback:function(n){e.username=n},expression:"username"}}),e._v(" "),t("v-text-field",{attrs:{"append-icon":e.showingPWD?"visibility_off":"visibility","prepend-icon":"lock",name:"password",label:e.loalocale.self.password,type:e.showingPWD?"text":"password",rules:e.rules.password,required:"",autocomplete:"current-password"},on:{"click:append":function(n){e.showingPWD=!e.showingPWD},keyup:function(n){return"keyCode"in n&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.login(n)}},model:{value:e.password,callback:function(n){e.password=n},expression:"password"}})],1),e._v(" "),t("v-alert",{attrs:{outline:"",type:"error"},model:{value:e.status.failed,callback:function(n){e.$set(e.status,"failed",n)},expression:"status.failed"}},[e._v(e._s(e.status.message))]),e._v(" "),e.config.dev?t("v-chip",{attrs:{label:"",outline:"",color:"primary"}},[t("v-icon",{attrs:{left:""}},[e._v("storage")]),e._v("\n                "+e._s(e.config.API_URL.replace("http://","").replace("https://",""))+"\n              ")],1):e._e()],1),e._v(" "),t("v-card-actions",[t("v-tooltip",{attrs:{bottom:""}},[t("a",{attrs:{slot:"activator",href:"https://qr-official.line.me/sid/L/319dfdjs.png",target:"_blank"},slot:"activator"},[t("v-img",{attrs:{contain:"",height:"50",width:"50",src:"../static/LINE_APP.png"}})],1),e._v(" "),t("span",[e._v("快加入好友，立即掌握請假與簽核訊息")])]),e._v(" "),t("v-spacer"),e._v(" "),t("v-tooltip",{attrs:{bottom:""}},[t("a",{staticStyle:{"text-decoration":"none"},attrs:{slot:"activator",href:"http://10.110.1.200:3001/s/BJabRIhsm",target:"_blank"},slot:"activator"},[t("v-btn",{attrs:{icon:"",large:""}},[t("v-icon",{attrs:{large:""}},[e._v("import_contacts")])],1)],1),e._v(" "),t("span",[e._v("Infostrum 請假系統手冊")])]),e._v(" "),t("v-btn",{class:e.valid?"theme":"disabled",attrs:{disabled:!e.valid},on:{click:e.login}},[e._v(e._s(e.loalocale.self.login))])],1)],1)],1)],1)],1)],1)],1)};za._withStripped=!0;var Ya={render:za,staticRenderFns:[]},Ga=Ya;var Wa=!1;var Za=t("VU/8")(Pa,Ga,!1,function(e){Wa||t("m8HG")},"data-v-28b9a507",null);Za.options.__file="src\\views\\Login.vue",Za.esModule&&Object.keys(Za.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var qa=Za.exports,Va=t("fZjL"),Ka=t.n(Va),Ja={name:"LeaveTypeInfo",props:{},data:function(){return{show:!1}},computed:{leaveTypeInfos:function(){var e=this.loalocale.self.leaveTypes;return Ka()(e).map(function(n){var t=e[n],a=oe.lookUpLeaveTypeIconNClass(n);return y()({},t,{class:a.class,icon:a.icon})})}},methods:{}},Qa=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e._l(e.leaveTypeInfos,function(n){return t("v-card",{key:n.name},[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs3:""}},[t("v-card-title",{attrs:{"primary-title":""}},[t("div",{class:[n.class,"circle-icon","float-left"]},[t("v-icon",{attrs:{color:"white"}},[e._v(e._s(n.icon))])],1),e._v(" "),t("h3",{staticClass:"headline"},[e._v(e._s(n.name))])])],1),e._v(" "),t("v-flex",{attrs:{xs9:""}},["string"==typeof n.granted?["string"==typeof n.detailInfo?[t("v-card-title",[t("span",{staticClass:"highlight"},[e._v(e._s(n.granted))]),e._v("\n              |"+e._s(n.detailInfo)+"\n            ")])]:[t("v-card-title",{staticClass:"highlight"},[e._v(e._s(n.granted))]),e._v(" "),e._l(n.detailInfo,function(n,a){return t("v-card-title",{key:a},[e._v(e._s(n))])})]]:e._l(n.granted,function(a,o){return t("span",{key:o},["string"==typeof n.detailInfo[o]?[t("v-card-title",[t("span",{staticClass:"highlight"},[e._v(e._s(a))]),e._v("\n                |"+e._s(n.detailInfo[o])+"\n              ")])]:[t("v-card-title",{staticClass:"highlight"},[e._v(e._s(a))]),e._v(" "),e._l(n.detailInfo[o],function(n,a){return t("v-card-title",{key:a},[e._v(e._s(n))])})]],2)})],2),e._v(" "),t("v-flex",{attrs:{xs12:""}},[t("v-card-actions",[t("span",{staticClass:"highlight"},[e._v(e._s(n.others.paidInfo))])]),e._v(" "),t("v-card-actions",[t("span",[e._v(e._s(n.others.reference))])])],1)],1),e._v(" "),t("v-divider")],1)}),e._v(" "),t("v-card",[t("v-layout",[t("v-flex",{attrs:{xs12:""}},e._l(e.loalocale.self.otherInfos,function(n){return t("v-card-title",{key:n,staticClass:"remarks"},[e._v(e._s(n))])}),1)],1)],1)],2)};Qa._withStripped=!0;var Xa={render:Qa,staticRenderFns:[]},eo=Xa;var no=!1;var to=t("VU/8")(Ja,eo,!1,function(e){no||t("K0/r")},"data-v-40132906",null);to.options.__file="src\\views\\LeaveTypeInfo.vue",to.esModule&&Object.keys(to.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var ao=to.exports,oo=t("Gu7T"),so=t.n(oo),lo={name:"LeaveForm",props:{dates:{type:Array,default:function(){return[]}},leaveType:{type:Object,default:function(){return{class:"",icon:"",title:"",halfHoursEnabled:!1}}},allowedDates:{type:Function}},data:function(){return{dialog:{date:!1,startFrom:!1,endTo:!1},apply:{created:null,startFrom:null,endTo:null,dates:[],totalHours:0,remarks:"",remainings:{days:0,hours:0}}}},computed:{valid:function(){return this.apply.dates.length>0&&!!this.leaveType.title}},mounted:function(){this.apply.dates=this.dates},methods:{calculateTotals:function(e,n){if(e.save(this.apply[n]),!oe.checkIsHalfHourUnit(this.apply.startFrom,this.apply.endTo)){if(!this.apply.endTo.startsWith("00:"))return this.apply.totalHours=0,void(this.apply.endTo=this.apply.startFrom=null);if(this.apply.endTo=this.apply.endTo.replace("00:","24:"),!oe.checkIsHalfHourUnit(this.apply.startFrom,this.apply.endTo))return this.apply.totalHours=0,void(this.apply.endTo=this.apply.startFrom=null)}this.apply.totalHours=oe.calculateTotalHours(this.apply.startFrom,this.apply.endTo),-1===this.apply.totalHours&&(this.apply.totalHours=0,this.apply.endTo=this.apply.startFrom=null)},checkDates:function(e,n){this.apply[n]=this.apply[n].slice(0,5).sort(),e.save(this.apply[n])},clear:function(){this.apply.startFrom=null,this.apply.endTo=null,this.apply.totalHours=0},submit:function(){this.$emit("submit",this.apply),this.apply={created:null,startFrom:null,endTo:null,dates:[],totalHours:0,remarks:"",remainings:{days:0,hours:0}}}},watch:{dates:function(){this.apply.dates=this.dates}}},ro=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:""}},[t("v-card",{attrs:{id:"apply"}},[t("v-toolbar",{class:e.leaveType.class},[t("h3",[e._v(e._s(e.leaveType.title))]),e._v(" "),t("v-spacer"),e._v(" "),t("v-icon",{class:e.leaveType.class,attrs:{title:e.leaveType.title}},[e._v(e._s(e.leaveType.icon))])],1),e._v(" "),t("v-card-text",[t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:""}},[t("v-dialog",{ref:"dialog",attrs:{disabled:!e.leaveType.title,"close-on-content-click":!1,lazy:"",width:"290px",persistent:""},model:{value:e.dialog.date,callback:function(n){e.$set(e.dialog,"date",n)},expression:"dialog.date"}},[t("v-combobox",{attrs:{slot:"activator",multiple:"",chips:"","small-chips":"",label:e.loalocale.self.leaveDates,readonly:""},slot:"activator",model:{value:e.apply.dates,callback:function(n){e.$set(e.apply,"dates",n)},expression:"apply.dates"}}),e._v(" "),t("v-date-picker",{attrs:{"allowed-dates":e.allowedDates,multiple:"","no-title":"",scrollable:""},model:{value:e.apply.dates,callback:function(n){e.$set(e.apply,"dates",n)},expression:"apply.dates"}},[t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"theme",attrs:{flat:""},on:{click:function(n){return e.checkDates(e.$refs.dialog,"dates")}}},[e._v("OK")])],1)],1)],1),e._v(" "),e.leaveType.halfHoursEnabled&&1===e.apply.dates.length?t("v-flex",{attrs:{xs6:""}},[t("v-dialog",{ref:"startFromDialog",attrs:{"close-on-content-click":!1,lazy:"",width:"290px",persistent:""},model:{value:e.dialog.startFrom,callback:function(n){e.$set(e.dialog,"startFrom",n)},expression:"dialog.startFrom"}},[t("v-text-field",{attrs:{slot:"activator",label:e.loalocale.self.from,"prepend-icon":"access_time"},slot:"activator",model:{value:e.apply.startFrom,callback:function(n){e.$set(e.apply,"startFrom",n)},expression:"apply.startFrom"}}),e._v(" "),t("v-time-picker",{attrs:{format:"24hr"},model:{value:e.apply.startFrom,callback:function(n){e.$set(e.apply,"startFrom",n)},expression:"apply.startFrom"}},[t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"theme",attrs:{flat:""},on:{click:function(n){return e.calculateTotals(e.$refs.startFromDialog,"startFrom")}}},[e._v("OK")])],1)],1)],1):e._e(),e._v(" "),e.leaveType.halfHoursEnabled&&1===e.apply.dates.length?t("v-flex",{attrs:{xs5:""}},[t("v-dialog",{ref:"endToDialog",attrs:{lazy:"",width:"290px"},model:{value:e.dialog.endTo,callback:function(n){e.$set(e.dialog,"endTo",n)},expression:"dialog.endTo"}},[t("v-text-field",{attrs:{slot:"activator",label:e.loalocale.self.to},slot:"activator",model:{value:e.apply.endTo,callback:function(n){e.$set(e.apply,"endTo",n)},expression:"apply.endTo"}}),e._v(" "),t("v-time-picker",{attrs:{format:"24hr"},model:{value:e.apply.endTo,callback:function(n){e.$set(e.apply,"endTo",n)},expression:"apply.endTo"}},[t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"theme",attrs:{flat:""},on:{click:function(n){return e.calculateTotals(e.$refs.endToDialog,"endTo")}}},[e._v("OK")])],1)],1)],1):e._e(),e._v(" "),e.leaveType.halfHoursEnabled&&1===e.apply.dates.length?t("v-flex",{attrs:{xs1:""}},[t("v-btn",{attrs:{icon:"",ripple:""},on:{click:e.clear}},[t("v-icon",{attrs:{size:"16"}},[e._v("clear")])],1)],1):e._e(),e._v(" "),e.leaveType.halfHoursEnabled&&1===e.apply.dates.length?t("v-flex",{attrs:{xs6:""}},[t("v-text-field",{attrs:{label:e.loalocale.self.totals,readonly:""},model:{value:e.apply.totalHours,callback:function(n){e.$set(e.apply,"totalHours",e._n(n))},expression:"apply.totalHours"}})],1):e._e(),e._v(" "),e.leaveType.halfHoursEnabled&&1===e.apply.dates.length?t("v-flex",{attrs:{xs6:""}},[t("v-text-field",{attrs:{value:e.loalocale.self.hour,readonly:""}})],1):e._e(),e._v(" "),t("v-flex",{attrs:{xs12:""}},[t("v-text-field",{attrs:{disabled:!e.leaveType.title,label:e.loalocale.self.remarks},model:{value:e.apply.remarks,callback:function(n){e.$set(e.apply,"remarks",n)},expression:"apply.remarks"}})],1),e._v(" "),t("v-flex",{attrs:{xs12:""}},[t("v-btn",{class:e.valid?"theme":"disabled",attrs:{disabled:!e.valid},on:{click:e.submit}},[t("v-icon",[e._v("move_to_inbox")]),e._v("\n              "+e._s(e.loalocale.self.take)+"\n            ")],1)],1)],1)],1)],1)],1)],1)};ro._withStripped=!0;var io={render:ro,staticRenderFns:[]},co=io;var uo=!1;var po=t("VU/8")(lo,co,!1,function(e){uo||t("TuQ+")},null,null);po.options.__file="src\\components\\LeaveForm.vue",po.esModule&&Object.keys(po.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var mo=po.exports,vo={name:"LeaveContainer",props:{leaves:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1}},data:function(){return{}},methods:{getTitle:function(e,n,t,a){return e.length>1?e.join(", "):n&&t?e[0]+" - "+n+" ~ "+t+" ("+a+" "+this.loalocale.self.hours+")":e[0]},getAgent:function(e){return e?this.loalocale.self.remarks+": "+e:""},remove:function(e){this.$emit("remove",e)}}},fo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-flex",[t("v-list",e._l(e.leaves,function(n){return t("v-list-tile",{key:n.index,attrs:{avatar:""}},[t("v-list-tile-avatar",[t("v-icon",{class:n.class},[e._v(e._s(n.icon))])],1),e._v(" "),t("v-list-tile-content",[t("v-list-tile-title",[e._v(e._s(n.title))]),e._v(" "),t("v-tooltip",{attrs:{bottom:""}},[t("v-list-tile-sub-title",{attrs:{slot:"activator"},slot:"activator"},[e._v(e._s(e.getTitle(n.apply.dates,n.apply.startFrom,n.apply.endTo,n.apply.totalHours)))]),e._v("\n          "+e._s(e.getTitle(n.apply.dates,n.apply.startFrom,n.apply.endTo,n.apply.totalHours))+"\n        ")],1),e._v(" "),n.apply.remarks?t("v-list-tile-sub-title",[e._v(e._s(e.getAgent(n.apply.remarks)))]):e._e()],1),e._v(" "),!e.readonly||n.countdown?t("v-list-tile-avatar",[t("v-tooltip",{attrs:{bottom:""}},[t("v-chip",{staticClass:"theme",attrs:{slot:"activator","text-color":"white"},slot:"activator"},[e._v(e._s(n.apply.remainings.days))]),e._v(" "),t("span",[e._v(e._s(e.loalocale.self.remainings)+" "+e._s(n.apply.remainings.days)+" "+e._s(e.loalocale.self.days))]),e._v(" "),n.halfHoursEnabled?t("span",[e._v(e._s(n.apply.remainings.hours)+" "+e._s(e.loalocale.self.hours))]):e._e(),e._v(" "),t("br"),e._v(" "),t("span",[e._v(e._s(e.loalocale.self.deadline)+" "+e._s(n.deadline))])],1)],1):e._e(),e._v(" "),t("v-list-tile-avatar",[t("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(t){return e.remove(n)}}},[t("v-icon",{attrs:{size:"16"}},[e._v("clear")])],1)],1)],1)}),1)],1)};fo._withStripped=!0;var yo={render:fo,staticRenderFns:[]},ho=yo;var go=!1;var _o=t("VU/8")(vo,ho,!1,function(e){go||t("f3Lv")},null,null);_o.options.__file="src\\components\\LeaveContainer.vue",_o.esModule&&Object.keys(_o.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var bo={name:"LeaveTakingBlock",components:{"leave-type-container":Zt,"leave-form":mo,"leave-container":_o.exports},props:{date:{type:String},fullControl:{type:Boolean,default:!1},isEditMode:{type:Boolean,default:!0},leaveTypes:{type:Array,default:function(){return[]}},employeeId:{type:String,default:""}},data:function(){return{systemNotification:{level:"warning",text:"",visible:!1},selectedLT:{class:"",icon:"",title:"",halfHoursEnabled:!1},formattedLeaveTypes:[],records:[]}},computed:{availableLTs:function(){var e=this;return this.formattedLeaveTypes.filter(function(n){return!e.isEditMode||!e.isLTAvailable(n)&&!n.stashed})},unavailableLTs:function(){var e=this;return this.formattedLeaveTypes.filter(function(n){return e.isLTAvailable(n)})}},mounted:function(){this.formattedLeaveTypes=this.accumulateLTsCosumes(this.formatLTs(this.leaveTypes))},methods:{isLTAvailable:function(e){return e.name.startsWith(ae.compensatory.keyword)&&e.consumes.days===e.totals.days&&e.consumes.halfHours===e.totals.halfHours&&oe.formatDate(e.deadline)<=oe.formatDate("now")},updateLOA:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s,l;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.records.map(function(e){return{appliedDate:new Date,startFrom:e.apply.startFrom,endTo:e.apply.endTo,leaveType:e.name,dates:e.apply.dates.map(function(e){return new Date(e)}),remarks:e.apply.remarks,signings:[],totals:{days:0===e.apply.totalHours?e.apply.dates.length:0,halfHours:2*e.apply.totalHours}}}),n.next=3,en({loginuser:e.loginuser.username,token:e.loginuser.token,id:e.employeeId,records:t,activatedLeaveTypes:e.undoAccumulateLTsCosumes(e.formattedLeaveTypes,t).map(function(e){return Pe()({},e,{consumes:{days:e.consumes.days,halfHours:2*e.consumes.hours}})})});case 3:a=n.sent,o=a.data,s=o.success,l=o.message,e.reset(),e.$emit("taken",s,l);case 9:case"end":return n.stop()}},n,e)}))()},accumulateLTsCosumes:function(e){var n=e.find(function(e){return"familyCare"===e.name});n&&(e.find(function(e){return"personal"===e.name}).consumes.days+=n.consumes.days);return e},undoAccumulateLTsCosumes:function(e,n){var t=e.find(function(e){return"familyCare"===e.name});if(t){var a=e.find(function(e){return"personal"===e.name});a.consumes.days-=t.consumes.days;var o=n.find(function(e){return"familyCare"===e.leaveType});o&&o.dates&&o.dates.length>0&&(a.consumes.days+=o.dates.length)}return e},formatLTs:function(e){var n=this,t=JSON.parse(rt()(ae.leaveTypes));return e.forEach(function(e){var n=t.find(function(n){return n.name===e.name});if(n)n.enabled=e.enabled,n.consumes={days:e.consumes.days,hours:e.consumes.halfHours?e.consumes.halfHours/2:0},n.totals={days:e.totals.days,hours:e.totals.halfHours?e.totals.halfHours/2:0},n.deadline=oe.formatDate(e.deadline);else{var a=ae.customLeaveType;t.push(Pe()({},a,{index:t.length,stashed:e.stashed,enabled:!0,title:e.name,name:e.name,consumes:{days:e.consumes.days,hours:e.consumes.halfHours?e.consumes.halfHours/2:0},totals:{days:e.totals.days,hours:e.totals.halfHours?e.totals.halfHours/2:0},deadline:oe.formatDate(e.deadline)}))}}),t.filter(function(e){return n.fullControl||e.enabled})},pick1LT:function(e){this.$emit("picked",e),this.selectedLT=e},remove1L:function(e){var n=this.records.find(function(n){return n.index===e.index}),t=this.formattedLeaveTypes.find(function(e){return e.name===n.name});if(0===n.apply.totalHours)t.consumes.days-=n.apply.dates.length;else{var a=8*t.consumes.days+t.consumes.hours;a-=n.apply.totalHours,t.consumes.days=Math.floor(a/8),t.consumes.hours=a%8}this.records=this.records.filter(function(n){return n.index!==e.index})},take1L:function(e){if(1===e.dates.length)if(this.selectedLT.totals.days>0){if(this.selectedLT.totals.days-this.selectedLT.consumes.days==1&&e.totalHours>=8)return this.systemNotification.text=this.loalocale.self.runOutQotaOfLeave+"(當可申請天數剩下 1 天時, 申請時數 > 9小時)",this.systemNotification.visible=!0,void this.$emit("notified",this.systemNotification)}else if(this.selectedLT.consumes.hours+e.totalHours>this.selectedLT.totals.hours)return this.systemNotification.text=this.loalocale.self.runOutQotaOfLeave+"(已使用時數 + 申請時數 > 總時數)",this.systemNotification.visible=!0,void this.$emit("notified",this.systemNotification);if(e.startFrom&&e.endTo);else if(this.selectedLT.consumes.days+e.dates.length>this.selectedLT.totals.days)return this.systemNotification.text=this.loalocale.self.runOutQotaOfLeave+"(已使用天數 + 申請天數 > 總天數)",this.systemNotification.visible=!0,void this.$emit("notified",this.systemNotification);var n=this.formattedLeaveTypes.find(function(e){return"personal"===e.name}),t=this.formattedLeaveTypes.find(function(e){return"familyCare"===e.name});if(n&&t&&["personal","familyCare"].includes(this.selectedLT.name)&&8*n.consumes.days+n.consumes.hours+(1===e.dates.length&&e.totalHours>0?e.totalHours:8*e.dates.length)>8*n.totals.days)return this.systemNotification.text=this.loalocale.self.runOutQotaOfLeave+"D",this.systemNotification.visible=!0,void this.$emit("notified",this.systemNotification);if(this.selectedLT.halfHoursEnabled){this.selectedLT.consumes.days+=1===e.dates.length&&0===e.totalHours?e.dates.length:0,this.selectedLT.consumes.hours+=e.totalHours,this.selectedLT.consumes.hours>=8&&(this.selectedLT.consumes.days++,this.selectedLT.consumes.hours-=8);var a=8*this.selectedLT.totals.days+this.selectedLT.totals.hours-8*this.selectedLT.consumes.days-this.selectedLT.consumes.hours;e.remainings.days=Math.floor(a/8),e.remainings.hours=a%8}else this.selectedLT.consumes.days+=e.dates.length,e.remainings.days=this.selectedLT.totals.days-this.selectedLT.consumes.days;this.records.push(Pe()({apply:Pe()({},e),index:this.records.length},this.selectedLT))},allowedDates:function(e){var n=new Date(e),t=this.formattedLeaveTypes.find(function(e){return"annualPreRequest"===e.name}),a=this.formattedLeaveTypes.find(function(e){return"annual"===e.name});return!a||!t||this.selectedLT.name!==t.name||new Date(a.deadline)<n},cancel:function(){this.reset(),this.$emit("cancel")},reset:function(){this.selectedLT={class:"",icon:"",title:"",halfHoursEnabled:!1},this.records=[]}},watch:{leaveTypes:function(){this.formattedLeaveTypes=this.accumulateLTsCosumes(this.formatLTs(this.leaveTypes))}}},xo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-app",{attrs:{id:"detail"}},[t("v-container",{attrs:{fluid:"","fill-height":""}},[t("v-layout",{attrs:{"align-center":"","justify-center":""}},[t("v-flex",[t("v-form",{ref:"form",attrs:{"lazy-validation":""}},[t("leave-type-container",{attrs:{leaveTypes:e.availableLTs,readonly:!e.fullControl,helper:""},on:{pickOne:e.pick1LT}}),e._v(" "),t("leave-form",{attrs:{dates:e.date?[e.date]:[],"leave-type":e.selectedLT,"allowed-dates":e.allowedDates},on:{submit:e.take1L}}),e._v(" "),t("leave-container",{attrs:{leaves:e.records,readonly:!e.fullControl},on:{remove:e.remove1L}}),e._v(" "),t("v-layout",{attrs:{row:"",wrap:""}},[t("v-flex",{attrs:{xs12:""}},[e.isEditMode?t("v-btn",{class:0==e.records.length?["float-right"]:["theme","float-right"],attrs:{disabled:0==e.records.length},on:{click:e.updateLOA}},[e._v(e._s(e.loalocale.self.save))]):e._e(),e._v(" "),t("v-btn",{on:{click:e.cancel}},[e._v(e._s(e.loalocale.self.cancel))])],1)],1)],1)],1)],1)],1)],1)};xo._withStripped=!0;var Ao={render:xo,staticRenderFns:[]},wo=Ao;var ko=!1;var Co=t("VU/8")(bo,wo,!1,function(e){ko||t("v0HR")},"data-v-2ef9874a",null);Co.options.__file="src\\components\\LeaveTakingBlock.vue",Co.esModule&&Object.keys(Co.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var To=Co.exports,Do={name:"LeaveInfo",props:{on:{type:Object,default:function(){return{}}},employee:{type:Object,default:function(){return{}}},record:{type:Object,default:function(){return{}}},color:{type:String,default:""},textColor:{type:String,default:""},icon:{type:Boolean,default:!0}},data:function(){return{whiteTextColor:"white"}},computed:{pass:function(){return this.record.pass},allDay:function(){return this.record.totals.days>0},taker:function(){return this.employee.username},lt:function(){return oe.lookUpLeaveType(this.record.leaveType)}},methods:{}},Eo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-chip",e._g({class:{flash:!e.pass},attrs:{label:e.allDay,color:e.color?e.color:e.lt.color,"text-color":e.pass?e.textColor?e.textColor:e.whiteTextColor:e.color?e.color:e.lt.color,outline:!e.pass}},e.on),[e.icon?t("v-avatar",{attrs:{tile:e.allDay,color:e.lt.color}},[t("v-icon",{attrs:{color:e.whiteTextColor}},[e._v(e._s(e.lt.icon))])],1):e._e(),e._v("\n  "+e._s(e.taker)+"\n")],1)};Eo._withStripped=!0;var Fo={render:Eo,staticRenderFns:[]},Lo=Fo;var So=!1;var Io=t("VU/8")(Do,Lo,!1,function(e){So||t("ZPO3")},"data-v-56b47a9d",null);Io.options.__file="src\\components\\LeaveInfo.vue",Io.esModule&&Object.keys(Io.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Ro=Io.exports,No={name:"LeaveDetailInfo",components:{"signing-block":ge},props:{employee:{type:Object,default:function(){return{}}},record:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{title:function(){return this.employee.name+"("+this.employee.username+") "+Rn.generateSummary({leaveType:this.record.leaveType,days:this.record.totals.days,hours:this.record.totals.halfHours/2})},taken:function(){return this.record.dates.map(function(e){return oe.formatDate(e)}).join(", ")},applied:function(){return oe.formatDate(this.record.appliedDate)},remarks:function(){return this.record.remarks},timeRange:function(){return this.record.startFrom+"-"+this.record.endTo},signable:function(){return this.record.signers.length>0},allDay:function(){return this.record.totals.days>0}},methods:{sign:function(e,n,t){var a=this;return g()(v.a.mark(function o(){var s,l,r,i;return v.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,an({loginuser:a.loginuser.username,token:a.loginuser.token,id:e,recordID:n,pass:t});case 2:s=o.sent,l=s.data,r=l.success,i=l.message,a.$emit("signed",r,i);case 7:case"end":return o.stop()}},o,a)}))()}}},Mo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-card",{attrs:{flat:""}},[t("v-tooltip",{attrs:{bottom:""}},[t("v-toolbar",{staticClass:"theme",attrs:{slot:"activator"},slot:"activator"},[t("v-toolbar-title",[e._v(e._s(e.title))]),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{icon:""},on:{click:function(n){return n.stopPropagation(),e.$emit("close")}}},[t("v-icon",{attrs:{color:"white"}},[e._v("clear")])],1)],1),e._v("\n    "+e._s(e.title)+"\n  ")],1),e._v(" "),t("v-card-title",[t("div",[t("div",[e._v(e._s(e.loalocale.self.applied)+" "+e._s(e.applied))]),e._v(" "),t("div",[e._v("\n        "+e._s(e.loalocale.self.taken)+" "+e._s(e.taken)+"\n        "),e.allDay?e._e():t("span",[e._v(e._s(e.timeRange))])]),e._v(" "),t("div",[e._v(e._s(e.loalocale.self.remarks)+" "+e._s(e.remarks?e.remarks:e.loalocale.self.defaultAgent))])])]),e._v(" "),e.signable?t("v-card-actions",[t("signing-block",{attrs:{employee:e.employee,record:e.record,small:""},on:{sign:e.sign}})],1):e._e()],1)};Mo._withStripped=!0;var Oo={render:Mo,staticRenderFns:[]},$o=Oo;var Bo=!1;var Uo=t("VU/8")(No,$o,!1,function(e){Bo||t("JnC2")},null,null);Uo.options.__file="src\\components\\LeaveDetailInfo.vue",Uo.esModule&&Object.keys(Uo.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Ho=Uo.exports,jo={name:"Tour",props:{steps:{type:Array,default:function(){return[]}}},data:function(){return{options:{useKeyboardNavigation:!1,labels:{buttonSkip:"",buttonPrevious:"",buttonNext:"",buttonStop:""}}}},mounted:function(){this.options.labels={buttonSkip:this.loalocale.self.skip,buttonPrevious:this.loalocale.self.previous,buttonNext:this.loalocale.self.next,buttonStop:this.loalocale.self.finish}},methods:{tour:function(){this.$tours.tour.start()}}},Po=function(){var e=this.$createElement,n=this._self._c||e;return n("div",[n("v-btn",{attrs:{bottom:"",right:"",icon:""},on:{click:this.tour}},[n("v-icon",{attrs:{color:"blue-grey"}},[this._v("info")])],1),this._v(" "),n("v-tour",{attrs:{name:"tour",steps:this.steps,options:this.options}})],1)};Po._withStripped=!0;var zo={render:Po,staticRenderFns:[]},Yo=zo;var Go=!1;var Wo=t("VU/8")(jo,Yo,!1,function(e){Go||(t("BpHh"),t("OSPh"))},"data-v-16a47b20",null);Wo.options.__file="src\\components\\Tour.vue",Wo.esModule&&Object.keys(Wo.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var Zo=function(e){for(var n,t=[],a=["#F44336","#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#E53935","#D32F2F","#C62828","#B71C1C","#FF8A80","#FF5252","#FF1744","#D50000","#E91E63","#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#D81B60","#C2185B","#AD1457","#880E4F","#FF80AB","#FF4081","#F50057","#C51162","#9C27B0","#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#8E24AA","#7B1FA2","#6A1B9A","#4A148C","#EA80FC","#E040FB","#D500F9","#AA00FF","#673AB7","#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#5E35B1","#512DA8","#4527A0","#311B92","#B388FF","#7C4DFF","#651FFF","#6200EA","#3F51B5","#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3949AB","#303F9F","#283593","#1A237E","#8C9EFF","#536DFE","#3D5AFE","#304FFE","#2196F3","#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#1E88E5","#1976D2","#1565C0","#0D47A1","#82B1FF","#448AFF","#2979FF","#2962FF","#03A9F4","#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#039BE5","#0288D1","#0277BD","#01579B","#80D8FF","#40C4FF","#00B0FF","#0091EA","#00BCD4","#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00ACC1","#0097A7","#00838F","#006064","#84FFFF","#18FFFF","#00E5FF","#00B8D4","#009688","#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#00897B","#00796B","#00695C","#004D40","#A7FFEB","#64FFDA","#1DE9B6","#00BFA5","#4CAF50","#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#43A047","#388E3C","#2E7D32","#1B5E20","#B9F6CA","#69F0AE","#00E676","#00C853","#8BC34A","#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#7CB342","#689F38","#558B2F","#33691E","#CCFF90","#B2FF59","#76FF03","#64DD17","#CDDC39","#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#C0CA33","#AFB42B","#9E9D24","#827717","#F4FF81","#EEFF41","#C6FF00","#AEEA00","#FFEB3B","#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FDD835","#FBC02D","#F9A825","#F57F17","#FFFF8D","#FFFF00","#FFEA00","#FFD600","#FFC107","#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFB300","#FFA000","#FF8F00","#FF6F00","#FFE57F","#FFD740","#FFC400","#FFAB00","#FF9800","#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FB8C00","#F57C00","#EF6C00","#E65100","#FFD180","#FFAB40","#FF9100","#FF6D00","#FF5722","#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#F4511E","#E64A19","#D84315","#BF360C","#FF9E80","#FF6E40","#FF3D00","#DD2C00","#795548","#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#6D4C41","#5D4037","#4E342E","#3E2723","#607D8B","#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#546E7A","#455A64","#37474F","#263238","#9E9E9E","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#757575","#616161","#424242","#212121"];e>t.length;){var o=a[(n=a.length,Math.floor(Math.random()*Math.floor(n)))];t.includes(o)||t.push(o)}return t.map(function(e){return{color:e,textColor:function(e){return!["#F44336","#E53935","#D32F2F","#C62828","#B71C1C","#E91E63","#D81B60","#C2185B","#AD1457","#880E4F","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C","#673AB7","#5E35B1","#512DA8","#4527A0","#311B92","#3F51B5","#3949AB","#303F9F","#283593","#1A237E","#2196F3","#1E88E5","#1976D2","#1565C0","#0D47A1","#03A9F4","#039BE5","#0288D1","#0277BD","#01579B","#00BCD4","#00ACC1","#0097A7","#00838F","#006064","#009688","#00897B","#00796B","#00695C","#004D40","#4CAF50","#43A047","#388E3C","#2E7D32","#1B5E20","#8BC34A","#7CB342","#689F38","#558B2F","#33691E","#CDDC39","#C0CA33","#AFB42B","#9E9D24","#827717","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17","#FFC107","#FFB300","#FFA000","#FF8F00","#FF6F00","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100","#FF5722","#F4511E","#E64A19","#D84315","#BF360C","#795548","#6D4C41","#5D4037","#4E342E","#3E2723","#607D8B","#546E7A","#455A64","#37474F","#263238","#9E9E9E","#757575","#616161","#424242","#212121","#000000"].includes(e)}(e)?"black":"white"}})};var qo={name:"LeaveCalendar",components:{"page-container":Qn,"employee-info":He,"leave-taking-block":To,"system-notification":Ce,"calendar-controller":ra,"leave-info":Ro,"leave-detail-info":Ho,tour:Wo.exports},data:function(){return{calendarDate:"2021-02-01",leaves:[],year:"",month:"",dialog:!1,showOnlyYours:!1,showOnlyUsername:!1,notASigner:!1,report:[],leaveTypes:[],leaveTypes_raw:[],systemNotification:{level:"warning",text:"",visible:!1,handler:function(){}},selectedDate:"",loading:!1,steps:[],deptOptions:[],selectedDept:"",holidays:[]}},computed:{leaveGroups:function(){var e={};return this.leaves.forEach(function(n){return(e[n.date]=e[n.date]||[]).push(n)}),e}},mounted:function(){var e=this;return g()(v.a.mark(function n(){return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.getRecords(),e.getHoliday(),e.getLeaveTypes(),e.deptOptions=[{text:e.loalocale.self.allDept,value:""}].concat(so()(ae.deptOptions.map(function(e){return{text:e,value:e}}))),e.selectedDept=e.loginuser.dept?e.loginuser.dept:"";case 5:case"end":return n.stop()}},n,e)}))()},methods:{getLeaveTypes:function(){var e=this;return g()(v.a.mark(function n(){var t,a;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,on({loginuser:e.loginuser.username,token:e.loginuser.token,id:e.loginuser._id});case 2:t=n.sent,a=t.data.activatedLeaveTypes,e.leaveTypes=a,e.leaveTypes_raw=JSON.parse(rt()(a));case 6:case"end":return n.stop()}},n,e)}))()},getRecords:function(){var e=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return g()(v.a.mark(function t(){var a,o,s,l,r,i;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.calendarDate.substr(0,4),o=e.calendarDate.substr(5,2),n||a!==e.year||o!==e.month){t.next=6;break}return t.abrupt("return");case 6:e.year=a,e.month=o;case 8:return e.loading=!0,t.next=11,qe({year:e.year,month:e.month,loginuser:e.loginuser.username,token:e.loginuser.token,sdehsra:ae.deptsThatSameDeptEmployeeHavingSameReadAccess.includes(e.loginuser.dept)});case 11:s=t.sent,l=s.data,r=l.report,i=l.fullControl,e.loading=!1,e.report=r,e.leaves=e.toLeaves(e.report),e.fullControl=i,e.steps=[{target:".controller  ",content:e.loalocale.self.descriptionOfCalendarController},{target:".calendar",content:e.loalocale.self.descriptionOfCalendar1},{target:".calendar",content:e.loalocale.self.descriptionOfCalendar2}],e.notASigner||(e.steps=[{target:".switch-1 .v-input__control",content:e.loalocale.self.descriptionOfShowOnlyYours},{target:".switch-2 .v-input__control",content:e.loalocale.self.descriptionOfShowOnlyUsername}].concat(so()(e.steps)));case 21:case"end":return t.stop()}},t,e)}))()},toLeaves:function(e){var n=this,t=[];this.showOnlyUsername&&(t=Zo(e.length));var a=[];return e.filter(function(e){return!n.showOnlyYours||e.username===n.loginuser.username}).filter(function(e){return!n.selectedDept||e.dept===n.selectedDept}).forEach(function(e,n){e.records.forEach(function(o){o.dates.forEach(function(s){a.push({color:t.length>0?t[n].color:"",textColor:t.length>0?t[n].textColor:"",date:oe.formatDate(s),employee:e,record:o,open:!1})})})}),a},selectDate:function(e){this.dialog=!0,this.selectedDate=e.date},leavePicked:function(e){"annualPreRequest"===e.name&&(this.selectedDate="")},leaveSigned:function(e,n){e?this.getRecords(!0):(this.systemNotification.text=oe.lookUpCustomMessage(n),this.systemNotification.visible=!0)},leaveTaken:function(e,n){e?(this.dialog=!1,this.getRecords(!0)):(this.systemNotification.text=oe.lookUpCustomMessage(n),this.systemNotification.visible=!0)},getHoliday:function(){var e=this;return g()(v.a.mark(function n(){var t,a;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,vn({loginuser:e.loginuser.username,token:e.loginuser.token,year:e.year,month:e.month});case 2:t=n.sent,a=t.data.holidays,e.holidays=a;case 5:case"end":return n.stop()}},n,e)}))()},getHolidayTitle:function(e){if(this.holidays.length>0){var n=new Date(e),t=this.holidays.find(function(e){return new Date(e.date).toDateString()===n.toDateString()});return t?t.title:""}return""},canceled:function(){this.leaveTypes=this.leaveTypes_raw,this.dialog=!1},formatDate:oe.formatDate},watch:{calendarDate:function(){this.getRecords(),this.getHoliday()},showOnlyYours:function(){this.leaves=this.toLeaves(this.report),this.showOnlyUsername=!1,this.selectedDept=this.loginuser.dept},showOnlyUsername:function(){this.leaves=this.toLeaves(this.report)},selectedDept:function(){this.leaves=this.toLeaves(this.report)}}},Vo=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("page-container",{attrs:{title:e.loalocale.self.title,icon:"event_note"},on:{notified:function(n){return e.systemNotification=n}}},[t("v-card",{staticClass:"elevation-12"},[t("calendar-controller",{attrs:{calendarDate:new Date(e.calendarDate)},on:{prev:function(n){return e.$refs.calendar.prev()},next:function(n){return e.$refs.calendar.next()},tolastest:function(n){return e.calendarDate=e.formatDate(n)}}},[t("tour",{attrs:{steps:e.steps}}),e._v(" "),e.notASigner?e._e():t("v-switch",{staticClass:"switch-1",attrs:{label:e.loalocale.self.showOnlyYours},model:{value:e.showOnlyYours,callback:function(n){e.showOnlyYours=n},expression:"showOnlyYours"}}),e._v(" "),e.notASigner?e._e():t("v-switch",{staticClass:"switch-2",attrs:{disabled:e.showOnlyYours,label:e.loalocale.self.showOnlyUsername},model:{value:e.showOnlyUsername,callback:function(n){e.showOnlyUsername=n},expression:"showOnlyUsername"}}),e._v(" "),e.notASigner?e._e():t("v-select",{attrs:{disabled:e.showOnlyYours,items:e.deptOptions,"item-text":"text","item-value":"value",label:e.loalocale.self.dept},model:{value:e.selectedDept,callback:function(n){e.selectedDept=n},expression:"selectedDept"}})],1),e._v(" "),t("v-card-text",[t("v-sheet",[e.loading?t("v-progress-linear",{attrs:{indeterminate:!0}}):t("v-calendar",{ref:"calendar",staticClass:"calendar",attrs:{type:"month",color:"primary"},on:{"click:date":e.selectDate},scopedSlots:e._u([{key:"day",fn:function(n){var a=n.date;return[t("div",{staticStyle:{"font-size":"10px"}},[e._v(e._s(e.getHolidayTitle(a)))]),e._v(" "),e._l(e.leaveGroups[a],function(n,a){return[t("v-menu",{key:a,attrs:{"full-width":"","offset-x":"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(o){var s=o.on;return[t("leave-info",{key:a,attrs:{on:s,employee:n.employee,record:n.record,color:n.color,textColor:n.textColor,icon:!e.showOnlyUsername}})]}}]),model:{value:n.open,callback:function(t){e.$set(n,"open",t)},expression:"event.open"}},[e._v(" "),t("leave-detail-info",{attrs:{employee:n.employee,record:n.record},on:{signed:e.leaveSigned,close:function(e){n.open=!1}}})],1)]})]}}]),model:{value:e.calendarDate,callback:function(n){e.calendarDate=n},expression:"calendarDate"}})],1)],1)],1),e._v(" "),t("v-dialog",{attrs:{"max-width":"500"},model:{value:e.dialog,callback:function(n){e.dialog=n},expression:"dialog"}},[t("leave-taking-block",{attrs:{leaveTypes:e.leaveTypes,"employee-id":e.loginuser._id,date:e.selectedDate},on:{taken:e.leaveTaken,picked:e.leavePicked,cancel:e.canceled,notified:function(n){return e.systemNotification=n}}})],1),e._v(" "),t("system-notification",{on:{close:function(n){e.systemNotification.visible=!1}},model:{value:e.systemNotification,callback:function(n){e.systemNotification=n},expression:"systemNotification"}},[t("div",[e._v(e._s(e.systemNotification.text))])])],1)};Vo._withStripped=!0;var Ko={render:Vo,staticRenderFns:[]},Jo=Ko;var Qo=!1;var Xo=t("VU/8")(qo,Jo,!1,function(e){Qo||t("N9iN")},null,null);Xo.options.__file="src\\views\\LeaveCalendar.vue",Xo.esModule&&Object.keys(Xo.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var es=Xo.exports,ns={name:"ShiftConfig",props:{readonly:{type:Boolean,default:!0}},data:function(){return{daypartConf:ae.shiftDaypart,workday:{morning:{},noon:{},general:{}},holiday:{morning:{},noon:{},general:{}},summerMonday:{morning:{}},winterMonday:{morning:{}}}},mounted:function(){this.getShiftConfig()},methods:{getShiftConfig:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s,l,r;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,mn({loginuser:e.loginuser.username,token:e.loginuser.token,type:"period"});case 2:t=n.sent,a=t.data,o=a.workday,s=a.holiday,l=a.summerMonday,r=a.winterMonday,e.workday=o,e.holiday=s,e.summerMonday=l,e.winterMonday=r;case 12:case"end":return n.stop()}},n,e)}))()},updateShiftConfig:function(){var e=this;return g()(v.a.mark(function n(){var t,a,o,s;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fn({type:"period",loginuser:e.loginuser.username,token:e.loginuser.token,config:{workday:e.workday,holiday:e.holiday,summerMonday:e.summerMonday,winterMonday:e.winterMonday}});case 2:t=n.sent,a=t.data,o=a.success,s=a.message,e.getShiftConfig(),e.$emit("notified",{text:oe.lookUpCustomMessage(s,e.loalocale.self.message),level:o?"info":"warning",visible:!0,handler:function(){}});case 8:case"end":return n.stop()}},n,e)}))()}}},ts=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-container",[t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"text"},model:{value:e.workday.name,callback:function(n){e.$set(e.workday,"name",n)},expression:"workday.name"}})],1),e._v(" "),t("v-flex",[t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,"background-color":e.daypartConf["早"].color,type:"text"},model:{value:e.workday.morning.name,callback:function(n){e.$set(e.workday.morning,"name",n)},expression:"workday.morning.name"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.workday.morning.startFrom,callback:function(n){e.$set(e.workday.morning,"startFrom",n)},expression:"workday.morning.startFrom"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.workday.morning.endTo,callback:function(n){e.$set(e.workday.morning,"endTo",n)},expression:"workday.morning.endTo"}})],1)],1)],1),e._v(" "),t("v-flex",[t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,"background-color":e.daypartConf["中"].color,type:"text"},model:{value:e.workday.noon.name,callback:function(n){e.$set(e.workday.noon,"name",n)},expression:"workday.noon.name"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.workday.noon.startFrom,callback:function(n){e.$set(e.workday.noon,"startFrom",n)},expression:"workday.noon.startFrom"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.workday.noon.endTo,callback:function(n){e.$set(e.workday.noon,"endTo",n)},expression:"workday.noon.endTo"}})],1)],1)],1),e._v(" "),t("v-flex",[t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,"background-color":e.daypartConf["日"].color,type:"text"},model:{value:e.workday.general.name,callback:function(n){e.$set(e.workday.general,"name",n)},expression:"workday.general.name"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.workday.general.startFrom,callback:function(n){e.$set(e.workday.general,"startFrom",n)},expression:"workday.general.startFrom"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.workday.general.endTo,callback:function(n){e.$set(e.workday.general,"endTo",n)},expression:"workday.general.endTo"}})],1)],1)],1)],1),e._v(" "),t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"text"},model:{value:e.holiday.name,callback:function(n){e.$set(e.holiday,"name",n)},expression:"holiday.name"}})],1),e._v(" "),t("v-flex",[t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,"background-color":e.daypartConf["早"].color,type:"text"},model:{value:e.holiday.morning.name,callback:function(n){e.$set(e.holiday.morning,"name",n)},expression:"holiday.morning.name"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.holiday.morning.startFrom,callback:function(n){e.$set(e.holiday.morning,"startFrom",n)},expression:"holiday.morning.startFrom"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.holiday.morning.endTo,callback:function(n){e.$set(e.holiday.morning,"endTo",n)},expression:"holiday.morning.endTo"}})],1)],1)],1),e._v(" "),t("v-flex",[t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,"background-color":e.daypartConf["中"].color,type:"text"},model:{value:e.holiday.noon.name,callback:function(n){e.$set(e.holiday.noon,"name",n)},expression:"holiday.noon.name"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.holiday.noon.startFrom,callback:function(n){e.$set(e.holiday.noon,"startFrom",n)},expression:"holiday.noon.startFrom"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.holiday.noon.endTo,callback:function(n){e.$set(e.holiday.noon,"endTo",n)},expression:"holiday.noon.endTo"}})],1)],1)],1),e._v(" "),t("v-flex",[t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,"background-color":e.daypartConf["日"].color,type:"text"},model:{value:e.holiday.general.name,callback:function(n){e.$set(e.holiday.general,"name",n)},expression:"holiday.general.name"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.holiday.general.startFrom,callback:function(n){e.$set(e.holiday.general,"startFrom",n)},expression:"holiday.general.startFrom"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.holiday.general.endTo,callback:function(n){e.$set(e.holiday.general,"endTo",n)},expression:"holiday.general.endTo"}})],1)],1)],1)],1),e._v(" "),t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"text"},model:{value:e.summerMonday.name,callback:function(n){e.$set(e.summerMonday,"name",n)},expression:"summerMonday.name"}})],1),e._v(" "),t("v-flex",[t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,"background-color":e.daypartConf["早"].color,type:"text"},model:{value:e.summerMonday.morning.name,callback:function(n){e.$set(e.summerMonday.morning,"name",n)},expression:"summerMonday.morning.name"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.summerMonday.morning.startFrom,callback:function(n){e.$set(e.summerMonday.morning,"startFrom",n)},expression:"summerMonday.morning.startFrom"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.summerMonday.morning.endTo,callback:function(n){e.$set(e.summerMonday.morning,"endTo",n)},expression:"summerMonday.morning.endTo"}})],1)],1)],1)],1),e._v(" "),t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"text"},model:{value:e.winterMonday.name,callback:function(n){e.$set(e.winterMonday,"name",n)},expression:"winterMonday.name"}})],1),e._v(" "),t("v-flex",[t("v-layout",[t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,"background-color":e.daypartConf["早"].color,type:"text"},model:{value:e.winterMonday.morning.name,callback:function(n){e.$set(e.winterMonday.morning,"name",n)},expression:"winterMonday.morning.name"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.winterMonday.morning.startFrom,callback:function(n){e.$set(e.winterMonday.morning,"startFrom",n)},expression:"winterMonday.morning.startFrom"}})],1),e._v(" "),t("v-flex",[t("v-text-field",{attrs:{readonly:e.readonly,type:"time"},model:{value:e.winterMonday.morning.endTo,callback:function(n){e.$set(e.winterMonday.morning,"endTo",n)},expression:"winterMonday.morning.endTo"}})],1)],1)],1)],1),e._v(" "),t("v-layout",[t("v-flex",{attrs:{xs11:""}}),e._v(" "),t("v-flex",[e.readonly?e._e():t("v-btn",{staticClass:"theme",on:{click:e.updateShiftConfig}},[e._v(e._s(e.loalocale.self.update))])],1)],1)],1)};ts._withStripped=!0;var as={render:ts,staticRenderFns:[]},os=as;var ss=!1;var ls=t("VU/8")(ns,os,!1,function(e){ss||t("E74X")},null,null);ls.options.__file="src\\components\\ShiftConfig.vue",ls.esModule&&Object.keys(ls.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var rs={name:"ShiftCalendar",components:{"page-container":Qn,"system-notification":Ce,"calendar-controller":ra,"employee-info":He,"shift-config":ls.exports},data:function(){return{calendarDate:oe.formatDate("now"),systemNotification:{level:"warning",text:"",visible:!1,handler:function(){}},selectedEmployee:"",employees:[],daypartConf:ae.shiftDaypart,holidays:[]}},computed:{readonly:function(){return"manager"!==this.loginuser.level&&"admin"!==this.loginuser.level||this.access.expired},shiftGroups:function(){var e=this,n=new Date(this.calendarDateYear,this.calendarDateMonth,0).getDate(),t={};return Array.apply(null,{length:n}).map(function(n,t){return new Date(e.calendarDateYear,e.calendarDateMonth-1,t+1)}).filter(function(e){var n=e.getDay();return 0!==n&&6!==n}).forEach(function(e){var n=oe.formatDate(e);t[n]=[]}),this.employees.forEach(function(e){e.shifts.forEach(function(n){var a=oe.formatDate(n.date);(t[a]=t[a]||[]).push({shift:n,employee:e,color:ae.shiftEmployee[e.username.toLowerCase()].color})})}),Ka()(t).forEach(function(e){return t[e]=t[e].sort(function(e,n){var t=e.shift.daypart,a=n.shift.daypart;return t===a?0:"早"===t&&("中"===a||"日"===a)||"中"===t&&"日"===a?-1:"中"===t&&"早"===a||"日"===t&&("早"===a||"中"===a)?1:void 0})}),t},access:function(){var e=new Date,n=e.getDate(),t=e.getMonth()+1,a=e.getFullYear();if(this.calendarDateYear<a||this.calendarDateYear===a&&this.calendarDateMonth<t)return{expired:!0,message:this.loalocale.self.expired};if(this.calendarDateMonth===t&&this.calendarDateYear===a){var o=Array.apply(null,{length:7}).map(function(e,n){return new Date(a,t,0-n)}).filter(function(e){return 6!==e.getDay()&&0!==e.getDay()})[1];return{expired:n>=o.getDate(),message:this.loalocale.self.expiredAt+": "+oe.formatDate(o)}}return{expired:!1,message:this.loalocale.self.expiredAt+": "+this.loalocale.self.workdaysBeforeCurrentMonthEnds.replace("{0}",2)}},calendarDateObj:function(){return new Date(this.calendarDate)},calendarDateYear:function(){return this.calendarDateObj.getFullYear()},calendarDateMonth:function(){return this.calendarDateObj.getMonth()+1}},mounted:function(){var e=this;return g()(v.a.mark(function n(){return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.getHoliday(),e.getShifts();case 2:case"end":return n.stop()}},n,e)}))()},methods:{showPrimary:function(e,n){return e.filter(function(e){return e.shift.daypart===n.shift.daypart}).length>1&&n.shift.primary},download:function(){var e=hn.exportShift({year:this.calendarDateYear,month:this.calendarDateMonth,loginuser:this.loginuser.username,token:this.loginuser.token}),n=document.createElement("iframe");n.src=e,n.style="display:none",document.body.appendChild(n)},getHoliday:function(){var e=this;return g()(v.a.mark(function n(){var t,a;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,vn({loginuser:e.loginuser.username,token:e.loginuser.token,year:e.calendarDateYear,month:e.calendarDateMonth});case 2:t=n.sent,a=t.data.holidays,e.holidays=a;case 5:case"end":return n.stop()}},n,e)}))()},getShifts:function(){var e=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return g()(v.a.mark(function t(){var a,o,s,l;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dn({loginuser:e.loginuser.username,token:e.loginuser.token,year:e.calendarDateYear,month:e.calendarDateMonth});case 2:a=t.sent,o=a.data,s=o.fullControl,l=o.employees,e.fullControl=s,e.employees=e.filter(l),n&&(e.selectedEmployee=e.employees.length>0?e.employees[0]:void 0);case 9:case"end":return t.stop()}},t,e)}))()},filter:function(e){return e.filter(function(e){return ae.shiftDepts.includes(e.dept)})},add:function(e,n){var t=this;return g()(v.a.mark(function a(){var o,s,l,r,i;return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.readonly){a.next=9;break}return o=!t.alreadyHaveShifter(e,n),a.next=4,pn({loginuser:t.loginuser.username,token:t.loginuser.token,id:t.selectedEmployee._id,shift:{date:e,daypart:n,primary:o}});case 4:s=a.sent,l=s.data,r=l.success,i=l.message,r?t.getShifts(!1):(t.systemNotification.level="warning",t.systemNotification.text=oe.lookUpCustomMessage(i),t.systemNotification.visible=!0);case 9:case"end":return a.stop()}},a,t)}))()},alreadyHaveShifter:function(e,n){var t=this;return Ka()(this.shiftGroups).some(function(a){return a===e&&t.shiftGroups[a]&&t.shiftGroups[a].length>0&&t.shiftGroups[a].some(function(e){return e.shift.daypart===n})})},remove:function(e,n){var t=this;return g()(v.a.mark(function a(){var o,s,l,r;return v.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t.readonly){a.next=8;break}return a.next=3,pn({loginuser:t.loginuser.username,token:t.loginuser.token,id:e,shiftId:n});case 3:o=a.sent,s=o.data,l=s.success,r=s.message,l?t.getShifts(!1):(t.systemNotification.level="warning",t.systemNotification.text=oe.lookUpCustomMessage(r),t.systemNotification.visible=!0);case 8:case"end":return a.stop()}},a,t)}))()},getHolidayTitle:function(e){if(this.holidays.length>0){var n=new Date(e),t=this.holidays.find(function(e){return new Date(e.date).toDateString()===n.toDateString()});return t?t.title:""}return""},formatDate:oe.formatDate},watch:{calendarDate:function(){this.getHoliday(),this.getShifts()}}},is=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("page-container",{attrs:{title:e.loalocale.self.title,icon:"schedule"},on:{notified:function(n){return e.systemNotification=n}}},[t("v-card",{staticClass:"elevation-12"},[t("calendar-controller",{attrs:{calendarDate:new Date(e.calendarDate)},on:{prev:function(n){return e.$refs.calendar.prev()},next:function(n){return e.$refs.calendar.next()},tolastest:function(n){return e.calendarDate=e.formatDate(n)}}},[e.access.message?t("v-chip",{attrs:{label:"",outline:""}},[e._v(e._s(e.access.message))]):e._e(),e._v(" "),t("v-btn",{on:{click:e.download}},[t("v-icon",[e._v("get_app")]),e._v("\n        "+e._s(e.loalocale.self.download)+"\n      ")],1),e._v(" "),e.readonly?e._e():t("v-btn-toggle",{model:{value:e.selectedEmployee,callback:function(n){e.selectedEmployee=n},expression:"selectedEmployee"}},e._l(e.employees,function(n){return t("v-tooltip",{key:n.username,attrs:{bottom:""}},[t("v-btn",{attrs:{slot:"activator",value:n},slot:"activator"},[e._v(e._s(n.username))]),e._v(" "),t("employee-info",{attrs:{profile:n,icon:"",email:""}})],1)}),1)],1),e._v(" "),t("v-card-text",[t("v-sheet",[t("v-calendar",{ref:"calendar",staticClass:"calendar",attrs:{type:"month",color:"primary"},scopedSlots:e._u([{key:"day",fn:function(n){var a=n.date;return[t("div",{staticStyle:{"font-size":"10px"}},[e._v(e._s(e.getHolidayTitle(a)))]),e._v(" "),e.shiftGroups[a]&&!e.readonly?t("v-btn-toggle",[t("v-chip",{attrs:{color:e.daypartConf["早"].color,outline:"",label:""},on:{click:function(n){return e.add(a,"早")}}},[e._v("早")]),e._v(" "),t("v-chip",{attrs:{color:e.daypartConf["中"].color,outline:"",label:""},on:{click:function(n){return e.add(a,"中")}}},[e._v("中")]),e._v(" "),t("v-chip",{attrs:{color:e.daypartConf["日"].color,outline:"",label:""},on:{click:function(n){return e.add(a,"日")}}},[e._v("日")])],1):e._e(),e._v(" "),e._l(e.shiftGroups[a],function(n,o){return[t("div",{key:a+"_"+o},[t("v-chip",{staticStyle:{width:"95%"},attrs:{label:"",color:n.color,"text-color":"white"},on:{click:function(t){return e.remove(n.employee._id,n.shift._id)}}},[t("v-avatar",{attrs:{tile:""}},[e._v(e._s(n.shift.daypart))]),e._v("\n                  "+e._s(n.employee.username)+"\n                  "),e.showPrimary(e.shiftGroups[a],n)?t("v-icon",{staticClass:"primary-shifter"},[e._v("star_border")]):e._e()],1)],1)]})]}}]),model:{value:e.calendarDate,callback:function(n){e.calendarDate=n},expression:"calendarDate"}})],1)],1),e._v(" "),t("v-divider"),e._v(" "),t("v-card-title",{attrs:{"primary-title":""}},[t("h3",{staticClass:"headline"},[e._v("時間段說明")])]),e._v(" "),t("v-card-text",[t("shift-config",{attrs:{readonly:e.readonly},on:{notified:function(n){return e.systemNotification=n}}})],1)],1),e._v(" "),t("system-notification",{on:{close:function(n){e.systemNotification.visible=!1}},model:{value:e.systemNotification,callback:function(n){e.systemNotification=n},expression:"systemNotification"}},[t("div",[e._v(e._s(e.systemNotification.text))])])],1)};is._withStripped=!0;var cs={render:is,staticRenderFns:[]},us=cs;var ds=!1;var ps=t("VU/8")(rs,us,!1,function(e){ds||t("oTdt")},null,null);ps.options.__file="src\\views\\ShiftCalendar.vue",ps.esModule&&Object.keys(ps.esModule).some(function(e){return"default"!==e&&"__"!==e.substr(0,2)})&&console.error("named exports are not supported in *.vue files.");var ms=ps.exports;s.default.use(p.a);var vs=new p.a({mode:"history",routes:[{path:"/",name:"Login",component:qa},{path:"/employees",name:"List",component:st},{path:"/employee/:id",name:"Detail",component:ea},{path:"/employee/:id/records/:query?",name:"RecordList",component:va},{path:"/report/annual",name:"AnnualReport",component:Ea},{path:"/report/monthly",name:"MonthlyReport",component:xa},{path:"/compensatorylist",name:"CompensatoryList",component:ja},{path:"/leavetype",name:"LeaveTypeInfo",component:ao},{path:"/calendar/leave",name:"LeaveCalendar",component:es},{path:"/calendar/shift",name:"ShiftCalendar",component:ms}]}),fs=t("K/Lq"),ys=t.n(fs),hs=t("3EgV"),gs=t.n(hs),_s=(t("7zck"),t("gJtD"),t("pvO8")),bs=t.n(_s);t("iq7p");s.default.use(bs.a),s.default.config.productionTip=!1,s.default.use(gs.a),s.default.use(ys.a),s.default.mixin({created:function(){this.checkLoginStatus()},computed:{loginuser:function(){return JSON.parse(this.$cookie.get("loasystem.loginuser"))}},data:function(e){var n={},t=e&&e.$vnode?e.$vnode.tag:void 0;if(t){var a=/-(\w+)$/.exec(t),s=o()(a,2)[1];s&&(n={name:s,self:te[s],shared:te.shared})}return{loalocale:n}},methods:{checkLoginStatus:function(){"Login"!==this.$router.history.current.name&&(this.$cookie.get("loasystem.loginuser")||(this.$cookie.delete("loasystem.loginuser"),this.$router.push({name:"Login"})))}}}),new s.default({el:"#app",router:vs,myOption:"hello!",components:{App:d},template:"<App/>"})},OSPh:function(e,n,t){var a=t("84Sa");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("bd761dae",a,!1)},OiKs:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"MonthlyReport.vue",sourceRoot:""}])},OsHO:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"Login.vue",sourceRoot:""}])},P8Gt:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.annualinfo-management .header {\n  display: grid;\n  grid-template-columns: 1fr 5fr 3fr;\n  border-bottom: black 1px solid;\n  padding: 5px 16px;\n}\n.annualinfo-management .header .select-action-label {\n  margin-left: 16px;\n}\n.annualinfo-management .header .select-action {\n  margin: 0px 0px 0px 16px;\n  width: 56px;\n  height: 30px;\n  display: grid;\n}\n.annualinfo-management .header .sub-title {\n  color: rgba(0, 0, 0, 0.54);\n}\n.annualinfo-management .header .status-info {\n  justify-self: end;\n  display: grid;\n  justify-items: end;\n}\n.annualinfo-management .status {\n  margin-left: 16px;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/components/src\\components/AnnualInfoManagement.vue"],names:[],mappings:";AAqJA;EACA,cAAA;EACA,mCAAA;EACA,+BAAA;EACA,kBAAA;CACA;AACA;EACA,kBAAA;CACA;AACA;EACA,yBAAA;EACA,YAAA;EACA,aAAA;EACA,cAAA;CACA;AACA;EACA,2BAAA;CACA;AACA;EACA,kBAAA;EACA,cAAA;EACA,mBAAA;CACA;AACA;EACA,kBAAA;CACA",file:"AnnualInfoManagement.vue",sourcesContent:['<template>\n  <v-dialog max-width="600" v-model="dialog" scrollable persistent>\n    <v-btn icon slot="activator">\n      <v-icon color="warning">local_airport</v-icon>\n    </v-btn>\n    <v-card class="annualinfo-management">\n      <v-card-title class="theme">\n        <div class="headline">員工特別休假管理</div>\n      </v-card-title>\n      <v-card-title class="header">\n        <div class="action" @click="toggleSelectAll">\n          <div class="select-action-label">全選</div>\n          <v-checkbox class="select-action" :value="allSelected"></v-checkbox>\n        </div>\n        <div class="user-info">\n          <div>員工姓名</div>\n          <div class="sub-title">英文名</div>\n        </div>\n        <div class="status-info">\n          <div class="sub-title">到期日</div>\n          <div>已用天數/總天數</div>\n        </div>\n      </v-card-title>\n      <v-card-text>\n        <v-list two-line>\n          <template v-for="(employee, index) in employees">\n            <v-list-tile :key="employee._id">\n              <v-list-tile-action>\n                <v-checkbox v-model="employee.selected"></v-checkbox>\n              </v-list-tile-action>\n              <v-list-tile-content>\n                <v-list-tile-title>{{employee.name}}</v-list-tile-title>\n                <v-list-tile-sub-title>{{employee.username}}</v-list-tile-sub-title>\n              </v-list-tile-content>\n              <v-list-tile-action class="status">\n                <v-list-tile-action-text>{{employee.annualInfo.deadline}}</v-list-tile-action-text>\n                {{generateleaveTypeSummary(employee.annualInfo)}}\n              </v-list-tile-action>\n              <v-list-tile-action v-if="employee.isAnnualLTRefreshable">\n                <v-icon>arrow_forward</v-icon>\n              </v-list-tile-action>\n              <v-list-tile-action class="status" v-if="employee.isAnnualLTRefreshable">\n                <v-list-tile-action-text>{{employee.nextAnnualInfo.deadline}}</v-list-tile-action-text>\n                {{generateleaveTypeSummary(employee.nextAnnualInfo)}}\n              </v-list-tile-action>\n            </v-list-tile>\n            <v-divider :key="`${index}-divider`"></v-divider>\n          </template>\n        </v-list>\n      </v-card-text>\n      <v-card-actions>\n        <v-spacer></v-spacer>\n        <v-btn flat @click="dialog = false">關閉</v-btn>\n        <v-btn\n          :disabled="!employees.some(e => e.selected)"\n          :class="{\'theme\': employees.some(e => e.selected)}"\n          @click="update"\n        >更新</v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n<script>\nimport EmployeeService from "@/services/EmployeeService";\nimport reportUtility from "@/reportUtility";\nimport utility from "@/utility";\n\nexport default {\n  name: "AnnualInfoManagement",\n  props: {},\n  data: () => ({\n    dialog: false,\n    employees: []\n  }),\n  computed: {\n    allSelected() {\n      return this.employees.every(e => e.selected);\n    }\n  },\n  mounted() {\n    this.getEmployees();\n  },\n  methods: {\n    toggleSelectAll() {\n      const toggle = !this.allSelected;\n      this.employees.forEach(e => {\n        e.selected = toggle;\n      });\n    },\n    async update() {\n      const {\n        data: { success, message }\n      } = await EmployeeService.updateAnnualInfo({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n        usernames: this.employees.filter(e => e.selected).map(e => e.username)\n      });\n      if (success) {\n        this.getEmployees();\n      }\n      this.$emit("update", success, message);\n    },\n    async getEmployees() {\n      const {\n        data: { employees }\n      } = await EmployeeService.fetchForLightweight({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token\n      });\n      if (employees) {\n        this.employees = employees\n          .filter(e => e.enabled)\n          .map(e => ({\n            ...e,\n            annualInfo: {\n              ...e.annualInfo,\n              deadline: this.formatDate(e.annualInfo.deadline)\n            },\n            nextAnnualInfo: {\n              ...e.nextAnnualInfo,\n              deadline: this.formatDate(e.nextAnnualInfo.deadline)\n            },\n            selected: false\n          }))\n          .map(e => ({\n            ...e,\n            backup: Object.assign({}, e)\n          }));\n      }\n    },\n    formatDate: utility.formatDate,\n    generateleaveTypeSummary: annualInfo =>\n      reportUtility.generateleaveTypeSummary({\n        days: annualInfo.consumes.days,\n        hours: annualInfo.consumes.halfHours / 2,\n        totalDays: annualInfo.totals.days,\n        totalHours: annualInfo.totals.halfHours / 2\n      })\n  },\n  watch: {\n    dialog(value) {\n      if (value) {\n        this.getEmployees();\n      }\n    }\n  }\n};\n<\/script>\n<style>\n.annualinfo-management .header {\n  display: grid;\n  grid-template-columns: 1fr 5fr 3fr;\n  border-bottom: black 1px solid;\n  padding: 5px 16px;\n}\n.annualinfo-management .header .select-action-label {\n  margin-left: 16px;\n}\n.annualinfo-management .header .select-action {\n  margin: 0px 0px 0px 16px;\n  width: 56px;\n  height: 30px;\n  display: grid;\n}\n.annualinfo-management .header .sub-title {\n  color: rgba(0, 0, 0, 0.54);\n}\n.annualinfo-management .header .status-info {\n  justify-self: end;\n  display: grid;\n  justify-items: end;\n}\n.annualinfo-management .status {\n  margin-left: 16px;\n}\n</style>\n'],sourceRoot:""}])},SwzS:function(e,n,t){var a=t("noDL");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("b6a65eee",a,!1)},TZAM:function(e,n,t){var a=t("sdLk");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("26cceb24",a,!1)},"TuQ+":function(e,n,t){var a=t("/YEM");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("678faae2",a,!1)},U0sX:function(e,n,t){var a=t("rEH9");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("6aeb587f",a,!1)},VZfy:function(e,n,t){var a=t("9g63");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("2c15032b",a,!1)},WQVQ:function(e,n,t){var a=t("OiKs");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("746acc66",a,!1)},XKjn:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,'\n.theme {\n  background: -webkit-gradient(\n    linear,\n    left top, right top,\n    from(rgba(225, 56, 89, 1)),\n    color-stop(35%, rgba(195, 43, 127, 1)),\n    color-stop(65%, rgba(146, 49, 140, 1)),\n    to(rgba(78, 56, 130, 1))\n  ) !important;\n  background: linear-gradient(\n    to right,\n    rgba(225, 56, 89, 1) 0%,\n    rgba(195, 43, 127, 1) 35%,\n    rgba(146, 49, 140, 1) 65%,\n    rgba(78, 56, 130, 1) 100%\n  ) !important;\n  color: white !important;\n}\n#app *:not(i) {\n  font-size: 18px;\n  font-family: "Courier New", Courier, monospace;\n}\n.v-text-field__details {\n  overflow: visible !important;\n}\n.min-width-380 {\n  min-width: 380px;\n}\n.min-width-160 {\n  min-width: 160px;\n}\n.min-width-120 {\n  min-width: 120px;\n}\n.min-width-100 {\n  min-width: 100px;\n}\n.float-right {\n  float: right;\n}\n.flash {\n  -webkit-animation: flash ease-in 2s infinite;\n  animation: flash ease-in 2s infinite;\n}\n@-webkit-keyframes flash {\n0% {\n    opacity: 1;\n}\n50% {\n    opacity: 0.1;\n}\n100% {\n    opacity: 1;\n}\n}\n@keyframes flash {\n0% {\n    opacity: 1;\n}\n50% {\n    opacity: 0.1;\n}\n100% {\n    opacity: 1;\n}\n}\n',"",{version:3,sources:["D:/repos/loasystem/client/src/src/App.vue"],names:[],mappings:";AAaA;EACA;;;;;;;eAMA;EANA;;;;;;eAMA;EACA,wBAAA;CACA;AACA;EACA,gBAAA;EACA,+CAAA;CACA;AACA;EACA,6BAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,iBAAA;CACA;AACA;EACA,aAAA;CACA;AACA;EACA,6CAAA;EACA,qCAAA;CACA;AACA;AACA;IACA,WAAA;CACA;AACA;IACA,aAAA;CACA;AACA;IACA,WAAA;CACA;CACA;AACA;AACA;IACA,WAAA;CACA;AACA;IACA,aAAA;CACA;AACA;IACA,WAAA;CACA;CACA",file:"App.vue",sourcesContent:['<template>\n  <div id="app">\n    <router-view />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: "App",\n};\n<\/script>\n\n<style>\n.theme {\n  background: linear-gradient(\n    to right,\n    rgba(225, 56, 89, 1) 0%,\n    rgba(195, 43, 127, 1) 35%,\n    rgba(146, 49, 140, 1) 65%,\n    rgba(78, 56, 130, 1) 100%\n  ) !important;\n  color: white !important;\n}\n#app *:not(i) {\n  font-size: 18px;\n  font-family: "Courier New", Courier, monospace;\n}\n.v-text-field__details {\n  overflow: visible !important;\n}\n.min-width-380 {\n  min-width: 380px;\n}\n.min-width-160 {\n  min-width: 160px;\n}\n.min-width-120 {\n  min-width: 120px;\n}\n.min-width-100 {\n  min-width: 100px;\n}\n.float-right {\n  float: right;\n}\n.flash {\n  -webkit-animation: flash ease-in 2s infinite;\n  animation: flash ease-in 2s infinite;\n}\n@-webkit-keyframes flash {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.1;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n@keyframes flash {\n  0% {\n    opacity: 1;\n  }\n  50% {\n    opacity: 0.1;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n</style>\n'],sourceRoot:""}])},Xd3D:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"CalendarController.vue",sourceRoot:""}])},XyBD:function(e,n,t){var a=t("k22p");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("42a8a319",a,!1)},ZPO3:function(e,n,t){var a=t("/8Bb");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("674d41dd",a,!1)},ZilF:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"LeaveTypeContainer.vue",sourceRoot:""}])},bsW2:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"LeaveCalendar.vue",sourceRoot:""}])},buKF:function(e,n,t){var a=t("fO8N");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("727805a9",a,!1)},eYjM:function(e,n,t){var a=t("0Iyf");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("5df9026b",a,!1)},eqaX:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"LeaveDetailInfo.vue",sourceRoot:""}])},ezOW:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.row[data-v-0c4fb5be]:hover {\n  background-color: lightgray;\n}\n.clickable[data-v-0c4fb5be] {\n  cursor: pointer;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/components/src\\components/LeaveTypeRow.vue"],names:[],mappings:";AAuHA;EACA,4BAAA;CACA;AACA;EACA,gBAAA;CACA",file:"LeaveTypeRow.vue",sourcesContent:['<template>\n  <v-tooltip bottom>\n    <v-list-tile avatar class="row" slot="activator">\n      <v-list-tile-avatar @click="pickOne(leaveType)" class="clickable">\n        <v-icon :class="leaveType.class">{{ leaveType.icon }}</v-icon>\n      </v-list-tile-avatar>\n      <v-list-tile-content\n        :title="leaveType.title"\n        @click="pickOne(leaveType)"\n        class="clickable"\n      >\n        <v-list-tile-title>{{ leaveType.title }}</v-list-tile-title>\n      </v-list-tile-content>\n      <v-list-tile-avatar v-if="!readonly || leaveType.countdown">\n        <v-tooltip bottom>\n          <animated-circular\n            slot="activator"\n            :value="\n              leaveType.countdown\n                ? calculatePercentage(leaveType.totals, leaveType.consumes)\n                : 100\n            "\n            :color="leaveType.color"\n          >\n            <template v-if="leaveType.countdown">\n              <span>剩</span\n              >{{\n                leaveType.totals.days > leaveType.consumes.days\n                  ? leaveType.totals.days - leaveType.consumes.days\n                  : leaveType.totals.hours - leaveType.consumes.hours\n              }}<span>{{\n                leaveType.totals.days > leaveType.consumes.days ? "天" : "時"\n              }}</span>\n            </template>\n            <template v-else>\n              {{ leaveType.consumes.days }}<span>天</span>\n            </template>\n          </animated-circular>\n          <leave-type-tooltip\n            :complete="leaveType.countdown"\n            :info="leaveType"\n          ></leave-type-tooltip>\n        </v-tooltip>\n      </v-list-tile-avatar>\n      <v-list-tile-action v-if="!readonly">\n        <leave-type-editor-dialog\n          :info="leaveType"\n          :key="leaveType.title"\n          @removeOne="removeOne"\n        ></leave-type-editor-dialog>\n      </v-list-tile-action>\n      <v-list-tile-action v-if="!readonly">\n        <v-btn icon ripple @click="leaveType.enabled = !leaveType.enabled">\n          <v-icon :class="leaveType.enabled ? \'green--text\' : \'\'">{{\n            leaveType.enabled ? "check_box" : "check_box_outline_blank"\n          }}</v-icon>\n        </v-btn>\n      </v-list-tile-action>\n      <v-list-tile-action v-if="!readonly && !leaveType.default">\n        <v-btn icon ripple @click="leaveType.stashed = !leaveType.stashed">\n          <v-icon>{{ leaveType.stashed ? "inbox" : "move_to_inbox" }}</v-icon>\n        </v-btn>\n      </v-list-tile-action>\n    </v-list-tile>\n    {{ leaveType.title }}\n  </v-tooltip>\n</template>\n<script>\nimport LeaveTypeTooltip from "@/components/LeaveTypeTooltip";\nimport AnimatedCircular from "@/components/AnimatedCircular";\nimport LeaveTypeEditorDialog from "@/components/LeaveTypeEditorDialog";\nexport default {\n  name: "LeaveTypeRow",\n  components: {\n    "leave-type-tooltip": LeaveTypeTooltip,\n    "animated-circular": AnimatedCircular,\n    "leave-type-editor-dialog": LeaveTypeEditorDialog,\n  },\n  props: {\n    leaveType: {\n      type: Object,\n    },\n    readonly: {\n      type: Boolean,\n      default: false,\n    },\n  },\n  computed: {},\n  data: () => ({\n    customTypeName: "",\n  }),\n  methods: {\n    calculatePercentage(totals, consumes) {\n      const totalsHalfHours =\n        totals.days * 8 * 2 +\n        (totals.halfHours\n          ? totals.halfHours\n          : totals.hours\n          ? totals.hours * 2\n          : 0);\n      const consumesHalfHours =\n        consumes.days * 8 * 2 +\n        (consumes.halfHours\n          ? consumes.halfHours\n          : consumes.hours\n          ? consumes.hours * 2\n          : 0);\n      return ((totalsHalfHours - consumesHalfHours) * 100) / totalsHalfHours;\n    },\n    pickOne(leaveType) {\n      this.$emit("pickOne", leaveType);\n    },\n    removeOne(index) {\n      this.$emit("removeOne", index);\n    },\n  },\n};\n<\/script>\n<style scoped>\n.row:hover {\n  background-color: lightgray;\n}\n.clickable {\n  cursor: pointer;\n}\n</style>\n'],sourceRoot:""}])},f3Lv:function(e,n,t){var a=t("8U6D");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("74252596",a,!1)},fO8N:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"EmployeeProfile.vue",sourceRoot:""}])},fO9x:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.v-progress-circular {\n  width: 200px !important;\n}\n.v-progress-circular svg {\n  width: 50px !important;\n}\n.v-progress-circular__info {\n  color: black !important;\n}\n.v-progress-circular__info span {\n  font-size: 0.4em !important;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/components/src\\components/AnimatedCircular.vue"],names:[],mappings:";AA+BA;EACA,wBAAA;CACA;AACA;EACA,uBAAA;CACA;AACA;EACA,wBAAA;CACA;AACA;EACA,4BAAA;CACA",file:"AnimatedCircular.vue",sourcesContent:['<template>\n  <v-progress-circular :rotate="-90" :size="50" :width="3" :value="initial" :color="color">\n    <slot></slot>\n  </v-progress-circular>\n</template>\n\n<script>\nexport default {\n  name: "AnimatedCircular",\n  props: {\n    value: {\n      type: Number,\n      default: 0\n    },\n    color: {\n      type: String,\n      default: ""\n    }\n  },\n  mounted() {\n    setInterval(() => {\n      this.initial = this.value;\n    }, 0);\n  },\n  data: () => ({\n    initial: 0\n  })\n};\n<\/script>\n\n<style>\n.v-progress-circular {\n  width: 200px !important;\n}\n.v-progress-circular svg {\n  width: 50px !important;\n}\n.v-progress-circular__info {\n  color: black !important;\n}\n.v-progress-circular__info span {\n  font-size: 0.4em !important;\n}\n</style>\n'],sourceRoot:""}])},fVQq:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"LeaveTakingBlock.vue",sourceRoot:""}])},fvQ2:function(e,n,t){var a=t("oXBR");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("71140276",a,!1)},gJtD:function(e,n){},"gj+S":function(e,n,t){var a=t("m6MK");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("b8102520",a,!1)},hplZ:function(e,n,t){var a=t("fO9x");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("4c13403d",a,!1)},iklm:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.annual-report .v-list__tile {\n  min-height: 40px !important;\n  height: -webkit-fit-content !important;\n  height: -moz-fit-content !important;\n  height: fit-content !important;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/views/Report/src\\views\\Report/AnnualReport.vue"],names:[],mappings:";AAsPA;EACA,4BAAA;EACA,uCAAA;EAAA,oCAAA;EAAA,+BAAA;CACA",file:"AnnualReport.vue",sourcesContent:['<template>\n  <v-app id="inspire" class="annual-report">\n    <page-container :title="loalocale.self.title" icon="view_list">\n      <v-card class="elevation-12">\n        <calendar-controller\n          annual\n          :calendarDate="calendarDate"\n          @prev="(date) => (calendarDate = date)"\n          @next="(date) => (calendarDate = date)"\n          @tolastest="(date) => (calendarDate = date)"\n        >\n          <v-switch\n            v-if="fullControl && !loading"\n            :label="loalocale.self.showResigners"\n            v-model="showResigners"\n          ></v-switch>\n          <v-btn @click="download" v-if="!loading">\n            <v-icon>get_app</v-icon>\n            {{ loalocale.self.download }}\n          </v-btn>\n        </calendar-controller>\n        <v-progress-linear\n          v-if="loading"\n          :indeterminate="true"\n        ></v-progress-linear>\n        <v-data-table\n          v-else\n          :headers="headers"\n          :items="filteredEmployees"\n          item-key="_id"\n          :rows-per-page-items="[\n            { text: \'$vuetify.dataIterator.rowsPerPageAll\', value: -1 },\n          ]"\n        >\n          <template slot="items" slot-scope="props">\n            <tr>\n              <td class="min-width-160">\n                <employee-info :profile="props.item"></employee-info>\n              </td>\n              <td class="min-width-380">\n                <v-data-iterator\n                  :items="\n                    props.item.recordGroups.filter((x) => x.list.length > 0)\n                  "\n                  :rows-per-page-items="[12]"\n                  content-tag="v-layout"\n                  row\n                  wrap\n                  hide-actions\n                >\n                  <v-flex xs6 slot="item" slot-scope="subprops">\n                    <v-card>\n                      <v-card-title>\n                        <h4>\n                          {{ subprops.item.month + 1\n                          }}{{ loalocale.self.month }}\n                        </h4>\n                      </v-card-title>\n                      <v-divider></v-divider>\n                      <v-list dense>\n                        <v-list-tile\n                          v-for="(record, index) in subprops.item.list"\n                          :key="index"\n                          :class="generateleaveTypeClass(record.key)"\n                        >\n                          <v-list-tile-content>{{\n                            generateSummary({\n                              leaveType: record.key,\n                              days: record.totals.days,\n                              hours: record.totals.hours,\n                            })\n                          }}</v-list-tile-content>\n                        </v-list-tile>\n                      </v-list>\n                    </v-card>\n                  </v-flex>\n                </v-data-iterator>\n              </td>\n              <td class="min-width-380">\n                <v-data-iterator\n                  :items="props.item.leaveTypeGroups"\n                  :rows-per-page-items="[props.item.leaveTypeGroups.length]"\n                  content-tag="v-layout"\n                  row\n                  wrap\n                  hide-actions\n                >\n                  <v-flex xs6 slot="item" slot-scope="subprops">\n                    <v-card>\n                      <v-list dense>\n                        <v-list-tile\n                          :class="generateleaveTypeClass(subprops.item.key)"\n                        >\n                          <v-list-tile-content>{{\n                            generateSummary({\n                              leaveType: subprops.item.key,\n                              days: subprops.item.totals.days,\n                              hours: subprops.item.totals.hours,\n                            })\n                          }}</v-list-tile-content>\n                        </v-list-tile>\n                      </v-list>\n                    </v-card>\n                  </v-flex>\n                </v-data-iterator>\n              </td>\n              <td>\n                <v-data-iterator\n                  :items="props.item.annualInfo"\n                  :rows-per-page-items="[props.item.annualInfo.length]"\n                  content-tag="v-layout"\n                  row\n                  wrap\n                  hide-actions\n                >\n                  <v-flex slot="item" slot-scope="subprops">\n                    <v-card>\n                      <v-card-title>\n                        <h4>{{ subprops.item.deadline }}</h4>\n                      </v-card-title>\n                      <v-divider></v-divider>\n                      <v-list dense>\n                        <v-list-tile>\n                          <v-list-tile-content\n                            >{{ subprops.item.totals.days }}/{{\n                              subprops.item.totalDays\n                            }}</v-list-tile-content\n                          >\n                        </v-list-tile>\n                      </v-list>\n                    </v-card>\n                  </v-flex>\n                </v-data-iterator>\n                <v-data-iterator\n                  :items="[props.item.actualTotalDays]"\n                  :rows-per-page-items="1"\n                  content-tag="v-layout"\n                  row\n                  wrap\n                  hide-actions\n                >\n                  <v-flex slot="item" slot-scope="subprops">\n                    <v-card>\n                      <v-card-title>\n                        <h4>實際天數</h4>\n                      </v-card-title>\n                      <v-divider></v-divider>\n                      <v-list dense>\n                        <v-list-tile>\n                          <v-list-tile-content>{{\n                            subprops.item\n                          }}</v-list-tile-content>\n                        </v-list-tile>\n                      </v-list>\n                    </v-card>\n                  </v-flex>\n                </v-data-iterator>\n              </td>\n            </tr>\n          </template>\n        </v-data-table>\n      </v-card>\n    </page-container>\n  </v-app>\n</template>\n<script>\nimport PageContainer from "@/components/PageContainer";\nimport CalendarController from "@/components/CalendarController";\nimport EmployeeInfo from "@/components/EmployeeInfo";\nimport EmployeeService from "@/services/EmployeeService";\nimport reportUtility from "@/reportUtility.js";\nexport default {\n  name: "AnnualReport",\n  components: {\n    "page-container": PageContainer,\n    "calendar-controller": CalendarController,\n    "employee-info": EmployeeInfo,\n  },\n  data: () => ({\n    calendarDate: new Date(),\n    headers: [],\n    employees: [],\n    fullControl: false,\n    showResigners: false,\n    loading: false,\n  }),\n  computed: {\n    filteredEmployees() {\n      return this.employees.filter((e) => this.showResigners || e.enabled);\n    },\n    year() {\n      return this.calendarDate.getFullYear();\n    },\n  },\n  created() {\n    [\n      {\n        text: this.loalocale.self.employeeInfo,\n        sortable: false,\n        width: "200",\n      },\n      { text: this.loalocale.self.monthGroupStat, sortable: false },\n      { text: this.loalocale.self.leaveTypeGroupStat, sortable: false },\n      { text: this.loalocale.self.annualStat, sortable: false },\n    ].forEach((header) => this.headers.push(header));\n  },\n  mounted() {\n    this.getRecords();\n  },\n  methods: {\n    download() {\n      const url = EmployeeService.downloadURL.exportReport({\n        year: this.year,\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n        period: "annual",\n      });\n      const iframe = document.createElement("iframe");\n      iframe.src = url;\n      iframe.style = "display:none";\n      document.body.appendChild(iframe);\n    },\n    async getRecords() {\n      this.loading = true;\n      const {\n        data: { report, fullControl },\n      } = await EmployeeService.getAnnualReport({\n        year: this.year,\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n      });\n      this.loading = false;\n      this.employees = report;\n      this.fullControl = fullControl;\n    },\n    generateSummary: reportUtility.generateSummary,\n    generateleaveTypeClass: reportUtility.generateleaveTypeClass,\n  },\n  watch: {\n    calendarDate() {\n      this.getRecords();\n    },\n  },\n};\n<\/script>\n<style>\n.annual-report .v-list__tile {\n  min-height: 40px !important;\n  height: fit-content !important;\n}\n</style>\n'],sourceRoot:""}])},iq7p:function(e,n){},k22p:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.insider .v-expansion-panel__header {\n  padding: 12px 50px !important;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/views/src\\views/Detail.vue"],names:[],mappings:";AA2XA;EACA,8BAAA;CACA",file:"Detail.vue",sourcesContent:['<template>\n  <v-app id="detail">\n    <v-container fluid fill-height>\n      <v-layout align-center justify-center>\n        <v-flex xs12 sm8 md8>\n          <v-form ref="form" v-model="valid" lazy-validation>\n            <employee-profile\n              :signer-options="signerOptions"\n              :dept-options="deptOptions"\n              :level-options="levelOptions"\n              :readonly="!fullControl"\n              :addingNew="!isEditMode"\n              :profile.sync="profile"\n            ></employee-profile>\n            <employee-account-settings\n              :account="account"\n              :addingNew="!isEditMode"\n              @resetPWD="resetPWD"\n              @resetEmail="resetEmail"\n            ></employee-account-settings>\n            <v-divider></v-divider>\n            <leave-type-container\n              :leaveTypes="availableLTs"\n              :readonly="!fullControl"\n              @importOne="import1LT"\n              @removeOne="remove1LT"\n              helper\n            ></leave-type-container>\n            <v-layout row wrap>\n              <v-flex>\n                <v-expansion-panel dark>\n                  <v-expansion-panel-content>\n                    <div slot="header">{{ loalocale.self.unavailableLTs }}</div>\n                    <v-expansion-panel\n                      class="insider"\n                      dark\n                      v-for="group in unavailableLTsGroups"\n                      :key="group.year"\n                    >\n                      <v-expansion-panel-content>\n                        <div slot="header">\n                          - {{ group.year }} ({{ group.list.length }})\n                        </div>\n                        <leave-type-container\n                          :leaveTypes="group.list"\n                          :readonly="!fullControl"\n                          @removeOne="remove1LT"\n                        ></leave-type-container>\n                      </v-expansion-panel-content>\n                    </v-expansion-panel>\n                  </v-expansion-panel-content>\n                </v-expansion-panel>\n              </v-flex>\n            </v-layout>\n            <v-layout row wrap>\n              <v-flex xs12>\n                <v-btn\n                  :class="[\'theme\', \'float-right\']"\n                  @click="submit"\n                  v-if="fullControl"\n                  >{{\n                    isEditMode ? loalocale.self.update : loalocale.self.create\n                  }}</v-btn\n                >\n              </v-flex>\n            </v-layout>\n          </v-form>\n        </v-flex>\n      </v-layout>\n    </v-container>\n    <system-notification\n      v-model="systemNotification"\n      @close="systemNotification.visible = false"\n    >\n      <div>{{ systemNotification.text }}</div>\n    </system-notification>\n  </v-app>\n</template>\n<script>\nimport SystemNotification from "@/components/SystemNotification";\nimport EmployeeProfile from "@/components/EmployeeProfile";\nimport EmployeeAccountSettings from "@/components/EmployeeAccountSettings";\nimport LeaveTypeContainer from "@/components/LeaveTypeContainer";\nimport EmployeeService from "@/services/EmployeeService";\nimport utility from "@/utility";\nimport defaultConf from "@/default";\nexport default {\n  name: "Detail",\n  components: {\n    "system-notification": SystemNotification,\n    "employee-profile": EmployeeProfile,\n    "employee-account-settings": EmployeeAccountSettings,\n    "leave-type-container": LeaveTypeContainer,\n  },\n  data: () => ({\n    systemNotification: {\n      level: "warning",\n      text: "",\n      visible: false,\n    },\n    valid: true,\n    profile: {\n      employeeID: "",\n      dept: "",\n      name: "",\n      username: "",\n      arrivedDate: "",\n      level: "",\n      signers: [],\n      email: "",\n    },\n    account: {\n      password: "",\n      email: "",\n      id: "",\n    },\n    leaveTypes: [],\n    isEditMode: false,\n    fullControl: false,\n    signerOptions: [\n      {\n        id: "",\n        dept: "",\n        name: "",\n        username: "",\n        level: "",\n      },\n    ],\n    deptOptions: defaultConf.deptOptions,\n    levelOptions: defaultConf.levelOptions,\n  }),\n  computed: {\n    availableLTs() {\n      return this.leaveTypes.filter((lt) => {\n        return !this.isEditMode || (!this.isAvailableLT(lt) && !lt.stashed);\n      });\n    },\n    unavailableLTs() {\n      return this.leaveTypes.filter((lt) => {\n        return this.isAvailableLT(lt) || lt.stashed;\n      });\n    },\n    unavailableLTsGroups() {\n      const groups = [];\n      this.unavailableLTs.forEach((leaveType) => {\n        const date = new Date(leaveType.deadline);\n        const year = date.getFullYear();\n        const group = groups.find((g) => g.year === year);\n        if (group) {\n          group.list.push(leaveType);\n        } else {\n          groups.push({ list: [leaveType], year });\n        }\n      });\n      return groups;\n    },\n  },\n  mounted() {\n    this.account.id = this.$route.params.id;\n    this.isEditMode = this.$route.params.id && this.$route.params.id !== "new";\n    if (this.isEditMode) {\n      this.getEmployee();\n    } else {\n      this.fullControl = true;\n      this.leaveTypes = JSON.parse(JSON.stringify(defaultConf.leaveTypes));\n    }\n    this.getEmployees();\n  },\n  methods: {\n    isAvailableLT(leaveType) {\n      return (\n        leaveType.name.startsWith(defaultConf.compensatory.keyword) &&\n        leaveType.consumes.days === leaveType.totals.days &&\n        leaveType.consumes.hours === leaveType.totals.hours &&\n        utility.formatDate(leaveType.deadline) <= utility.formatDate("now")\n      );\n    },\n    async getEmployees() {\n      const {\n        data: { employees },\n      } = await EmployeeService.fetchForLightweight({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n      });\n      this.signerOptions = employees.map((e) => ({\n        id: e._id,\n        dept: e.dept,\n        name: e.name,\n        username: e.username,\n        level: e.level,\n      }));\n    },\n    async getEmployee() {\n      const {\n        data: {\n          employeeID,\n          dept,\n          name,\n          username,\n          arrivedDate,\n          level,\n          signers,\n          activatedLeaveTypes,\n          fullControl,\n          email,\n        },\n      } = await EmployeeService.get({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n        id: this.$route.params.id,\n      });\n      this.profile = {\n        employeeID,\n        dept,\n        name,\n        username,\n        arrivedDate: utility.formatDate(arrivedDate),\n        level,\n        signers: signers,\n        email: email,\n      };\n      this.fullControl = fullControl;\n      this.leaveTypes = this.accumulateLTsCosumes(\n        this.formatLT(activatedLeaveTypes)\n      );\n    },\n    async submit() {\n      if (this.$refs.form.validate()) {\n        const params = {\n          employeeID: this.profile.employeeID,\n          dept: this.profile.dept,\n          name: this.profile.name,\n          username: this.profile.username,\n          arrivedDate: this.profile.arrivedDate,\n          level: this.profile.level,\n          email: this.profile.email,\n          activatedLeaveTypes: this.leaveTypes.map((lt) => {\n            return {\n              ...lt,\n              consumes: {\n                days: lt.consumes.days,\n                halfHours: lt.consumes.hours * 2,\n              },\n              totals: {\n                days: lt.totals.days,\n                halfHours: lt.totals.hours * 2,\n              },\n            };\n          }),\n          loginuser: this.loginuser.username,\n          token: this.loginuser.token,\n          id: this.$route.params.id,\n          signers: this.profile.signers,\n        };\n        let {\n          data: { success, message },\n        } = this.isEditMode\n          ? await EmployeeService.update(params)\n          : await EmployeeService.add(params);\n\n        if (success) {\n          this.$router.push({ name: "List" });\n        } else {\n          this.systemNotification.text = utility.lookUpCustomMessage(message);\n          this.systemNotification.visible = true;\n        }\n      } else {\n        this.systemNotification = {\n          text: this.loalocale.self.textfieldUndone,\n          level: "warning",\n          visible: true,\n        };\n      }\n    },\n    formatLT(leaveTypes) {\n      const newLeaveTypes = JSON.parse(JSON.stringify(defaultConf.leaveTypes));\n      leaveTypes.forEach((lt) => {\n        let leaveTypeInDefault = newLeaveTypes.find(\n          (ltInDefault) => ltInDefault.name === lt.name\n        );\n        if (leaveTypeInDefault) {\n          leaveTypeInDefault.enabled = lt.enabled;\n          leaveTypeInDefault.consumes = {\n            days: lt.consumes.days,\n            hours: lt.consumes.halfHours ? lt.consumes.halfHours / 2 : 0,\n          };\n          leaveTypeInDefault.totals = {\n            days: lt.totals.days,\n            hours: lt.totals.halfHours ? lt.totals.halfHours / 2 : 0,\n          };\n          leaveTypeInDefault.deadline = utility.formatDate(lt.deadline);\n        } else {\n          const customLeaveType = defaultConf.customLeaveType;\n          newLeaveTypes.push({\n            ...customLeaveType,\n            index: newLeaveTypes.length,\n            enabled: lt.enabled,\n            stashed: lt.stashed,\n            title: lt.name,\n            name: lt.name,\n            consumes: {\n              days: lt.consumes.days,\n              hours: lt.consumes.halfHours ? lt.consumes.halfHours / 2 : 0,\n            },\n            totals: {\n              days: lt.totals.days,\n              hours: lt.totals.halfHours ? lt.totals.halfHours / 2 : 0,\n            },\n            deadline: utility.formatDate(lt.deadline),\n            halfHoursEnabled: lt.halfHoursEnabled,\n          });\n        }\n      });\n      return newLeaveTypes.filter((lt) => this.fullControl || lt.enabled);\n    },\n    remove1LT(index) {\n      this.leaveTypes = this.leaveTypes.filter((lt) => lt.index !== index);\n    },\n    import1LT(customTypeName) {\n      if (customTypeName) {\n        const sameNameLeaveTypes = this.leaveTypes.filter((lt) =>\n          lt.name.startsWith(customTypeName)\n        );\n\n        if (sameNameLeaveTypes.length > 0) {\n          customTypeName += "_" + sameNameLeaveTypes.length;\n        }\n\n        this.leaveTypes.push({\n          ...JSON.parse(JSON.stringify(defaultConf.customLeaveType)),\n          index: this.leaveTypes.length,\n          title: customTypeName,\n          name: customTypeName,\n        });\n      }\n    },\n    accumulateLTsCosumes(leaveTypes) {\n      const familyCare = leaveTypes.find((lt) => lt.name === "familyCare");\n      if (familyCare) {\n        const personal = leaveTypes.find((lt) => lt.name === "personal");\n        personal.consumes.days += familyCare.consumes.days;\n      }\n      return leaveTypes;\n    },\n    async resetEmail(success, message) {\n      this.systemNotification = {\n        text: utility.lookUpCustomMessage(message),\n        level: success ? "info" : "warning",\n        visible: true,\n        handler: ($router, $cookie) => {\n          if (success) {\n            $router.push({ name: "List" });\n          }\n        },\n      };\n    },\n    async resetPWD(success, message) {\n      this.systemNotification = {\n        text: utility.lookUpCustomMessage(message),\n        level: success ? "info" : "warning",\n        visible: true,\n        handler: ($router, $cookie) => {\n          if (success) {\n            $cookie.delete("loginuser");\n            $cookie.delete("token");\n            $router.push({ name: "Login" });\n          }\n        },\n      };\n    },\n  },\n};\n<\/script>\n<style scoped>\n.float-right {\n  float: right;\n}\n</style>\n<style>\n.insider .v-expansion-panel__header {\n  padding: 12px 50px !important;\n}\n</style>\n'],sourceRoot:""}])},kYyh:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"EmployeeAccountSettings.vue",sourceRoot:""}])},lRzh:function(e,n,t){var a=t("iklm");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("e41a17a0",a,!1)},m62g:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"EmployeeInfo.vue",sourceRoot:""}])},m6MK:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\nbutton[data-v-23da37d2] {\n  opacity: 0.6;\n}\nbutton[data-v-23da37d2]:hover {\n  opacity: 1;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/components/src\\components/SystemNotification.vue"],names:[],mappings:";AAwDA;EACA,aAAA;CACA;AACA;EACA,WAAA;CACA",file:"SystemNotification.vue",sourcesContent:['<template>\n  <v-snackbar\n    v-model="value.visible"\n    :color="value.level"\n    multi-line\n    vertical\n    right\n    top\n    :timeout="0"\n    auto-height\n  >\n    <div>\n      <h1 style="font-size: 25px">\n        <v-icon large>{{iconType}}</v-icon>\n        {{value.title ? value.title : loalocale.shared.title.systemNotification}}\n      </h1>\n      <slot></slot>\n    </div>\n    <v-btn flat @click="close(value.keyword)">{{loalocale.self.btn.iGotIt}}</v-btn>\n  </v-snackbar>\n</template>\n\n<script>\nexport default {\n  name: "SystemNotification",\n  props: {\n    value: {\n      type: Object\n    }\n  },\n  created() {},\n  computed: {\n    iconType() {\n      return {\n        info: "info",\n        success: "verified_user",\n        warning: "warning",\n        error: "error_outline"\n      }[this.level];\n    }\n  },\n  data: () => ({\n    snackbar: false\n  }),\n  methods: {\n    close(value) {\n      if (this.value.handler) {\n        this.value.handler(this.$router, this.$cookie);\n      }\n      this.$emit("close", value);\n    }\n  }\n};\n<\/script>\n\n<style scoped>\nbutton {\n  opacity: 0.6;\n}\nbutton:hover {\n  opacity: 1;\n}\n</style>\n'],sourceRoot:""}])},m8HG:function(e,n,t){var a=t("OsHO");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("24a13f89",a,!1)},mYdd:function(e,n,t){var a=t("kYyh");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("e5c5f3a0",a,!1)},noDL:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.circle-icon[data-v-4e577acc] {\n  border-radius: 12px;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/components/src\\components/LeaveTypeRefreshedNotification.vue"],names:[],mappings:";AAyEA;EACA,oBAAA;CACA",file:"LeaveTypeRefreshedNotification.vue",sourcesContent:['<template>\n  <system-notification v-model="systemNotification" @close="close">\n    <tbody>\n      <tr v-for="info in infos" :key="info.name">\n        <td>\n          <v-icon :class="[info.iconNClass.class, \'circle-icon\']">{{info.iconNClass.icon}}</v-icon>\n        </td>\n        <td class="min-width-100">{{info.localeName}}</td>\n        <td>\n          <span\n            v-if="fullControl || isLeaveTypeInfoGeneral(info.name)"\n          >{{stringFormat(loalocale.self.stringTemplate.totals, info.totals)}}</span>\n        </td>\n        <td>{{stringFormat(loalocale.self.stringTemplate.deadline, info.deadline)}}</td>\n      </tr>\n    </tbody>\n  </system-notification>\n</template>\n\n<script>\nimport SystemNotification from "@/components/SystemNotification";\nimport utility from "@/utility.js";\nexport default {\n  name: "LeaveTypeRefreshedNotification",\n  components: {\n    "system-notification": SystemNotification\n  },\n  props: {\n    leaveTypes: {\n      type: Array,\n      default: () => []\n    },\n    fullControl: {\n      type: Boolean,\n      default: false\n    },\n    value: {\n      type: Boolean,\n      default: false\n    }\n  },\n  created() {},\n  computed: {\n    infos() {\n      return this.leaveTypes.map((lt, index) => ({\n        index,\n        name: lt.name,\n        localeName: this.loalocale.shared.leaveTypes[lt.name],\n        deadline: utility.formatDate(lt.deadline),\n        totals: lt.totals.days,\n        iconNClass: utility.lookUpLeaveTypeIconNClass(lt.name)\n      }));\n    },\n    systemNotification() {\n      return {\n        level: "info",\n        title: this.loalocale.self.title,\n        visible: this.value\n      };\n    }\n  },\n  data: () => ({}),\n  methods: {\n    close: function() {\n      this.$emit("close");\n    },\n    stringFormat: utility.stringFormat,\n    isLeaveTypeInfoGeneral: utility.isLeaveTypeInfoGeneral\n  }\n};\n<\/script>\n\n<style scoped>\n.circle-icon {\n  border-radius: 12px;\n}\n</style>\n'],sourceRoot:""}])},oTdt:function(e,n,t){var a=t("24rf");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("9585b628",a,!1)},oUNO:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"RecordList.vue",sourceRoot:""}])},oXBR:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"DatabaseManagement.vue",sourceRoot:""}])},ojAK:function(e,n,t){var a=t("Xd3D");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("56661c6e",a,!1)},pqC3:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"LeaveTypeTooltip.vue",sourceRoot:""}])},rDBR:function(e,n,t){var a=t("P8Gt");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("75aa0630",a,!1)},rEH9:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n.float-right[data-v-1b814ba3] {\n  float: right;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/views/src\\views/Detail.vue"],names:[],mappings:";AAsXA;EACA,aAAA;CACA",file:"Detail.vue",sourcesContent:['<template>\n  <v-app id="detail">\n    <v-container fluid fill-height>\n      <v-layout align-center justify-center>\n        <v-flex xs12 sm8 md8>\n          <v-form ref="form" v-model="valid" lazy-validation>\n            <employee-profile\n              :signer-options="signerOptions"\n              :dept-options="deptOptions"\n              :level-options="levelOptions"\n              :readonly="!fullControl"\n              :addingNew="!isEditMode"\n              :profile.sync="profile"\n            ></employee-profile>\n            <employee-account-settings\n              :account="account"\n              :addingNew="!isEditMode"\n              @resetPWD="resetPWD"\n              @resetEmail="resetEmail"\n            ></employee-account-settings>\n            <v-divider></v-divider>\n            <leave-type-container\n              :leaveTypes="availableLTs"\n              :readonly="!fullControl"\n              @importOne="import1LT"\n              @removeOne="remove1LT"\n              helper\n            ></leave-type-container>\n            <v-layout row wrap>\n              <v-flex>\n                <v-expansion-panel dark>\n                  <v-expansion-panel-content>\n                    <div slot="header">{{ loalocale.self.unavailableLTs }}</div>\n                    <v-expansion-panel\n                      class="insider"\n                      dark\n                      v-for="group in unavailableLTsGroups"\n                      :key="group.year"\n                    >\n                      <v-expansion-panel-content>\n                        <div slot="header">\n                          - {{ group.year }} ({{ group.list.length }})\n                        </div>\n                        <leave-type-container\n                          :leaveTypes="group.list"\n                          :readonly="!fullControl"\n                          @removeOne="remove1LT"\n                        ></leave-type-container>\n                      </v-expansion-panel-content>\n                    </v-expansion-panel>\n                  </v-expansion-panel-content>\n                </v-expansion-panel>\n              </v-flex>\n            </v-layout>\n            <v-layout row wrap>\n              <v-flex xs12>\n                <v-btn\n                  :class="[\'theme\', \'float-right\']"\n                  @click="submit"\n                  v-if="fullControl"\n                  >{{\n                    isEditMode ? loalocale.self.update : loalocale.self.create\n                  }}</v-btn\n                >\n              </v-flex>\n            </v-layout>\n          </v-form>\n        </v-flex>\n      </v-layout>\n    </v-container>\n    <system-notification\n      v-model="systemNotification"\n      @close="systemNotification.visible = false"\n    >\n      <div>{{ systemNotification.text }}</div>\n    </system-notification>\n  </v-app>\n</template>\n<script>\nimport SystemNotification from "@/components/SystemNotification";\nimport EmployeeProfile from "@/components/EmployeeProfile";\nimport EmployeeAccountSettings from "@/components/EmployeeAccountSettings";\nimport LeaveTypeContainer from "@/components/LeaveTypeContainer";\nimport EmployeeService from "@/services/EmployeeService";\nimport utility from "@/utility";\nimport defaultConf from "@/default";\nexport default {\n  name: "Detail",\n  components: {\n    "system-notification": SystemNotification,\n    "employee-profile": EmployeeProfile,\n    "employee-account-settings": EmployeeAccountSettings,\n    "leave-type-container": LeaveTypeContainer,\n  },\n  data: () => ({\n    systemNotification: {\n      level: "warning",\n      text: "",\n      visible: false,\n    },\n    valid: true,\n    profile: {\n      employeeID: "",\n      dept: "",\n      name: "",\n      username: "",\n      arrivedDate: "",\n      level: "",\n      signers: [],\n      email: "",\n    },\n    account: {\n      password: "",\n      email: "",\n      id: "",\n    },\n    leaveTypes: [],\n    isEditMode: false,\n    fullControl: false,\n    signerOptions: [\n      {\n        id: "",\n        dept: "",\n        name: "",\n        username: "",\n        level: "",\n      },\n    ],\n    deptOptions: defaultConf.deptOptions,\n    levelOptions: defaultConf.levelOptions,\n  }),\n  computed: {\n    availableLTs() {\n      return this.leaveTypes.filter((lt) => {\n        return !this.isEditMode || (!this.isAvailableLT(lt) && !lt.stashed);\n      });\n    },\n    unavailableLTs() {\n      return this.leaveTypes.filter((lt) => {\n        return this.isAvailableLT(lt) || lt.stashed;\n      });\n    },\n    unavailableLTsGroups() {\n      const groups = [];\n      this.unavailableLTs.forEach((leaveType) => {\n        const date = new Date(leaveType.deadline);\n        const year = date.getFullYear();\n        const group = groups.find((g) => g.year === year);\n        if (group) {\n          group.list.push(leaveType);\n        } else {\n          groups.push({ list: [leaveType], year });\n        }\n      });\n      return groups;\n    },\n  },\n  mounted() {\n    this.account.id = this.$route.params.id;\n    this.isEditMode = this.$route.params.id && this.$route.params.id !== "new";\n    if (this.isEditMode) {\n      this.getEmployee();\n    } else {\n      this.fullControl = true;\n      this.leaveTypes = JSON.parse(JSON.stringify(defaultConf.leaveTypes));\n    }\n    this.getEmployees();\n  },\n  methods: {\n    isAvailableLT(leaveType) {\n      return (\n        leaveType.name.startsWith(defaultConf.compensatory.keyword) &&\n        leaveType.consumes.days === leaveType.totals.days &&\n        leaveType.consumes.hours === leaveType.totals.hours &&\n        utility.formatDate(leaveType.deadline) <= utility.formatDate("now")\n      );\n    },\n    async getEmployees() {\n      const {\n        data: { employees },\n      } = await EmployeeService.fetchForLightweight({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n      });\n      this.signerOptions = employees.map((e) => ({\n        id: e._id,\n        dept: e.dept,\n        name: e.name,\n        username: e.username,\n        level: e.level,\n      }));\n    },\n    async getEmployee() {\n      const {\n        data: {\n          employeeID,\n          dept,\n          name,\n          username,\n          arrivedDate,\n          level,\n          signers,\n          activatedLeaveTypes,\n          fullControl,\n          email,\n        },\n      } = await EmployeeService.get({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n        id: this.$route.params.id,\n      });\n      this.profile = {\n        employeeID,\n        dept,\n        name,\n        username,\n        arrivedDate: utility.formatDate(arrivedDate),\n        level,\n        signers: signers,\n        email: email,\n      };\n      this.fullControl = fullControl;\n      this.leaveTypes = this.accumulateLTsCosumes(\n        this.formatLT(activatedLeaveTypes)\n      );\n    },\n    async submit() {\n      if (this.$refs.form.validate()) {\n        const params = {\n          employeeID: this.profile.employeeID,\n          dept: this.profile.dept,\n          name: this.profile.name,\n          username: this.profile.username,\n          arrivedDate: this.profile.arrivedDate,\n          level: this.profile.level,\n          email: this.profile.email,\n          activatedLeaveTypes: this.leaveTypes.map((lt) => {\n            return {\n              ...lt,\n              consumes: {\n                days: lt.consumes.days,\n                halfHours: lt.consumes.hours * 2,\n              },\n              totals: {\n                days: lt.totals.days,\n                halfHours: lt.totals.hours * 2,\n              },\n            };\n          }),\n          loginuser: this.loginuser.username,\n          token: this.loginuser.token,\n          id: this.$route.params.id,\n          signers: this.profile.signers,\n        };\n        let {\n          data: { success, message },\n        } = this.isEditMode\n          ? await EmployeeService.update(params)\n          : await EmployeeService.add(params);\n\n        if (success) {\n          this.$router.push({ name: "List" });\n        } else {\n          this.systemNotification.text = utility.lookUpCustomMessage(message);\n          this.systemNotification.visible = true;\n        }\n      } else {\n        this.systemNotification = {\n          text: this.loalocale.self.textfieldUndone,\n          level: "warning",\n          visible: true,\n        };\n      }\n    },\n    formatLT(leaveTypes) {\n      const newLeaveTypes = JSON.parse(JSON.stringify(defaultConf.leaveTypes));\n      leaveTypes.forEach((lt) => {\n        let leaveTypeInDefault = newLeaveTypes.find(\n          (ltInDefault) => ltInDefault.name === lt.name\n        );\n        if (leaveTypeInDefault) {\n          leaveTypeInDefault.enabled = lt.enabled;\n          leaveTypeInDefault.consumes = {\n            days: lt.consumes.days,\n            hours: lt.consumes.halfHours ? lt.consumes.halfHours / 2 : 0,\n          };\n          leaveTypeInDefault.totals = {\n            days: lt.totals.days,\n            hours: lt.totals.halfHours ? lt.totals.halfHours / 2 : 0,\n          };\n          leaveTypeInDefault.deadline = utility.formatDate(lt.deadline);\n        } else {\n          const customLeaveType = defaultConf.customLeaveType;\n          newLeaveTypes.push({\n            ...customLeaveType,\n            index: newLeaveTypes.length,\n            enabled: lt.enabled,\n            stashed: lt.stashed,\n            title: lt.name,\n            name: lt.name,\n            consumes: {\n              days: lt.consumes.days,\n              hours: lt.consumes.halfHours ? lt.consumes.halfHours / 2 : 0,\n            },\n            totals: {\n              days: lt.totals.days,\n              hours: lt.totals.halfHours ? lt.totals.halfHours / 2 : 0,\n            },\n            deadline: utility.formatDate(lt.deadline),\n            halfHoursEnabled: lt.halfHoursEnabled,\n          });\n        }\n      });\n      return newLeaveTypes.filter((lt) => this.fullControl || lt.enabled);\n    },\n    remove1LT(index) {\n      this.leaveTypes = this.leaveTypes.filter((lt) => lt.index !== index);\n    },\n    import1LT(customTypeName) {\n      if (customTypeName) {\n        const sameNameLeaveTypes = this.leaveTypes.filter((lt) =>\n          lt.name.startsWith(customTypeName)\n        );\n\n        if (sameNameLeaveTypes.length > 0) {\n          customTypeName += "_" + sameNameLeaveTypes.length;\n        }\n\n        this.leaveTypes.push({\n          ...JSON.parse(JSON.stringify(defaultConf.customLeaveType)),\n          index: this.leaveTypes.length,\n          title: customTypeName,\n          name: customTypeName,\n        });\n      }\n    },\n    accumulateLTsCosumes(leaveTypes) {\n      const familyCare = leaveTypes.find((lt) => lt.name === "familyCare");\n      if (familyCare) {\n        const personal = leaveTypes.find((lt) => lt.name === "personal");\n        personal.consumes.days += familyCare.consumes.days;\n      }\n      return leaveTypes;\n    },\n    async resetEmail(success, message) {\n      this.systemNotification = {\n        text: utility.lookUpCustomMessage(message),\n        level: success ? "info" : "warning",\n        visible: true,\n        handler: ($router, $cookie) => {\n          if (success) {\n            $router.push({ name: "List" });\n          }\n        },\n      };\n    },\n    async resetPWD(success, message) {\n      this.systemNotification = {\n        text: utility.lookUpCustomMessage(message),\n        level: success ? "info" : "warning",\n        visible: true,\n        handler: ($router, $cookie) => {\n          if (success) {\n            $cookie.delete("loginuser");\n            $cookie.delete("token");\n            $router.push({ name: "Login" });\n          }\n        },\n      };\n    },\n  },\n};\n<\/script>\n<style scoped>\n.float-right {\n  float: right;\n}\n</style>\n<style>\n.insider .v-expansion-panel__header {\n  padding: 12px 50px !important;\n}\n</style>\n'],sourceRoot:""}])},rvaL:function(e,n,t){var a=t("XKjn");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("5be6c011",a,!1)},sdLk:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n","",{version:3,sources:[],names:[],mappings:"",file:"LeaveTypeEditorDialog.vue",sourceRoot:""}])},tEkI:function(e,n,t){(e.exports=t("FZ+f")(!0)).push([e.i,"\na[data-v-5ebc0820] {\n  color: #007bff !important;\n  text-decoration: none;\n}\na.add_link[data-v-5ebc0820] {\n  background: #007bff;\n  color: #fff;\n  padding: 10px 80px;\n  text-transform: uppercase;\n  font-size: 12px;\n  font-weight: bold;\n}\n.disabled[data-v-5ebc0820] {\n  background-color: #eee;\n  color: lightgray;\n}\n.add-btn[data-v-5ebc0820] {\n  border-radius: 20px;\n}\n","",{version:3,sources:["D:/repos/loasystem/client/src/views/src\\views/List.vue"],names:[],mappings:";AA6QA;EACA,0BAAA;EACA,sBAAA;CACA;AACA;EACA,oBAAA;EACA,YAAA;EACA,mBAAA;EACA,0BAAA;EACA,gBAAA;EACA,kBAAA;CACA;AACA;EACA,uBAAA;EACA,iBAAA;CACA;AACA;EACA,oBAAA;CACA",file:"List.vue",sourcesContent:['<template>\n  <page-container\n    :title="loalocale.self.title"\n    icon="view_list"\n    @notified="(notification) => (systemNotification = notification)"\n  >\n    <v-card class="elevation-12">\n      <v-card-title>\n        <v-switch\n          :label="loalocale.self.showResigners"\n          v-if="fullControl"\n          v-model="showResigners"\n        ></v-switch>\n        <v-spacer></v-spacer>\n        <v-text-field\n          v-model="search"\n          append-icon="search"\n          :label="loalocale.self.search"\n          hide-details\n        ></v-text-field>\n        <div\n          style="\n            border: 1px solid black;\n            margin-left: 10px;\n            border-radius: 4px;\n            padding-right: 10px;\n          "\n        >\n          <v-btn @click="download">\n            <v-icon>get_app</v-icon>\n            {{ loalocale.self.download }}\n          </v-btn>\n          <label>{{ loalocale.self.year }}:</label>\n          <input\n            style="\n              width: 60px;\n              border: 1px solid black;\n              border-radius: 4px;\n              padding: 4px 6px;\n            "\n            v-model="year"\n          />\n        </div>\n        <v-btn\n          dark\n          class="theme add-btn"\n          @click="createEmployee"\n          v-if="fullControl"\n        >\n          <v-icon>add</v-icon>\n          {{ loalocale.self.create }}\n        </v-btn>\n      </v-card-title>\n      <v-data-table\n        must-sort\n        :search="search"\n        :headers="headers"\n        :items="filteredEmployees"\n        item-key="_id"\n        :rows-per-page-items="[\n          { text: \'$vuetify.dataIterator.rowsPerPageAll\', value: -1 },\n        ]"\n      >\n        <template slot="items" slot-scope="props">\n          <tr\n            @click="props.expanded = !props.expanded"\n            :class="props.item.enabled ? \'\' : \'disabled\'"\n          >\n            <td>{{ props.item.employeeID }}</td>\n            <td class="min-width-160">\n              {{ props.item.name }}\n              <v-badge left v-if="props.item.unSigningRecords.length > 0">\n                <v-icon color="blue">textsms</v-icon>\n              </v-badge>\n            </td>\n            <td>{{ props.item.username }}</td>\n            <td class="min-width-120">{{ props.item.dept }}</td>\n            <td class="min-width-160">\n              {{ formatDate(props.item.arrivedDate) }}\n            </td>\n            <td class="min-width-160">\n              {{ generateleaveTypeSummary(props.item.annualInfo) }}\n            </td>\n            <td class="min-width-380">\n              <employee-action\n                :key="props.item._id"\n                :employee="props.item"\n                :full-control="fullControl"\n                @delete="deleteEmployee"\n                @toggle="toggleEnable"\n              ></employee-action>\n            </td>\n          </tr>\n        </template>\n        <template slot="expand" slot-scope="props">\n          <v-card flat>\n            <v-list v-if="props.item.enabled">\n              <signing-block\n                v-for="record in props.item.unSigningRecords"\n                :key="record._id"\n                :employee="props.item"\n                :record="record"\n                @sign="sign"\n              ></signing-block>\n            </v-list>\n          </v-card>\n        </template>\n      </v-data-table>\n      <v-card-text style="height: 100px; position: relative"></v-card-text>\n    </v-card>\n    <leave-type-refreshed-notification\n      v-model="news"\n      @close="news = false"\n      :leave-types="$route.params.logs"\n      :full-control="fullControl"\n    ></leave-type-refreshed-notification>\n    <system-notification\n      v-model="systemNotification"\n      @close="systemNotification.visible = false"\n    >\n      <div>{{ systemNotification.text }}</div>\n    </system-notification>\n  </page-container>\n</template>\n\n<script>\nimport EmployeeAction from "@/components/EmployeeAction";\nimport SigningBlock from "@/components/SigningBlock";\nimport SystemNotification from "@/components/SystemNotification";\nimport LeaveTypeRefreshedNotification from "@/components/LeaveTypeRefreshedNotification";\nimport PageContainer from "@/components/PageContainer";\nimport EmployeeService from "@/services/EmployeeService";\nimport utility from "@/utility";\nimport reportUtility from "@/reportUtility";\nexport default {\n  name: "List",\n  components: {\n    "employee-action": EmployeeAction,\n    "signing-block": SigningBlock,\n    "system-notification": SystemNotification,\n    "leave-type-refreshed-notification": LeaveTypeRefreshedNotification,\n    "page-container": PageContainer,\n  },\n  data: () => ({\n    news: false,\n    systemNotification: {\n      level: "warning",\n      text: "",\n      visible: false,\n      handler: () => {},\n    },\n    search: "",\n    headers: [],\n    employees: [],\n    fullControl: false,\n    showResigners: false,\n    year: new Date().getFullYear(),\n  }),\n  computed: {\n    filteredEmployees() {\n      return this.employees.filter((e) => this.showResigners || e.enabled);\n    },\n  },\n  created() {\n    this.headers = [\n      { text: this.loalocale.self.employeeID, value: "employeeID" },\n      { text: this.loalocale.self.name, value: "name" },\n      { text: this.loalocale.self.username, value: "username" },\n      { text: this.loalocale.self.dept, value: "dept" },\n      { text: this.loalocale.self.arrivedDate, value: "arrivedDate" },\n      { text: this.loalocale.self.annualInfo, value: "annualInfo" },\n      { text: this.loalocale.self.action, value: "" },\n    ];\n  },\n  mounted() {\n    this.getEmployees();\n    this.news = this.$route.params.logs && this.$route.params.logs.length > 0;\n  },\n  methods: {\n    download() {\n      this.filteredEmployees.forEach((e) => {\n        const url = EmployeeService.downloadURL.exportEmployee({\n          year: new Date().getFullYear(),\n          loginuser: this.loginuser.username,\n          token: this.loginuser.token,\n          username: e.username,\n        });\n        const iframe = document.createElement("iframe");\n        iframe.src = url;\n        iframe.style = "display:none";\n        document.body.appendChild(iframe);\n      });\n    },\n    async getEmployees() {\n      const {\n        data: { message, employees, fullControl },\n      } = await EmployeeService.fetch({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n      });\n      if (employees) {\n        this.employees = employees.map((e) =>\n          Object.assign({}, e, {\n            unSigningRecords: e.unSigningRecords.map((r) =>\n              Object.assign(\n                {},\n                r,\n                utility.lookUpLeaveTypeIconNClass(r.leaveType)\n              )\n            ),\n          })\n        );\n      } else {\n        this.systemNotification.text = utility.lookUpCustomMessage(message);\n        this.systemNotification.visible = true;\n      }\n      this.fullControl = fullControl;\n    },\n    async toggleEnable(id) {\n      await EmployeeService.toggle({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n        id: id,\n      });\n      this.getEmployees();\n    },\n    async deleteEmployee(id) {\n      await EmployeeService.delete({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n        id: id,\n      });\n      this.getEmployees();\n    },\n    createEmployee() {\n      this.$router.push({\n        name: "Detail",\n        params: { id: "new" },\n      });\n    },\n    async sign(id, recordID, pass) {\n      const {\n        data: { success, message },\n      } = await EmployeeService.updateSign({\n        loginuser: this.loginuser.username,\n        token: this.loginuser.token,\n        id: id,\n        recordID: recordID,\n        pass: pass,\n      });\n      if (success) {\n        this.getEmployees();\n      } else {\n        this.systemNotification.text = utility.lookUpCustomMessage(message);\n        this.systemNotification.visible = true;\n      }\n    },\n    formatDate: utility.formatDate,\n    generateleaveTypeSummary: (annualInfo) =>\n      reportUtility.generateleaveTypeSummary({\n        days: annualInfo.consumes.days,\n        hours: annualInfo.consumes.halfHours / 2,\n        totalDays: annualInfo.totals.days,\n        totalHours: annualInfo.totals.halfHours / 2,\n      }),\n  },\n};\n<\/script>\n<style scoped>\na {\n  color: #007bff !important;\n  text-decoration: none;\n}\na.add_link {\n  background: #007bff;\n  color: #fff;\n  padding: 10px 80px;\n  text-transform: uppercase;\n  font-size: 12px;\n  font-weight: bold;\n}\n.disabled {\n  background-color: #eee;\n  color: lightgray;\n}\n.add-btn {\n  border-radius: 20px;\n}\n</style>\n'],sourceRoot:""}])},v0HR:function(e,n,t){var a=t("fVQq");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("248566b6",a,!1)},vOND:function(e,n,t){var a=t("tEkI");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("cba47ff6",a,!1)},vzNe:function(e,n,t){var a=t("Ilu4");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("493640fa",a,!1)},wsbR:function(e,n,t){var a=t("C0a4");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("34d7e074",a,!1)}},["NHnr"]);
//# sourceMappingURL=app.6e203fb7948f03aa06e1.js.map